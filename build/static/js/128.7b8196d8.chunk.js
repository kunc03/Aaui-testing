(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[128],{1511:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(455),i=a(3),r=a(2),c=a(277),m=a.n(c),o=a(303),d=a.n(o),u=(a(464),a(229)),p=a(18);class h extends s.Component{constructor(){super(...arguments),this.state={user:null,user_id:this.props.match.params.user_id,company_id:"",branch_id:"",grup_id:"",identity:"",name:"",email:"",phone:"",address:"",level:"",password:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],listLevel:[],optionsGroup:[],valueGroup:[],responseMessage:""},this.handleChangeValidity=e=>{this.setState({validity:e})},this.onSubmitEditUser=e=>{e.preventDefault();let t=0==this.state.unlimited?"1":"0",a={company_id:this.state.company_id,group:this.state.valueGroup,grup_id:this.state.grup_id,identity:this.state.identity,name:this.state.name,email:this.state.email,phone:this.state.phone,address:this.state.address,level:this.state.level,status:"active",unlimited:t,validity:this.state.validity.toISOString().split("T")[0]};""===a.company_id||""==a.group||""===a.grup_id||""===a.name||""===a.identity||""===a.email||""===a.level?p.b.warning("Please fill required field."):i.l.put("".concat(i.a,"v1/user/").concat(this.state.user_id),a).then(e=>{if(200===e.status){if(""!==this.state.password){let e={password:this.state.password};i.l.put("".concat(i.a,"v1/user/password/").concat(this.state.user_id),e).then(e=>{console.log("pass: ",e.data)})}"superadmin"===r.a.get("user").data.level?this.props.history.push("/user"):this.props.history.push("/my-company")}})},this.onChangeInput=e=>{const t=e.target,a=t.value,s=t.name;"company_id"===s?i.l.get("".concat(i.a,"v1/branch/company/").concat(a)).then(e=>{200===e.status&&this.setState({listBranch:e.data.result[0],company_id:a})}):"email"===s?this.setState({[s]:a}):"address"===s?a.length<=100?this.setState({[s]:a}):this.setState({responseMessage:"Cannot exceed the character limit.",[s]:a.slice(0,t.maxLength)}):this.setState({[s]:a})}}toggleSwitch(e){this.setState({unlimited:!this.state.unlimited})}componentDidMount(){let e=[];i.l.get("".concat(i.a,"v1/user/").concat(this.state.user_id)).then(t=>{if(200===t.status){let a=0==t.data.result.unlimited;this.setState({user:t.data.result,company_id:localStorage.getItem("companyID")?localStorage.getItem("companyID"):t.data.result.company_id,branch_id:t.data.result.branch_id,grup_id:t.data.result.grup_id,name:t.data.result.name,identity:t.data.result.identity,email:t.data.result.email,phone:t.data.result.phone,address:t.data.result.address,level:t.data.result.level,unlimited:a,validity:new Date(t.data.result.validity)}),e=t.data.result.group_id?t.data.result.group_id.split(",").map(Number):[],i.l.get("".concat(i.a,"v1/branch/company/").concat(this.state.user.company_id)).then(e=>{if(200===e.status){this.setState({listBranch:e.data.result[0]});let t=[];e.data.result[0].map(e=>{t.push({value:e.branch_id,label:e.branch_name})}),this.setState({optionsGroup:t})}}),i.l.get("".concat(i.a,"v1/grup/company/").concat(this.state.user.company_id)).then(t=>{200===t.status&&(this.setState({valueGroup:e}),this.setState({listGrup:t.data.result}))});const s=[{level:"admin"},{level:"client"}];this.setState({listLevel:s})}})}render(){let e="";""!==this.state.validity&&(e=new Date(this.state.validity));const t=this.state.listLevel;return l.a.createElement("div",{className:"pcoded-main-container"},l.a.createElement("div",{className:"pcoded-wrapper"},l.a.createElement("div",{className:"pcoded-content"},l.a.createElement("div",{className:"pcoded-inner-content"},l.a.createElement("div",{className:"main-body"},l.a.createElement("div",{className:"page-wrapper"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-xl-12"},l.a.createElement("h3",{className:"f-24 f-w-800"},"User Management"),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-block"},l.a.createElement("form",{onSubmit:this.onSubmitEditUser},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"},"Group"),l.a.createElement(n.a.Text,{className:"text-danger"},"Required"),l.a.createElement(u.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:e=>this.setState({valueGroup:e}),mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"},"Role"),l.a.createElement(n.a.Text,{className:"text-danger"},"Required"),l.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},l.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map(e=>l.a.createElement("option",{value:e.grup_id,selected:e.grup_id===this.state.user.grup_id?"selected":""},e.grup_name)))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"}," Name "),l.a.createElement(n.a.Text,{className:"text-danger"},"Required"),l.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",value:this.state.name,onChange:this.onChangeInput})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"}," Registration Number "),l.a.createElement(n.a.Text,{className:"text-danger"},"Required"),l.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"210-1971-74",value:this.state.identity,onChange:this.onChangeInput})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"},"Email"),l.a.createElement(n.a.Text,{className:"text-danger"},"Required"),l.a.createElement("input",{type:"email",required:!0,name:"email",value:this.state.email,className:"form-control",placeholder:"rakaal@gmail.com",onChange:this.onChangeInput}),l.a.createElement(n.a.Text,{className:"text-muted"},"Pastikan isi sesuai dengan format email ex. user@email.com")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"},"Phone"),l.a.createElement("input",{type:"text",name:"phone",value:this.state.phone,className:"form-control",placeholder:"081-247-9592",onChange:this.onChangeInput})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"},"Address"),l.a.createElement("textarea",{value:this.state.address,name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input"},"Level"),l.a.createElement(n.a.Text,{className:"text-danger"},"Required"),l.a.createElement("select",{style:{textTransform:"capitalize"},name:"level",className:"form-control",onChange:this.onChangeInput,required:!0},l.a.createElement("option",{value:""},"-- Select --"),t.map(e=>l.a.createElement("option",{value:e.level,selected:e.level===this.state.user.level?"selected":""},"client"===e.level?"User":e.level)))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(m.a,{checked:!1,onChange:this.toggleSwitch.bind(this),checked:this.state.unlimited}))),this.state.unlimited&&l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(d.a,{selected:e,onChange:this.handleChangeValidity,dateFormat:"yyyy-MM-dd"}))),l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-100 f-20 f-w-600"},"Save"))))))))))))}}t.default=h}}]);
//# sourceMappingURL=128.7b8196d8.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[138],{1497:function(a,e,t){"use strict";t.r(e);var s=t(0),l=t.n(s),n=t(18),r=t(3),i=t(2),c=t(1613),o=t(10);class d extends l.a.Component{constructor(){super(...arguments),this.state={idPelajaran:"",namaPelajaran:"",kategori:"",kodePelajaran:"",kelas:"",listKelas:[],listPelajaran:[],openSilabus:!1,pelajaranId:"",silabusId:"",pelajaranNama:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0,files:null,tempFiles:Math.random().toString(36),silabus:[],nilaiTugas:0,nilaiKuis:0,nilaiUjian:0,openProsentase:!1},this.openProsentase=a=>{a.preventDefault(),this.setState({pelajaranId:a.target.getAttribute("data-id"),pelajaranNama:a.target.getAttribute("data-title"),openProsentase:!0}),this.fetchProsentase(a.target.getAttribute("data-id"))},this.saveProsentase=a=>{a.preventDefault();let e={tugas:this.state.nilaiTugas,kuis:this.state.nilaiKuis,ujian:this.state.nilaiUjian};r.l.put("".concat(r.a,"v2/nilai-pelajaran/").concat(this.state.pelajaranId),e).then(a=>{a.data.error&&n.b.warning("Warning: update prosentase"),n.b.success("Set prosentase nilai berhasil disimpan"),this.fetchProsentase(this.state.pelajaranId)})},this.savePelajaran=a=>{if(a.preventDefault(),this.state.idPelajaran){console.log("update");let a={namaPelajaran:this.state.namaPelajaran,kategori:this.state.kategori,kodePelajaran:this.state.kodePelajaran};r.l.put("".concat(r.a,"v2/pelajaran/update/").concat(this.state.idPelajaran),a).then(a=>{a.data.error&&n.b.warning("Error create pelajaran"),this.fetchPelajaran()})}else{console.log("insert");let a={companyId:i.a.get("user").data.company_id,namaPelajaran:this.state.namaPelajaran,kategori:this.state.kategori,kodePelajaran:this.state.kodePelajaran};r.l.post("".concat(r.a,"v2/pelajaran/create"),a).then(a=>{a.data.error&&n.b.warning("Error create pelajaran"),this.fetchPelajaran()})}this.clearForm()},this.selectPelajaran=a=>{a.preventDefault();let e=a.target.getAttribute("data-id");r.l.get("".concat(r.a,"v2/pelajaran/one/").concat(e)).then(a=>{a.data.error&&n.b.warning("Error fetch data kelas");let t=a.data.result;this.setState({idPelajaran:e,namaPelajaran:t.nama_pelajaran,kategori:t.kategori,kodePelajaran:t.kode_pelajaran})})},this.deletePelajaran=a=>{a.preventDefault(),r.l.delete("".concat(r.a,"v2/pelajaran/delete/").concat(a.target.getAttribute("data-id"))).then(a=>{a.data.error&&n.b.warning("Error: delete pelajaran"),this.fetchPelajaran()})},this.openSilabus=a=>{a.preventDefault(),this.setState({pelajaranId:a.target.getAttribute("data-id"),pelajaranNama:a.target.getAttribute("data-title"),openSilabus:!0}),this.fetchSilabus(a.target.getAttribute("data-id"))},this.saveSilabus=a=>{a.preventDefault(),this.addKuisSilabus(this.state.jenis)},this.selectSilabus=a=>{r.l.get("".concat(r.a,"v2/silabus/id/").concat(a.target.getAttribute("data-id"))).then(a=>{a.data.error&&n.b.warning("Error: get one silabus"),this.setState({silabusId:a.data.result.id,sesi:a.data.result.sesi,topik:a.data.result.topik,tujuan:a.data.result.tujuan,deskripsi:a.data.result.deskripsi,jenis:parseInt(a.data.result.jenis)})})},this.deleteSilabus=a=>{a.preventDefault(),r.l.delete("".concat(r.a,"v2/silabus/delete/").concat(a.target.getAttribute("data-id"))).then(a=>{a.data.error&&n.b.warning("Error: delete silabus"),this.fetchSilabus(this.state.pelajaranId)})}}fetchProsentase(a){r.l.get("".concat(r.a,"v2/nilai-pelajaran/").concat(a)).then(a=>{a.data.error&&n.b.warning("Warning: fetch prosentase"),this.setState({nilaiTugas:a.data.result.tugas,nilaiKuis:a.data.result.kuis,nilaiUjian:a.data.result.ujian})})}closeProsentase(){this.setState({nilaiTugas:0,nilaiKuis:0,nilaiUjian:0,openProsentase:!1})}closeModal(){this.fetchPelajaran(),this.setState({openSilabus:!1,silabus:[],pelajaranId:"",pelajaranNama:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0})}clearFormSilabus(){this.setState({silabusId:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0,files:null,tempFiles:Math.random().toString(36)})}clearForm(){this.setState({idPelajaran:"",namaPelajaran:"",kategori:"",kodePelajaran:"",kelas:""})}componentDidMount(){this.fetchPelajaran(),this.fetchKelas()}fetchKelas(){r.l.get("".concat(r.a,"v2/kelas/company/").concat(i.a.get("user").data.company_id)).then(a=>{a.data.error&&n.b.warning("Error fetch data kelas"),this.setState({listKelas:a.data.result})})}fetchPelajaran(){r.l.get("".concat(r.a,"v2/pelajaran/company/").concat(i.a.get("user").data.company_id)).then(a=>{a.data.error&&n.b.warning("Error fetch data kelas"),this.setState({listPelajaran:a.data.result})})}fetchSilabus(a){r.l.get("".concat(r.a,"v2/silabus/pelajaran/").concat(a)).then(a=>{a.data.error&&n.b.info("Error: fetch silabus"),this.setState({silabus:a.data.result})})}addKuisSilabus(a){let e={pelajaranId:this.state.pelajaranId,sesi:this.state.sesi,topik:this.state.topik,tujuan:this.state.tujuan,deskripsi:this.state.deskripsi,jenis:a};this.state.silabusId?r.l.put("".concat(r.a,"v2/silabus/update/").concat(this.state.silabusId),e).then(a=>{a.data.error&&n.b.warning("Error: edit silabus"),this.state.files&&this.uploadFile(this.state.silabusId),this.fetchSilabus(this.state.pelajaranId),this.clearFormSilabus()}):r.l.post("".concat(r.a,"v2/silabus/create"),e).then(a=>{a.data.error&&n.b.warning("Error: create silabus"),this.state.files&&this.uploadFile(a.data.result.id),this.fetchSilabus(this.state.pelajaranId),this.clearFormSilabus()})}uploadFile(a){let e=new FormData;for(var t=0;t<this.state.files.length;t++)e.append("files",this.state.files[t]);r.l.put("".concat(r.a,"v2/silabus/files/").concat(a),e).then(a=>{a.data.error&&n.b.warning("Error: upload file"),this.fetchSilabus(this.state.pelajaranId)})}render(){i.a.get("user").data.level;return l.a.createElement("div",{className:"pcoded-main-container"},l.a.createElement("div",{className:"pcoded-wrapper"},l.a.createElement("div",{className:"pcoded-content"},l.a.createElement("div",{className:"pcoded-inner-content"},l.a.createElement("div",{className:"main-body"},l.a.createElement("div",{className:"page-wrapper"},l.a.createElement("div",{className:"floating-back"},l.a.createElement(o.b,{to:"/"},l.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90}))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",{className:"f-w-900 f-18 fc-blue"},"Pelajaran")),l.a.createElement("div",{className:"card-body",style:{padding:"5px"}},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"No"),l.a.createElement("th",null,"Kode"),l.a.createElement("th",null,"Pelajaran"),l.a.createElement("th",null,"Category"),l.a.createElement("th",null,"Silabus"),l.a.createElement("th",null,"Bobot %"))),l.a.createElement("tbody",null,this.state.listPelajaran.map((a,e)=>l.a.createElement("tr",{key:e},l.a.createElement("td",null,e+1),l.a.createElement("td",null,a.kode_pelajaran),l.a.createElement("td",null,a.nama_pelajaran),l.a.createElement("td",null,a.kategori),l.a.createElement("td",{style:{padding:"12px"}},a.silabus>0?l.a.createElement("span",{onClick:this.openSilabus,"data-id":a.pelajaran_id,"data-title":a.nama_pelajaran,className:"silabus"},l.a.createElement("i",{className:"fa fa-".concat(a.silabus>0?"share":"plus")})," Open"):null),l.a.createElement("td",{style:{padding:"12px"}},l.a.createElement("span",{onClick:this.openProsentase,"data-id":a.pelajaran_id,"data-title":a.nama_pelajaran,className:"silabus"},l.a.createElement("i",{className:"fa fa-cog"})," Open")))))),l.a.createElement(c.a,{show:this.state.openProsentase,onHide:this.closeProsentase.bind(this)},l.a.createElement(c.a.Header,{closeButton:!0},l.a.createElement(c.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},this.state.pelajaranNama)),l.a.createElement(c.a.Body,null,l.a.createElement("form",{onSubmit:this.saveProsentase},l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("label",null,"Tugas"),l.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiTugas,onChange:a=>this.setState({nilaiTugas:a.target.value})})),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("label",null,"Kuis"),l.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiKuis,onChange:a=>this.setState({nilaiKuis:a.target.value})})),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("label",null,"Ujian"),l.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiUjian,onChange:a=>this.setState({nilaiUjian:a.target.value})})))))),l.a.createElement(c.a,{show:this.state.openSilabus,onHide:this.closeModal.bind(this),dialogClassName:"modal-lg modal-1000-large"},l.a.createElement(c.a.Header,{closeButton:!0},l.a.createElement(c.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},"Silabus ",this.state.pelajaranNama)),l.a.createElement(c.a.Body,null,l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Sesi"),l.a.createElement("th",null,"Topik"),l.a.createElement("th",null,"Tujuan"),l.a.createElement("th",null,"Deskripsi"),l.a.createElement("th",null,"Files"))),l.a.createElement("tbody",null,this.state.silabus.map((a,e)=>0===a.jenis?l.a.createElement("tr",{key:e},l.a.createElement("td",null,a.sesi),l.a.createElement("td",null,a.topik),l.a.createElement("td",null,a.tujuan),l.a.createElement("td",null,a.deskripsi),l.a.createElement("td",{style:{padding:"12px"}},a.files?l.a.createElement("a",{href:a.files,target:"_blank",className:"silabus"},"Open"):"No files")):l.a.createElement("tr",{key:e},l.a.createElement("td",null,a.sesi),l.a.createElement("td",{colSpan:"4",className:"text-center"},1==a.jenis?"Kuis":"Ujian")))))))))))))))))}}e.default=d}}]);
//# sourceMappingURL=138.06d21aa4.chunk.js.map
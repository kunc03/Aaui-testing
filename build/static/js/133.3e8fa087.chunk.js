(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[133],{1513:function(e,a,t){"use strict";t.r(a);var l=t(21),n=t(6),s=t(11),r=t(13),i=t(12),c=t(14),m=t(0),o=t.n(m),u=t(476),d=t(3),p=t(2),h=t(293),v=t.n(h),g=t(320),y=t.n(g),E=(t(486),t(245)),b=t(24),f=function(e){function a(){var e,t;Object(n.a)(this,a);for(var s=arguments.length,c=new Array(s),m=0;m<s;m++)c[m]=arguments[m];return(t=Object(r.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(c)))).state={user:null,user_id:t.props.match.params.user_id,company_id:"",branch_id:"",grup_id:"",identity:"",name:"",email:"",phone:"",address:"",level:"",password:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],listLevel:[],optionsGroup:[],valueGroup:[],responseMessage:""},t.handleChangeValidity=function(e){t.setState({validity:e})},t.onSubmitEditUser=function(e){e.preventDefault();var a=0==t.state.unlimited?"1":"0",l={company_id:t.state.company_id,group:t.state.valueGroup,grup_id:t.state.grup_id,identity:t.state.identity,name:t.state.name,email:t.state.email,phone:t.state.phone,address:t.state.address,level:t.state.level,status:"active",unlimited:a,validity:t.state.validity.toISOString().split("T")[0]};""===l.company_id||""==l.group||""===l.grup_id||""===l.name||""===l.identity||""===l.email||""===l.level?b.b.warning("Please fill required field."):d.l.put("".concat(d.a,"v1/user/").concat(t.state.user_id),l).then((function(e){if(200===e.status){if(""!==t.state.password){var a={password:t.state.password};d.l.put("".concat(d.a,"v1/user/password/").concat(t.state.user_id),a).then((function(e){console.log("pass: ",e.data)}))}"superadmin"===p.a.get("user").data.level?t.props.history.push("/user"):t.props.history.push("/my-company")}}))},t.onChangeInput=function(e){var a=e.target,n=a.value,s=a.name;"company_id"===s?d.l.get("".concat(d.a,"v1/branch/company/").concat(n)).then((function(e){200===e.status&&t.setState({listBranch:e.data.result[0],company_id:n})})):"email"===s?t.setState(Object(l.a)({},s,n)):"address"===s?n.length<=100?t.setState(Object(l.a)({},s,n)):t.setState(Object(l.a)({responseMessage:"Cannot exceed the character limit."},s,n.slice(0,a.maxLength))):t.setState(Object(l.a)({},s,n))},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"toggleSwitch",value:function(e){this.setState({unlimited:!this.state.unlimited})}},{key:"componentDidMount",value:function(){var e=this,a=[];d.l.get("".concat(d.a,"v1/user/").concat(this.state.user_id)).then((function(t){if(200===t.status){var l=0==t.data.result.unlimited;e.setState({user:t.data.result,company_id:localStorage.getItem("companyID")?localStorage.getItem("companyID"):t.data.result.company_id,branch_id:t.data.result.branch_id,grup_id:t.data.result.grup_id,name:t.data.result.name,identity:t.data.result.identity,email:t.data.result.email,phone:t.data.result.phone,address:t.data.result.address,level:t.data.result.level,unlimited:l,validity:new Date(t.data.result.validity)}),a=t.data.result.group_id?t.data.result.group_id.split(",").map(Number):[],d.l.get("".concat(d.a,"v1/branch/company/").concat(e.state.user.company_id)).then((function(a){if(200===a.status){e.setState({listBranch:a.data.result[0]});var t=[];a.data.result[0].map((function(e){t.push({value:e.branch_id,label:e.branch_name})})),e.setState({optionsGroup:t})}})),d.l.get("".concat(d.a,"v1/grup/company/").concat(e.state.user.company_id)).then((function(t){200===t.status&&(e.setState({valueGroup:a}),e.setState({listGrup:t.data.result}))}));e.setState({listLevel:[{level:"admin"},{level:"client"}]})}}))}},{key:"render",value:function(){var e=this,a="";""!==this.state.validity&&(a=new Date(this.state.validity));var t=this.state.listLevel;return o.a.createElement("div",{className:"pcoded-main-container"},o.a.createElement("div",{className:"pcoded-wrapper"},o.a.createElement("div",{className:"pcoded-content"},o.a.createElement("div",{className:"pcoded-inner-content"},o.a.createElement("div",{className:"main-body"},o.a.createElement("div",{className:"page-wrapper"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-12"},o.a.createElement("h3",{className:"f-24 f-w-800"},"User Management"),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-block"},o.a.createElement("form",{onSubmit:this.onSubmitEditUser},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Group"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement(E.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:function(a){return e.setState({valueGroup:a})},mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Role"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},o.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map((function(a){return o.a.createElement("option",{value:a.grup_id,selected:a.grup_id===e.state.user.grup_id?"selected":""},a.grup_name)})))),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"}," Name "),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",value:this.state.name,onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"}," Registration Number "),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"210-1971-74",value:this.state.identity,onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Email"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{type:"email",required:!0,name:"email",value:this.state.email,className:"form-control",placeholder:"rakaal@gmail.com",onChange:this.onChangeInput}),o.a.createElement(u.a.Text,{className:"text-muted"},"Pastikan isi sesuai dengan format email ex. user@email.com")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Phone"),o.a.createElement("input",{type:"text",name:"phone",value:this.state.phone,className:"form-control",placeholder:"081-247-9592",onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Address"),o.a.createElement("textarea",{value:this.state.address,name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Level"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("select",{style:{textTransform:"capitalize"},name:"level",className:"form-control",onChange:this.onChangeInput,required:!0},o.a.createElement("option",{value:""},"-- Select --"),t.map((function(a){return o.a.createElement("option",{value:a.level,selected:a.level===e.state.user.level?"selected":""},"client"===a.level?"User":a.level)})))),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(v.a,Object(l.a)({checked:!1,onChange:this.toggleSwitch.bind(this)},"checked",this.state.unlimited)))),this.state.unlimited&&o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(y.a,{selected:a,onChange:this.handleChangeValidity,dateFormat:"yyyy-MM-dd"}))),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-100 f-20 f-w-600"},"Save"))))))))))))}}]),a}(m.Component);a.default=f}}]);
//# sourceMappingURL=133.3e8fa087.chunk.js.map
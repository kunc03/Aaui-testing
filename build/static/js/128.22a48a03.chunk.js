(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[128,143],{1496:function(e,a,t){"use strict";t.r(a);var n=t(224),l=t(6),r=t(11),s=t(13),c=t(12),i=t(14),m=t(0),u=t.n(m),o=t(15),d=t(3),h=t(2),f=t(1616),E=t(24),g=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(s.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(r)))).state={mataPelajaran:[],semester:[],semesterId:"",isModalBuka:!1,isModalSilabus:!1,jadwalPelajaran:[],pelajaranId:"",dataSilabus:[],jadwalKu:[],tahunAjaran:"",listTahunAjaran:[]},t.selectPelajaran=function(e){e.preventDefault();var a=e.target.value;t.setState({isModalSilabus:!0,pelajaranId:a}),t.fetchSilabus(a)},t.selectTahunAjaran=function(e){var a=e.target.value;t.setState({tahunAjaran:a}),t.fetchJadwal(a),t.fetchJadwalKu(a)},t.selectSemester=function(e){var a=e.target.value;d.l.get("".concat(d.a,"v2/jadwal-mengajar/guru/").concat(h.a.get("user").data.user_id,"?tahunAjaran=").concat(t.state.tahunAjaran)).then((function(e){e.data.error&&console.log("Error: fetch pelajaran");var n=e.data.result,l=[{tanggal:"Senin",data:n.filter((function(e){return"Senin"===e.hari&&e.semester_id==a}))},{tanggal:"Selasa",data:n.filter((function(e){return"Selasa"===e.hari&&e.semester_id==a}))},{tanggal:"Rabu",data:n.filter((function(e){return"Rabu"===e.hari&&e.semester_id==a}))},{tanggal:"Kamis",data:n.filter((function(e){return"Kamis"===e.hari&&e.semester_id==a}))},{tanggal:"Jumat",data:n.filter((function(e){return"Jumat"===e.hari&&e.semester_id==a}))},{tanggal:"Sabtu",data:n.filter((function(e){return"Sabtu"===e.hari&&e.semester_id==a}))},{tanggal:"Minggu",data:n.filter((function(e){return"Minggu"===e.hari&&e.semester_id==a}))}];t.setState({mataPelajaran:l,semesterId:a})}))},t}return Object(i.a)(a,e),Object(r.a)(a,[{key:"fetchJadwalKu",value:function(e){var a=this;d.l.get("".concat(d.a,"v2/jadwal-mengajar/guru/").concat(h.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then((function(e){e.data.error&&console.log("Error: fetch pelajaran");var t=e.data.result,l=Object(n.a)(new Map(t.map((function(e){return[e.pelajaran_id,e]}))).values()),r=Object(n.a)(new Map(t.map((function(e){return[e.semester_id,e]}))).values());if(t.length>0){var s=[{tanggal:"Senin",data:t.filter((function(e){return"Senin"===e.hari&&e.semester_id===r[0].semester_id}))},{tanggal:"Selasa",data:t.filter((function(e){return"Selasa"===e.hari&&e.semester_id===r[0].semester_id}))},{tanggal:"Rabu",data:t.filter((function(e){return"Rabu"===e.hari&&e.semester_id===r[0].semester_id}))},{tanggal:"Kamis",data:t.filter((function(e){return"Kamis"===e.hari&&e.semester_id===r[0].semester_id}))},{tanggal:"Jumat",data:t.filter((function(e){return"Jumat"===e.hari&&e.semester_id===r[0].semester_id}))},{tanggal:"Sabtu",data:t.filter((function(e){return"Sabtu"===e.hari&&e.semester_id===r[0].semester_id}))},{tanggal:"Minggu",data:t.filter((function(e){return"Minggu"===e.hari&&e.semester_id===r[0].semester_id}))}];a.setState({mataPelajaran:s,jadwalPelajaran:l,jadwalKu:e.data.result,semester:r,semesterId:r[0].semester_id})}else a.setState({mataPelajaran:e.data.result,jadwalPelajaran:l,jadwalKu:e.data.result,semester:r})}))}},{key:"fetchJadwal",value:function(e){var a=this;d.l.get("".concat(d.a,"v2/jadwal-mengajar/guru/").concat(h.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then((function(e){e.data.error&&E.b.warning("Error: fetch jadwal"),a.setState({jadwalPelajaran:e.data.result})}))}},{key:"fetchSilabus",value:function(e){var a=this;d.l.get("".concat(d.a,"v2/silabus/pelajaran/").concat(e)).then((function(e){e.data.error&&console.log("Error: fetch overview"),a.setState({dataSilabus:e.data.result})}))}},{key:"componentDidMount",value:function(){for(var e=new Date,a=e.getMonth()<6?e.getFullYear()-1+"/"+e.getFullYear():e.getFullYear()+"/"+(e.getFullYear()+1),t=[],n=0;n<6;n++)t.push("".concat(e.getFullYear()-n,"/").concat(e.getFullYear()-n+1));this.setState({tahunAjaran:a,listTahunAjaran:t}),this.fetchJadwal(a),this.fetchJadwalKu(a)}},{key:"clearForm",value:function(){this.setState({isModalSilabus:!1,isModalBuka:!1,pelajaranId:"",dataSilabus:[]})}},{key:"render",value:function(){var e=this;return console.log("state: ",this.state),u.a.createElement("div",{className:"pcoded-main-container"},u.a.createElement("div",{className:"pcoded-wrapper"},u.a.createElement("div",{className:"pcoded-content"},u.a.createElement("div",{className:"pcoded-inner-content"},u.a.createElement("div",{className:"main-body"},u.a.createElement("div",{className:"page-wrapper"},u.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3"},"Jadwal Mengajar"),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-12"},u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-header row"},u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("label",null,"Tahun Ajaran"),u.a.createElement("select",{onChange:this.selectTahunAjaran,value:this.state.tahunAjaran,className:"form-control",required:!0},u.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listTahunAjaran.map((function(e){return u.a.createElement("option",{value:e},e)})))),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("label",null,"Semester"),u.a.createElement("select",{onChange:this.selectSemester,value:this.state.semesterId,className:"form-control",required:!0},u.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.semester.map((function(e){return u.a.createElement("option",{value:e.semester_id},e.semester_name)})))),u.a.createElement("div",{className:"col-sm-4"},u.a.createElement("button",{onClick:function(){return e.setState({isModalSilabus:!0})},className:"btn btn-v2 btn-primary mt-4"},u.a.createElement("i",{className:"fa fa-list"}),"See Syllabus"))),u.a.createElement("div",{className:"card-body",style:{padding:"12px"}},u.a.createElement("table",{className:"table table-bordered"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},"Date"),u.a.createElement("th",{className:"text-center"},"Class"),u.a.createElement("th",{className:"text-center"},"Room"),u.a.createElement("th",{className:"text-center"},"Subject"),u.a.createElement("th",{className:"text-center"},"Time"),u.a.createElement("th",{className:"text-center"},"Action"))),u.a.createElement("tbody",null,this.state.mataPelajaran.map((function(e,a){return u.a.createElement(u.a.Fragment,null,u.a.createElement("tr",null,u.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"},rowSpan:e.data.length+1},e.tanggal),0===e.data.length&&u.a.createElement("td",{className:"text-center",colSpan:"5"},"No schedule")),e.data.map((function(e){return u.a.createElement("tr",null,u.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.kelas_nama),u.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_ruangan),u.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_pelajaran),u.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.jam_mulai,"-",e.jam_selesai),u.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},u.a.createElement(o.b,{to:"/guru/preview/".concat(e.jadwal_id),className:"btn btn-v2 btn-primary"},u.a.createElement("i",{className:"fa fa-paper-plane"})," Open")))})))}))),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},"Date"),u.a.createElement("th",{className:"text-center"},"Class"),u.a.createElement("th",{className:"text-center"},"Room"),u.a.createElement("th",{className:"text-center"},"Subject"),u.a.createElement("th",{className:"text-center"},"Time"),u.a.createElement("th",{className:"text-center"},"Action"))))))),u.a.createElement(f.a,{show:this.state.isModalBuka,onHide:function(){return e.clearForm()}},u.a.createElement(f.a.Body,null,u.a.createElement("h4",null,"Perhatian"),u.a.createElement("p",null,"Apakah Kamu yakin mau masuk pelajaran ... ?"),u.a.createElement(o.b,{to:"/",className:"btn btn-v2 btn-primary"},"Yakin"))),u.a.createElement(f.a,{show:this.state.isModalSilabus,onHide:function(){return e.clearForm()},dialogClassName:"modal-xlg"},u.a.createElement(f.a.Header,{closeButton:!0},u.a.createElement("form",{className:"form-inline"},u.a.createElement("label",null,"Subject"),u.a.createElement("select",{onChange:this.selectPelajaran,className:"form-control ml-2"},u.a.createElement("option",{value:"",disabled:!0,selected:!0},"Choose subject"),this.state.jadwalPelajaran.map((function(e,a){return u.a.createElement("option",{key:a,value:e.pelajaran_id},e.nama_pelajaran)}))))),u.a.createElement(f.a.Body,null,u.a.createElement("table",{className:"table table-striped"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Session"),u.a.createElement("th",null,"Topic"),u.a.createElement("th",null,"Goal"),u.a.createElement("th",null,"Description"),u.a.createElement("th",null,"Periode"),u.a.createElement("th",null,"Duration"),u.a.createElement("th",null,"Files"))),u.a.createElement("tbody",null,this.state.dataSilabus.map((function(e,a){return 0===e.jenis?u.a.createElement("tr",{key:a},u.a.createElement("td",null,e.sesi),u.a.createElement("td",null,e.topik),u.a.createElement("td",null,e.tujuan),u.a.createElement("td",null,e.deskripsi),u.a.createElement("td",null,e.periode),u.a.createElement("td",null,e.durasi),u.a.createElement("td",{style:{padding:"12px"}},e.files?u.a.createElement("a",{href:e.files,target:"_blank",className:"silabus"},"Open"):"No files")):u.a.createElement("tr",{key:a},u.a.createElement("td",null,e.sesi),u.a.createElement("td",{colSpan:"4",className:"text-center"},1==e.jenis?"Kuis":"Ujian"))})))))))))))))}}]),a}(u.a.Component);a.default=g},224:function(e,a,t){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(a,"a",(function(){return n}))}}]);
//# sourceMappingURL=128.22a48a03.chunk.js.map
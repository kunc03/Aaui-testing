(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[123],{1338:function(e,t,a){"use strict";a.r(t);var n=a(21),o=a(6),i=a(11),s=a(13),l=a(12),r=a(14),c=a(0),d=a.n(c),m=a(268),u=a.n(m),p=(a(317),a(3)),h=a(24),f=a(1616),y=a(2),g=a(25),b=a.n(g),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).closeModalAllocation=function(e){a.setState({modalAllocation:!1,amount:"",licensesId:"",mode:""})},a.handleChange=function(e){var t=e.target,o=t.name,i=t.value;"amount"===o&&i<0?a.setState(Object(n.a)({},o,0)):a.setState(Object(n.a)({},o,i))},a.filter=function(e){e.preventDefault(),a.setState({filter:e.target.value})},a.filterHistory=function(e){e.preventDefault(),a.setState({filterHistory:e.target.value})},a.state={userId:"",companyId:"",data:[],dataLicenses:[],filter:"",filterHistory:"",licensesId:"",licensesTypeId:"",modalAllocation:!1,amount:"",mode:"",id:"",note:"",isSaving:!1},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"save",value:function(){var e=this;if(this.setState({isSaving:!0}),""===this.state.amount||"0"===this.state.amount)h.b.warning("Please fill amount"),this.setState({isSaving:!1});else{var t={company_id:this.state.id,licenses_type_id:this.state.licensesTypeId,licenses_allocation_id:this.state.licensesId,amount:this.state.amount,type:this.state.mode,note:this.state.note,created_by:this.state.userId};p.l.post("".concat(p.a,"v2/training/quota/company/transaction"),t).then((function(t){t.data.error?(h.b.error(t.data.result),e.setState({isSaving:!1})):(h.b.success("Success for licenses allocation ".concat(e.state.mode)),e.closeModalAllocation(),e.getAllocation(),e.getHistory(),e.setState({isSaving:!1}))}))}}},{key:"getUserData",value:function(){var e=this;p.l.get("".concat(p.j).concat(y.a.get("user").data.email)).then((function(t){200===t.status&&(e.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):t.data.result.company_id,userId:t.data.result.user_id}),e.getAllocation(),e.getHistory())}))}},{key:"getAllocation",value:function(){var e=this;p.l.get("".concat(p.a,"v2/training/quota/company/").concat(this.state.id)).then((function(t){t.data.error?h.b.error("Error read licenses allocation"):e.setState({dataLicenses:t.data.result})}))}},{key:"getHistory",value:function(){var e=this;p.l.get("".concat(p.a,"v2/training/quota/company/history/").concat(this.state.id)).then((function(t){t.data.error?h.b.error("Error read licenses allocation"):e.setState({data:t.data.result})}))}},{key:"componentDidMount",value:function(){this.props.id?this.setState({id:this.props.id}):this.props.match.params.id&&this.setState({id:this.props.match.params.id}),this.getUserData()}},{key:"render",value:function(){var e=this;String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var t=[{cell:function(e){return b.a.tz(e.created_at,b.a.tz.guess(!0)).format("DD-MM-YYYY HH:mm")},name:"Time",selector:"created_at",sortable:!0},{name:"Amount",selector:"amount",sortable:!0},{cell:function(e){return e.transaction_type.capitalize()},name:"Transaction Type",selector:"transaction_type",sortable:!0},{name:"Licenses Type",selector:"type",sortable:!0},{name:"Note",selector:"note",sortable:!0},{name:"Created By",selector:"created_by",sortable:!0}],a=[{name:"Type",selector:"type",sortable:!0,grow:2},{name:"Notes",selector:"notes",sortable:!0,grow:2},{name:"Remaining Allocation",selector:"remaining_allocation",sortable:!0},{name:"Action",cell:function(t){return d.a.createElement("div",null,!e.props.lockEdit&&d.a.createElement("button",{onClick:function(){return e.setState({modalAllocation:!0,licensesId:t.id,licensesTypeId:t.licenses_type_id,mode:"addition"})},className:"button-table-plus"},"+"),!e.props.lockEdit&&d.a.createElement("button",{onClick:function(){return e.setState({modalAllocation:!0,licensesId:t.id,licensesTypeId:t.licenses_type_id,mode:"reduction"})},className:"button-table-min"},"-"))}}],n=this.state,o=n.data,i=n.dataLicenses,s=n.filter,l=n.filterHistory;return""!=s&&(i=i.filter((function(e){return JSON.stringify(Object.values(e)).match(new RegExp(s,"gmi"))}))),""!=l&&(o=o.filter((function(e){return JSON.stringify(Object.values(e)).match(new RegExp(l,"gmi"))}))),d.a.createElement("div",{className:"pcoded-main-container",style:this.props.id?{marginLeft:0}:null},d.a.createElement("div",{className:"pcoded-wrapper"},d.a.createElement("div",{className:"pcoded-content",style:this.props.id?{padding:0}:null},d.a.createElement("div",{className:"pcoded-inner-content"},d.a.createElement("div",{className:"main-body"},d.a.createElement("div",{className:"page-wrapper"},!this.props.id&&d.a.createElement("div",{className:"floating-back"},d.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90,onClick:this.props.history.goBack.bind(this)})),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-xl-12"},d.a.createElement("div",null,d.a.createElement("div",{className:"card p-20 main-tab-container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-12 m-b-20"},d.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},"Licenses"),d.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.filter,className:"form-control float-right col-sm-3"}),d.a.createElement(u.a,{columns:a,data:i,highlightOnHover:!0,defaultSortField:"type",pagination:!0,fixedHeader:!0})))),d.a.createElement("div",{className:"card p-20 main-tab-container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-12 m-b-20"},d.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},"License Allocation History"),d.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.filterHistory,className:"form-control float-right col-sm-3"}),d.a.createElement(u.a,{columns:this.props.lockEdit?[{name:"Time",selector:"created_at",sortable:!0},{name:"Amount",selector:"amount",sortable:!0},{cell:function(e){return e.transaction_type.capitalize()},name:"Transaction Type",selector:"transaction_type",sortable:!0},{name:"Licenses Type",selector:"type",sortable:!0},{name:"Training Company",selector:"training_company",sortable:!0},{name:"Note",selector:"note",sortable:!0},{name:"Created By",selector:"created_by",sortable:!0}]:t,data:o,highlightOnHover:!0,pagination:!0,fixedHeader:!0})))),d.a.createElement(f.a,{show:this.state.modalAllocation,onHide:this.closeModalAllocation,centered:!0},d.a.createElement(f.a.Header,{closeButton:!0},d.a.createElement(f.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},"addition"===this.state.mode?"Add":"Reduce"," Licenses Allocation")),d.a.createElement(f.a.Body,null,d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"amount"},"Amount of ","addition"===this.state.mode?"Addition":"Reduction",d.a.createElement("required",null,"*")),d.a.createElement("input",{type:"number",name:"amount",size:"50",id:"amount",min:"0",placeholder:"0",value:this.state.amount,onChange:this.handleChange})),d.a.createElement("div",{className:"form-field-top-label",style:{width:"100%"}},d.a.createElement("label",{for:"note"},"Note"),d.a.createElement("textarea",{name:"note",onChange:this.handleChange,value:this.state.note,style:{width:"80%"}}))),d.a.createElement(f.a.Footer,null,d.a.createElement("button",{className:"btn btm-icademy-primary btn-icademy-grey",onClick:this.closeModalAllocation.bind(this)},"Cancel"),d.a.createElement("button",{className:"btn btn-icademy-primary",onClick:this.save.bind(this),disabled:this.state.isSaving},d.a.createElement("i",{className:"fa fa-".concat("addition"===this.state.mode?"plus":"minus")})," ","addition"===this.state.mode?"Add":"Reduce"))))))))))))}}]),t}(c.Component);t.default=v},262:function(e,t,a){"use strict";t.a=function(e){var t={};return function(a){return void 0===t[a]&&(t[a]=e(a)),t[a]}}},312:function(e,t,a){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}}}]);
//# sourceMappingURL=123.5a49a006.chunk.js.map
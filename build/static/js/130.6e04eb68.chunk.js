(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[130],{946:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(10),s=t(3),c=t(2),m=t(1613),i=t(18);class d extends n.a.Component{constructor(){super(...arguments),this.state={mataPelajaran:[],isModalBuka:!1,isModalSilabus:!1,jadwalPelajaran:[],pelajaranId:"",dataSilabus:[],jadwalKu:[],tahunAjaran:"",listTahunAjaran:[]},this.selectPelajaran=e=>{e.preventDefault();let a=e.target.value;this.setState({isModalSilabus:!0,pelajaranId:a}),this.fetchSilabus(a)},this.selectTahunAjaran=e=>{const{value:a}=e.target;this.setState({tahunAjaran:a}),this.fetchJadwal(a),this.fetchJadwalKu(a)}}fetchJadwalKu(e){s.l.get("".concat(s.a,"v2/jadwal-mengajar/guru/").concat(c.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then(e=>{e.data.error&&console.log("Error: fetch pelajaran");let a=e.data.result,t=[...new Map(a.map(e=>[e.pelajaran_id,e])).values()];this.setState({mataPelajaran:a,jadwalPelajaran:t,jadwalKu:e.data.result})})}fetchJadwal(e){s.l.get("".concat(s.a,"v2/jadwal-mengajar/guru/").concat(c.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then(e=>{e.data.error&&i.b.warning("Error: fetch jadwal"),this.setState({jadwalPelajaran:e.data.result})})}fetchSilabus(e){s.l.get("".concat(s.a,"v2/silabus/pelajaran/").concat(e)).then(e=>{e.data.error&&console.log("Error: fetch overview"),this.setState({dataSilabus:e.data.result})})}componentDidMount(){let e=new Date,a=e.getMonth()<6?e.getFullYear()-1+"/"+e.getFullYear():e.getFullYear()+"/"+(e.getFullYear()+1),t=[];for(var l=0;l<6;l++)t.push("".concat(e.getFullYear()-l,"/").concat(e.getFullYear()-l+1));this.setState({tahunAjaran:a,listTahunAjaran:t}),this.fetchJadwal(a),this.fetchJadwalKu(a)}clearForm(){this.setState({isModalSilabus:!1,isModalBuka:!1,pelajaranId:"",dataSilabus:[]})}render(){return n.a.createElement("div",{className:"pcoded-main-container"},n.a.createElement("div",{className:"pcoded-wrapper"},n.a.createElement("div",{className:"pcoded-content"},n.a.createElement("div",{className:"pcoded-inner-content"},n.a.createElement("div",{className:"main-body"},n.a.createElement("div",{className:"page-wrapper"},n.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3"},"Semua Kelas"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body",style:{padding:"12px"}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Tahun Ajaran"),n.a.createElement("select",{onChange:this.selectTahunAjaran,value:this.state.tahunAjaran,className:"form-control",required:!0},n.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listTahunAjaran.map(e=>n.a.createElement("option",{value:e},e)))),n.a.createElement("table",{className:"table table-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"text-center"},"Class"),n.a.createElement("th",{className:"text-center"},"Room"),n.a.createElement("th",{className:"text-center"},"Subject"),n.a.createElement("th",{className:"text-center"},"Time"),n.a.createElement("th",{className:"text-center"},"Action"))),n.a.createElement("tbody",null,this.state.mataPelajaran.map((e,a)=>n.a.createElement("tr",null,n.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.kelas_nama),n.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_ruangan),n.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_pelajaran),n.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.jam_mulai,"-",e.jam_selesai),n.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},n.a.createElement(r.b,{to:"/guru/murid/".concat(e.jadwal_id),className:"btn btn-v2 btn-primary"},n.a.createElement("i",{className:"fa fa-paper-plane"})," Open"))))))))),n.a.createElement(m.a,{show:this.state.isModalBuka,onHide:()=>this.clearForm()},n.a.createElement(m.a.Body,null,n.a.createElement("h4",null,"Perhatian"),n.a.createElement("p",null,"Apakah Kamu yakin mau masuk pelajaran ... ?"),n.a.createElement(r.b,{to:"/",className:"btn btn-v2 btn-primary"},"Yakin"))),n.a.createElement(m.a,{show:this.state.isModalSilabus,onHide:()=>this.clearForm(),dialogClassName:"modal-xlg"},n.a.createElement(m.a.Header,{closeButton:!0},n.a.createElement("form",{className:"form-inline"},n.a.createElement("label",null,"Subject"),n.a.createElement("select",{onChange:this.selectPelajaran,className:"form-control ml-2"},n.a.createElement("option",{value:"",disabled:!0,selected:!0},"Choose subject"),this.state.jadwalPelajaran.map((e,a)=>n.a.createElement("option",{key:a,value:e.pelajaran_id},e.nama_pelajaran))))),n.a.createElement(m.a.Body,null,n.a.createElement("table",{className:"table table-striped"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Session"),n.a.createElement("th",null,"Topic"),n.a.createElement("th",null,"Goal"),n.a.createElement("th",null,"Description"),n.a.createElement("th",null,"Files"))),n.a.createElement("tbody",null,this.state.dataSilabus.map((e,a)=>0===e.jenis?n.a.createElement("tr",{key:a},n.a.createElement("td",null,e.sesi),n.a.createElement("td",null,e.topik),n.a.createElement("td",null,e.tujuan),n.a.createElement("td",null,e.deskripsi),n.a.createElement("td",{style:{padding:"12px"}},e.files?n.a.createElement("a",{href:e.files,target:"_blank",className:"silabus"},"Open"):"No files")):n.a.createElement("tr",{key:a},n.a.createElement("td",null,e.sesi),n.a.createElement("td",{colSpan:"4",className:"text-center"},1==e.jenis?"Kuis":"Ujian"))))))))))))))}}a.default=d}}]);
//# sourceMappingURL=130.6e04eb68.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[83],{1411:function(e,t,a){"use strict";a.r(t);var l=a(224),n=a(6),c=a(11),i=a(13),s=a(12),m=a(14),o=a(0),r=a.n(o),d=a(1616),p=a(21),u=a(31),g=a(476),h=a(3),f=a(293),E=a.n(f),b=a(320),v=a.n(b),y=(a(486),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleChangeValidity=function(e){a.setState({validity:e})},a.onChangeInput=function(e){var t=e.target,l=t.value,n=t.name;a.setState(Object(p.a)({},n,l))},a.onClickSimpan=function(e){e.preventDefault();var t=a.props.triggerUpdate;if(a.state.nama&&a.state.logo&&a.state.tipe){var l=0==a.state.unlimited?"1":"0",n=new FormData;n.append("company_name",a.state.nama),n.append("company_type",a.state.tipe),n.append("status",a.state.status),n.append("unlimited",l),n.append("logo",a.state.logo),n.append("validity",a.state.validity.toISOString().split("T")[0]),n.append("limituser",a.state.limituser),n.append("limitmeeting",a.state.limitmeeting),n.append("limitwebinar",a.state.limitwebinar),n.append("access_training",a.state.access_training);var c="".concat(h.a,"v1/company");h.l.post(c,n).then((function(e){if(t(e.data.result),"pendidikan"===a.state.tipe)for(var l=["Admin","Guru","Murid","Parents","Principal","Management"],n=0;n<l.length;n++){var c={company_id:e.data.result.company_id,grup_name:l[n],activity:0,course:0,manage_course:0,forum:0,group_meeting:0,manage_group_meeting:0};h.l.post("".concat(h.a,"v1/grup"),c)}a.setState({nama:"",status:"",logo:""}),a.setState({filename:null}),window.$("#modalAdd").modal("hide"),console.log("resss",e.data.result),console.log("reqqq",a.state.validate)})).catch((function(e){console.log(e)}))}},a.onChangeNama=function(e){a.setState({nama:e.target.value})},a.onChangeTipe=function(e){a.setState({tipe:e.target.value})},a.onChangeStatus=function(e){a.setState({status:e.target.value})},a.onChangeLogo=function(e){var t=e.target;t.files[0].size<=5e5?a.setState({logo:t.files[0],filename:t.files[0].name}):(t.value=null,a.setState({notif:"The file does not match the format, please check again."}))},a.onChangeNama=a.onChangeNama.bind(Object(u.a)(a)),a.onChangeStatus=a.onChangeStatus.bind(Object(u.a)(a)),a.onChangeLogo=a.onChangeLogo.bind(Object(u.a)(a)),a.onClickSimpan=a.onClickSimpan.bind(Object(u.a)(a)),a.state={filename:null,nama:"",tipe:"",status:"active",logo:"",notif:"Make sure the file is in png, jpeg, jpg or gif format and does not exceed 500KB",unlimited:!1,access_training:!1,validity:new Date,limituser:null,limitmeeting:null,limitwebinar:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggleSwitch",value:function(e){this.setState({unlimited:!this.state.unlimited})}},{key:"toggleSwitchTraining",value:function(e){this.setState({access_training:!this.state.access_training})}},{key:"render",value:function(){return r.a.createElement("div",{id:"modalAdd",className:"modal fade",tabIndex:-1,role:"dialog","aria-labelledby":"editModal","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content b-r-15",style:{padding:"30px 50px"}},r.a.createElement("div",{className:"modal-header p-b-0",style:{borderBottom:"0 !important"}},r.a.createElement("h5",{className:"modal-title p-t-0 f-21 f-w-bold text-c-black",id:"exampleModalCenterTitle"},"Add Company")),r.a.createElement("div",{className:"modal-body"},r.a.createElement(g.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Type"),r.a.createElement("select",{onChange:this.onChangeTipe,className:"form-control",style:{textTransform:"capitalize"}},r.a.createElement("option",{value:""},"Select Company Type"),r.a.createElement("option",{value:"perusahaan"},"Perusahaan"),r.a.createElement("option",{value:"pendidikan"},"Pendidikan"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Company Name"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Company Name",onChange:this.onChangeNama,value:this.state.nama})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Company Logo"),r.a.createElement("input",{type:"file",onChange:this.onChangeLogo,className:"form-control",accept:"image/*"}),this.state.filename?r.a.createElement(g.a.Text,{className:"text-info"},this.state.filename," ",r.a.createElement("br",null)):null,this.state.notif&&r.a.createElement(g.a.Text,{className:"text-danger"},this.state.notif)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(E.a,Object(p.a)({checked:!1,onChange:this.toggleSwitch.bind(this)},"checked",this.state.unlimited)))),this.state.unlimited&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(v.a,{selected:this.state.validity,onChange:this.handleChangeValidity,showTimeSelect:!0,dateFormat:"yyyy-MM-dd"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Product Limitation"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"User"),r.a.createElement("th",null,"Meeting"),r.a.createElement("th",null,"Webinar")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(g.a.Control,{type:"number",name:"limituser",onChange:this.onChangeInput,placeholder:"Unlimited",value:this.state.limituser})),r.a.createElement("td",null,r.a.createElement(g.a.Control,{type:"number",name:"limitmeeting",onChange:this.onChangeInput,placeholder:"Unlimited",value:this.state.limitmeeting})),r.a.createElement("td",null,r.a.createElement(g.a.Control,{type:"number",name:"limitwebinar",onChange:this.onChangeInput,placeholder:"Unlimited",value:this.state.limitwebinar}))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-input",htmlFor:!0},"Access Training"),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(E.a,Object(p.a)({checked:!1,onChange:this.toggleSwitchTraining.bind(this)},"checked",this.state.access_training)))))),r.a.createElement("div",{className:"modal-footer p-b-0",style:{borderTop:"0 !important"}},r.a.createElement("button",{type:"button",onClick:this.onClickSimpan,className:"btn btn-primary btn-block f-18 f-w-bold openalertedit"},"Save"),r.a.createElement("button",{type:"button",className:"btn btn-block bg-c-white text-c-grey3 f-18 f-w-bold","data-dismiss":"modal"},"Back")))))}}]),t}(o.Component)),N=a(15),C=a(2),w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).toggleModal=function(){a.setState({isOpen:!a.state.isOpen})},a.closeModalAdd=function(e){console.log(e),a.setState({isOpen:e})},a.triggerUpdate=function(e){return a.setState({grup:[].concat(Object(l.a)(a.state.grup),[e])})},a.isToggleDelete=function(e){a.setState({delete:{modal:!a.state.delete.modal,id:e.target.getAttribute("data-id")}})},a.handleClose=function(e){a.setState({delete:{modal:!1,id:""}})},a.onClickDelete=function(e){e.preventDefault();var t="".concat(h.a,"v1/company/").concat(a.state.delete.id);h.l.delete(t).then((function(e){console.log(e.data),a.setState({grup:a.state.grup.filter((function(e){return e.company_id!=a.state.delete.id})),delete:{modal:!1,id:""}})})).catch((function(e){console.log(e)}))},a.state={grup:[],isOpen:!1,delete:{modal:!1,id:""}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="".concat(h.a,"v1/company");h.l.get(t).then((function(t){e.setState({grup:t.data.result})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.grup,a="";a="superadmin"===C.a.get("user").data.level?"/company-detail-super":"/company-detail";var l=function(t){var l=t.item;return r.a.createElement("li",null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-block",style:{padding:"25px 30px !important"}},r.a.createElement("div",{className:"row d-flex align-items-center"},r.a.createElement("div",{className:"col-xl-1 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("img",{width:"80px",src:l.logo,alt:"Logo"})))),r.a.createElement("div",{className:"col-xl-4 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("small",{className:"f-w-600 f-16 text-c-grey-t "},"Company"),r.a.createElement(N.b,{to:"".concat(a,"/").concat(l.company_id)},r.a.createElement("h5",{className:"f-w-bold f-20 text-c-purple3"},l.company_name))))),r.a.createElement("div",{className:"col-xl-1 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"User"),r.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},l.user)))),r.a.createElement("div",{className:"col-xl-1 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Meeting"),r.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},l.meeting)))),r.a.createElement("div",{className:"col-xl-1 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Limited Time"),r.a.createElement("h5",{className:"f-w-bold f-16 text-c-purple3"},l.unlimited?"Tidak":l.validity.toString().substring(0,10))))),r.a.createElement("div",{className:"col-xl-1 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Status"),r.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},l.status)))),r.a.createElement("div",{className:"col-xl-2 col-md-12"},r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col"},r.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Type"),r.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},l.company_type?"perusahaan"===l.company_type?"Company":"Education":"Not Set")))),r.a.createElement("div",{className:"col-xl-1 col-md-12 text-right"},r.a.createElement("p",{className:"m-b-0"},r.a.createElement(N.b,{to:"".concat(a,"/").concat(l.company_id)},r.a.createElement("img",{src:"assets/images/component/Edit-1.png",className:"img-icon-edit m-r-10",alt:"Edit"})),r.a.createElement("a",{href:"#",title:"Delete","data-toggle":"modal","data-target":"#modalDelete"},r.a.createElement("img",{src:"assets/images/component/Delete-1.png",className:"img-icon-delete","data-id":l.company_id,onClick:e.isToggleDelete,alt:"Delete"}))))))))};return r.a.createElement("div",{className:"pcoded-main-container"},r.a.createElement("div",{className:"pcoded-wrapper"},r.a.createElement("div",{className:"pcoded-content"},r.a.createElement("div",{className:"pcoded-inner-content"},r.a.createElement("div",{className:"main-body"},r.a.createElement("div",{className:"page-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-12"},r.a.createElement("h3",{className:"f-24 f-w-800 mb-3"},"Company Management"),r.a.createElement("a",{href:"#",className:"btn btn-ideku f-14 float-right mb-3",style:{padding:"7px 25px !important"},"data-toggle":"modal","data-target":"#modalAdd"},r.a.createElement("img",{src:"assets/images/component/person_add.png",className:"button-img",alt:""}),"Add New")),r.a.createElement("div",{className:"col-xl-12"},r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement((function(e){var t=e.lists;return r.a.createElement("ul",{className:"list-cabang"},t.map((function(e){return r.a.createElement(l,{key:e.company_id,item:e})})))}),{lists:t}))),r.a.createElement(y,{show:this.state.isOpen,onClose:this.toggleModal,closeModalAdd:this.closeModalAdd,triggerUpdate:this.triggerUpdate}),r.a.createElement(d.a,{show:this.state.delete.modal,onHide:this.handleClose},r.a.createElement(d.a.Header,{closeButton:!0},r.a.createElement(d.a.Title,{className:"text-c-purple3 f-w-bold"},"Hapus Company")),r.a.createElement(d.a.Body,null,r.a.createElement("p",{className:"f-w-bold"},"Apakah anda yakin untuk menghapus company ini ?"),r.a.createElement("button",{type:"button",onClick:this.onClickDelete,className:"btn btn-block btn-ideku f-w-bold"},"Hapus"),r.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.handleClose},"Tidak"))))))))))}}]),t}(o.Component);t.default=w}}]);
//# sourceMappingURL=83.5e109c51.chunk.js.map
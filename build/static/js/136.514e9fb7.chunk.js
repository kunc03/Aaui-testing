(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[136],{1498:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),s=t(2),r=t(3),c=t(18),i=t(10);t(229),t(118);class m extends l.Component{constructor(){super(...arguments),this.state={listSemester:[],semesterId:"",semesterInfo:{},jadwalKu:[],listKelas:[],kelasId:"",kelasInfo:{},listPelajaran:[],pelajaranId:"",pelajaranInfo:{},isLoading:!1,nilaiMurid:[],tahunAjaran:"",listTahunAjaran:[]},this.selectSemester=e=>{e.preventDefault();let a=e.target.value;r.l.get("".concat(r.a,"v2/kelas/company/").concat(s.a.get("user").data.company_id)).then(e=>{e.data.error&&c.b.warning("Error fetch data semester"),this.setState({semesterId:a,listKelas:e.data.result})})},this.selectKelas=e=>{e.preventDefault();let a=e.target.value,t=[...this.state.jadwalKu].filter(e=>e.kelas_id===parseInt(a));this.setState({kelasId:a,listPelajaran:t})},this.selectPelajaran=e=>{e.preventDefault();let a=e.target.value;this.setState({isLoading:!0,pelajaranId:a,nilaiMurid:[]}),this.fetchNilaiMurid(this.state.kelasId,a,this.state.tahunAjaran)},this.selectTahunAjaran=e=>{const{value:a}=e.target;this.setState({tahunAjaran:a}),this.fetchJadwal(a)},this.resetFilter=e=>{e.preventDefault(),this.setState({semesterId:"",semesterInfo:{},listKelas:[],kelasId:"",kelasInfo:{},listPelajaran:[],pelajaranId:"",pelajaranInfo:{},isLoading:!1,nilaiMurid:[]})}}fetchJadwal(e){r.l.get("".concat(r.a,"v2/jadwal-mengajar/company/").concat(s.a.get("user").data.company_id,"?tahunAjaran=").concat(e)).then(e=>{e.data.error&&console.log("Error: fetch pelajaran"),this.setState({jadwalKu:e.data.result})})}fetchSemester(){r.l.get("".concat(r.a,"v1/semester/company/").concat(s.a.get("user").data.company_id)).then(e=>{e.data.error&&c.b.warning("Error fetch data semester"),this.setState({listSemester:e.data.result})})}fetchNilaiMurid(e,a,t){console.log("Query: ".concat(e," ").concat(a)),r.l.get("".concat(r.a,"v2/guru/nilai-kelas/").concat(e,"/").concat(a,"?tahunAjaran=").concat(t)).then(e=>{this.setState({nilaiMurid:e.data.result,isLoading:!1})})}componentDidMount(){let e=new Date,a=e.getMonth()<6?e.getFullYear()-1+"/"+e.getFullYear():e.getFullYear()+"/"+(e.getFullYear()+1),t=[];for(var l=0;l<6;l++)t.push("".concat(e.getFullYear()-l,"/").concat(e.getFullYear()-l+1));this.setState({tahunAjaran:a,listTahunAjaran:t}),this.fetchJadwal(a),this.fetchSemester()}render(){s.a.get("user").data.level;return n.a.createElement("div",{className:"pcoded-main-container"},n.a.createElement("div",{className:"pcoded-wrapper"},n.a.createElement("div",{className:"pcoded-content"},n.a.createElement("div",{className:"pcoded-inner-content"},n.a.createElement("div",{className:"main-body"},n.a.createElement("div",{className:"page-wrapper"},n.a.createElement("div",{className:"floating-back"},n.a.createElement(i.b,{to:"/"},n.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90}))),n.a.createElement("div",{className:"row mt-3"},n.a.createElement("div",{className:"col-xl-12"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3"},"Laporan Kelas"),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group row"},n.a.createElement("div",{className:"col-sm-2"},n.a.createElement("label",null,"Tahun Ajaran"),n.a.createElement("select",{onChange:this.selectTahunAjaran,value:this.state.tahunAjaran,className:"form-control",required:!0},n.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listTahunAjaran.map(e=>n.a.createElement("option",{value:e},e)))),n.a.createElement("div",{className:"col-sm-2"},n.a.createElement("label",null,"Semester"),n.a.createElement("select",{onChange:this.selectSemester,value:this.state.semesterId,className:"form-control",required:!0},n.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listSemester.map((e,a)=>n.a.createElement("option",{key:a,value:e.semester_id},e.semester_name)))),n.a.createElement("div",{className:"col-sm-2"},n.a.createElement("label",null,"Kelas"),n.a.createElement("select",{onChange:this.selectKelas,value:this.state.kelasId,className:"form-control",required:!0},n.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listKelas.map((e,a)=>n.a.createElement("option",{key:a,value:e.kelas_id},e.kelas_nama)))),n.a.createElement("div",{className:"col-sm-3"},n.a.createElement("label",null,"Mata Pelajaran"),n.a.createElement("select",{onChange:this.selectPelajaran,value:this.state.pelajaranId,className:"form-control",required:!0},n.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listPelajaran.map((e,a)=>n.a.createElement("option",{key:a,value:e.pelajaran_id},e.nama_pelajaran)))),n.a.createElement("div",{className:"col-sm-2"},n.a.createElement("label",null,"Action"),n.a.createElement("br",null),n.a.createElement("button",{className:"btn btn-v2 btn-info",type:"reset",onClick:this.resetFilter},"Reset"))))))),n.a.createElement("div",{className:"col-xl-12"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-body"},n.a.createElement("table",{className:"table table-striped table-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"text-center"},n.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NO "),n.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NIK "),n.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NAMA "),n.a.createElement("td",{colSpan:"3"},"NILAI HASIL BELAJAR"),n.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"NILAI AKHIR"),n.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"STATUS")),n.a.createElement("tr",{className:"text-center"},n.a.createElement("td",null,"TASK"),n.a.createElement("td",null,"QUIZ"),n.a.createElement("td",null,"EXAM"))),n.a.createElement("tbody",null,this.state.isLoading&&n.a.createElement("tr",null,n.a.createElement("td",{className:"text-center",colSpan:"8"},n.a.createElement("span",null,"Loading..."))),this.state.nilaiMurid.map((e,a)=>n.a.createElement("tr",{className:"text-center"},n.a.createElement("td",null,a+1),n.a.createElement("td",null,e.no_induk),n.a.createElement("td",null,e.nama),n.a.createElement("td",null,e.task),n.a.createElement("td",null,e.quiz),n.a.createElement("td",null,e.exam),n.a.createElement("td",null,e.task+e.quiz+e.exam),n.a.createElement("td",null,e.task+e.quiz+e.exam>=50?n.a.createElement("span",{class:"label label-success"},"Lulus"):n.a.createElement("span",{class:"label label-danger"},"Mengulang"))))))))))))))))}}a.default=m}}]);
//# sourceMappingURL=136.514e9fb7.chunk.js.map
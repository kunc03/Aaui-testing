(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[78],{1405:function(e,t,n){"use strict";n.r(t);var i=n(469),a=n(21),o=n(6),s=n(11),r=n(13),l=n(12),c=n(31),u=n(14),d=n(0),p=n.n(d),f=n(24),m=n(3),h=n(2),g=n(324),v=n(247),b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(l.a)(t).call(this,e))).closeModalDelete=function(e){n.setState({modalDelete:!1,deleteId:""})},n.autoSave=function(e){if(n.setState({isSaving:!0}),n.state.edited||e)if(n.state.title&&n.state.overview&&n.state.answer.length){if(n.state.id){var t={image:n.state.image,title:n.state.title,overview:n.state.overview,session:n.state.session,created_by:h.a.get("user").data.user_id};m.l.put("".concat(m.a,"v2/training/course/").concat(n.state.id),t).then((function(e){if(e.data.error)f.b.error("Error edit course");else if(n.state.image){var t=new FormData;t.append("image",n.state.image),m.l.put("".concat(m.a,"v2/training/course/image/").concat(n.state.id),t).then((function(e){e.data.error?(f.b.warning("Course edited but fail to upload image"),n.setState({edited:!1,isSaving:!1})):(f.b.success("Automatic saving"),n.setState({edited:!1,isSaving:!1}))}))}else f.b.success("Automatic saving"),n.setState({edited:!1,isSaving:!1})}))}}else f.b.warning("Some field is required, please check your data."),n.setState({isSaving:!1});else n.setState({isSaving:!1})},n.save=function(e,t){if(n.setState({isSaving:!0}),e.preventDefault(),n.state.valueLicensesType.length&&n.state.valueCourse.length&&n.state.answer.length)if(n.state.id){var i={training_course_id:String(n.state.valueCourse),licenses_type_id:String(n.state.valueLicensesType),question:n.state.question_text,answer:n.state.answer,explanation:n.state.explanation,options:[{option_label:"A",option_text:n.state.optionA},{option_label:"B",option_text:n.state.optionB},{option_label:"C",option_text:n.state.optionC},{option_label:"D",option_text:n.state.optionD},{option_label:"E",option_text:n.state.optionE}]};m.l.put("".concat(m.a,"v2/training/questions/").concat(n.state.id),i).then((function(e){e.data.error?f.b.error("Error edit questions"):(f.b.success("Question edited"),n.props.history.push("/training/questions"))}))}else{var a={training_course_id:String(n.state.valueCourse),licenses_type_id:String(n.state.valueLicensesType),question:n.state.question_text,answer:n.state.answer,explanation:n.state.explanation,options:[{option_label:"A",option_text:n.state.optionA},{option_label:"B",option_text:n.state.optionB},{option_label:"C",option_text:n.state.optionC},{option_label:"D",option_text:n.state.optionD},{option_label:"E",option_text:n.state.optionE}]};m.l.post("".concat(m.a,"v2/training/questions"),a).then((function(e){e.data.error?f.b.error("Error create questions"):(f.b.success("New questions added"),n.props.history.push("/training/questions"))}))}else f.b.warning("Some field is required, please check your data."),n.setState({isSaving:!1})},n.handleChangeOpt=function(e){var t=e.target,i=t.name,o=t.value;n.setState(Object(a.a)({},i,o))},n.handleChangeAnswer=function(e){n.setState({answer:e})},n.handleDynamicInput=function(e){n.setState({question_text:e})},n.handleDynamicInput2=function(e){n.setState({explanation:e})},n.handleOverview=function(e){n.setState({overview:e,edited:!0})},n.handleChange=function(e){n.setState({edited:!0});var t=e.target,i=t.name,o=t.value;if("media"===i){if(e.target.files.length)if(e.target.files[0].size<=5e8){n.setState({isUploading:!0});var s=new FormData;s.append("media",e.target.files[0]),m.l.post("".concat(m.a,"v2/training/course/session/media/").concat(n.state.selectedSession),s).then((function(e){if(e.data.error)f.b.warning("Fail to upload image"),n.setState({isUploading:!1});else{n.state.session.indexOf(n.state.session.filter((function(e){return e.id===n.state.selectedSession}))[0]);var t=n.state.media;t.push({id:e.data.result.id,name:e.data.result.name,url:e.data.result.url}),n.setState({media:t,isUploading:!1})}}))}else e.target.value=null,f.b.warning("Image size cannot larger than 5MB and must be an image file")}else if("image"===i){if(e.target.files.length)if(e.target.files[0].size<=5e6){var r={image:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])};n.setState(r)}else e.target.value=null,f.b.warning("Image size cannot larger than 5MB and must be an image file")}else if("session_title"===i){n.setState(Object(a.a)({},i,o));var l=n.state.session.indexOf(n.state.session.filter((function(e){return e.id===n.state.selectedSession}))[0]),c={id:n.state.selectedSession,title:o,content:n.state.content,sort:l,media:n.state.media};n.state.session.splice(l,1,c)}else n.setState(Object(a.a)({},i,o))},n.selectSession=function(e){n.state.selectedSession!==e?(n.autoSave(),n.setState({initialSession:!0,selectedSession:n.state.session.filter((function(t){return t.id===e}))[0].id,session_title:n.state.session.filter((function(t){return t.id===e}))[0].title,content:n.state.session.filter((function(t){return t.id===e}))[0].content,media:n.state.session.filter((function(t){return t.id===e}))[0].media})):n.setState({initialSession:!0,selectedSession:n.state.session.filter((function(t){return t.id===e}))[0].id,session_title:n.state.session.filter((function(t){return t.id===e}))[0].title,content:n.state.session.filter((function(t){return t.id===e}))[0].content,media:n.state.session.filter((function(t){return t.id===e}))[0].media})},n.state={edited:!1,initialSession:!1,id:n.props.match.params.id?n.props.match.params.id:"",companyId:"",image:"",logo:"",imagePreview:"assets/images/no-image.png",name:"",address:"",telephone:"",fax:"",website:"",email:"",isUploading:!1,isSaving:!1,explanation:"Loading...",optionA:"",optionB:"",optionC:"",optionD:"",optionE:"",optionsLicensesType:[],valueLicensesType:[],optionsCourse:[],valueCourse:[],answer:"",question_text:"Loading...",content:"Loading...",title:"",overview:"Loading...",session_title:"",file:"",selectedSession:"",media:[],modalDelete:!1,disabledForm:n.props.disabledForm&&n.props.id,session:[]},n.goBack=n.goBack.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"goBack",value:function(){this.props.goBack?this.props.goBack():this.props.history.push("/training/questions")}},{key:"getData",value:function(e){var t=this;m.l.get("".concat(m.a,"v2/training/questions/read/").concat(e)).then((function(e){e.data.error?f.b.error("Error read questions"):t.setState({id:e.data.result.id,question_text:e.data.result.question,explanation:e.data.result.explanation,answer:e.data.result.answer,valueCourse:[e.data.result.training_course_id],valueLicensesType:[e.data.result.licenses_type_id],optionA:e.data.result.options.filter((function(e){return"A"===e.option_label})).length?e.data.result.options.filter((function(e){return"A"===e.option_label}))[0].option_text:"",optionB:e.data.result.options.filter((function(e){return"B"===e.option_label})).length?e.data.result.options.filter((function(e){return"B"===e.option_label}))[0].option_text:"",optionC:e.data.result.options.filter((function(e){return"C"===e.option_label})).length?e.data.result.options.filter((function(e){return"C"===e.option_label}))[0].option_text:"",optionD:e.data.result.options.filter((function(e){return"D"===e.option_label})).length?e.data.result.options.filter((function(e){return"D"===e.option_label}))[0].option_text:"",optionE:e.data.result.options.filter((function(e){return"E"===e.option_label})).length?e.data.result.options.filter((function(e){return"E"===e.option_label}))[0].option_text:""})}))}},{key:"getUserData",value:function(){var e=this;m.l.get("".concat(m.j).concat(h.a.get("user").data.email)).then((function(t){200===t.status&&e.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):t.data.result.company_id},(function(){m.l.get("".concat(m.a,"v2/training/settings/licenses-type/").concat(e.state.companyId)).then((function(t){t.data.error?f.b.error("Error read licenses type"):t.data.result.map((function(t){e.state.optionsLicensesType.push({label:t.notes.length?"".concat(t.name," - ").concat(t.notes):t.name,value:t.id})}))})),m.l.get("".concat(m.a,"v2/training/course-list-admin/").concat(e.state.companyId)).then((function(t){t.data.error?f.b.error("Error read course list"):(t.data.result.map((function(t){e.state.optionsCourse.push({label:t.title,value:t.id})})),e.props.disabledForm&&e.props.id?e.getData(e.props.id):e.props.match.params.id?e.getData(e.props.match.params.id):e.setState({question_text:"",explanation:""}))}))}))}))}},{key:"componentDidMount",value:function(){this.getUserData()}},{key:"clearSessionForm",value:function(){this.setState({edited:!1,selectedSession:"",session_title:"",content:"",media:[]})}},{key:"deleteSession",value:function(){var e=this;m.l.delete("".concat(m.a,"v2/training/course/session/").concat(this.state.selectedSession)).then((function(t){if(t.data.error)f.b.error("Error delete course");else{var n=e.state.session.indexOf(e.state.session.filter((function(t){return t.id===e.state.selectedSession}))[0]),i=(e.state.session[n].id,e.state.session);i.splice(n,1),e.setState({session:i}),i.length?e.selectSession(i[0].id):(e.setState({initialSession:!1}),e.clearSessionForm()),e.closeModalDelete()}}))}},{key:"addNewSession",value:function(){var e=this;if(this.state.title){var t={course_id:this.props.match.params.id?this.props.match.params.id:this.state.id,title:"",content:"",sort:this.state.session.length};m.l.post("".concat(m.a,"v2/training/course/session"),t).then((function(t){t.data.error?f.b.error("Error create session"):e.setState({initialSession:!0},(function(){e.session_title.focus(),e.state.session.push({id:t.data.result.insertId,title:"",content:"",sort:e.state.session.length,media:[]});var n=e.state.session[e.state.session.length-1].id;e.setState({initialSession:!0,selectedSession:e.state.session.filter((function(e){return e.id===n}))[0].id,session_title:e.state.session.filter((function(e){return e.id===n}))[0].title,content:e.state.session.filter((function(e){return e.id===n}))[0].content,media:e.state.session.filter((function(e){return e.id===n}))[0].media}),e.forceUpdate()}))}))}else f.b.warning("Some field is required, please check your data."),this.setState({isSaving:!1})}},{key:"handleOnDragEnd",value:function(e){var t=this;if(e.destination){var n=Array.from(this.state.session),a=n.splice(e.source.index,1),o=Object(i.a)(a,1)[0];n.splice(e.destination.index,0,o),this.setState({session:n},(function(){t.autoSave(!0)}))}}},{key:"render",value:function(){var e=this,t=this.state;t.session,t.media;return p.a.createElement("div",{className:"pcoded-main-container"},p.a.createElement("div",{className:"pcoded-wrapper"},p.a.createElement("div",{className:"pcoded-content"},p.a.createElement("div",{className:"pcoded-inner-content"},p.a.createElement("div",{className:"main-body"},p.a.createElement("div",{className:"page-wrapper"},p.a.createElement("div",{className:"floating-back"},p.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90,onClick:this.goBack})),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-xl-12"},p.a.createElement("div",null,p.a.createElement("div",{className:"card p-20"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-sm-10 m-b-20"},p.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},this.props.id?"Detail":this.props.match.params.id?"Edit":"Create New"," Questions")),p.a.createElement("div",{className:"col-sm-2 m-b-20"},this.props.disabledForm&&p.a.createElement("button",{onClick:this.props.goEdit,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},p.a.createElement("i",{className:"fa fa-edit"}),"Edit"))),p.a.createElement("div",{className:"form-section"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-sm-12 m-b-20"},p.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Questions Configuration"))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"form-field-top-label",style:{width:400}},p.a.createElement("label",{for:"licenses"},"Licenses Type",p.a.createElement("required",null,"*")),p.a.createElement(v.MultiSelect,{id:"licenses",options:this.state.optionsLicensesType,value:this.state.valueLicensesType,onChange:function(t){return e.setState({valueLicensesType:t})},mode:"single",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Licenses Type"})),p.a.createElement("div",{className:"form-field-top-label",style:{width:400}},p.a.createElement("label",{for:"course"},"Course",p.a.createElement("required",null,"*")),p.a.createElement(v.MultiSelect,{id:"course",options:this.state.optionsCourse,value:this.state.valueCourse,onChange:function(t){return e.setState({valueCourse:t})},mode:"single",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Course"})))),p.a.createElement("div",{className:"form-section no-border"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-sm-12 m-b-20"},p.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Questions & Answers"))),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"form-field-top-label",style:{width:"80%"}},p.a.createElement("label",{for:"name"},"Question",p.a.createElement("required",null,"*")),p.a.createElement("input",{id:"myFile",type:"file",name:"myFile",style:{display:"none"},onChange:""}),"Loading..."!==this.state.question_text?p.a.createElement(g.a,{apiKey:"j18ccoizrbdzpcunfqk7dugx72d7u9kfwls7xlpxg7m21mb5",initialValue:this.state.question_text,value:this.state.question_text,init:{height:400,width:"100%",menubar:!1,convert_urls:!1,image_class_list:[{title:"None",value:""},{title:"Responsive",value:"img-responsive"},{title:"Thumbnail",value:"img-responsive img-thumbnail"}],file_browser_callback_types:"image",file_picker_callback:function(e,t,n){if("image"==n.filetype){var i=document.getElementById("myFile");i.click(),i.onchange=function(){var t=this,n=new FormData;n.append("file",this.files[0]),window.$.ajax({url:"".concat(m.a,"v2/media/upload"),type:"POST",data:n,processData:!1,contentType:!1,success:function(n){e(n.result.url),t.value=""}})}}},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | bold italic backcolor |                                                                                 alignleft aligncenter alignright alignjustify | image |                                                                                     bullist numlist outdent indent | removeformat | help"},onEditorChange:function(t){return e.handleDynamicInput(t)}}):null),p.a.createElement("div",{className:"form-field-top-label exam-option ".concat("A"===this.state.answer&&" answer")},p.a.createElement("label",{for:"optionA"},"Option A"),p.a.createElement("input",{type:"text",name:"optionA",id:"optionA",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionA}),p.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"A")}),p.a.createElement("p",null,"This is the correct answer")),p.a.createElement("div",{className:"form-field-top-label exam-option ".concat("B"===this.state.answer&&" answer")},p.a.createElement("label",{for:"optionB"},"Option B"),p.a.createElement("input",{type:"text",name:"optionB",id:"optionB",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionB}),p.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"B")}),p.a.createElement("p",null,"This is the correct answer")),p.a.createElement("div",{className:"form-field-top-label exam-option ".concat("C"===this.state.answer&&" answer")},p.a.createElement("label",{for:"optionC"},"Option C"),p.a.createElement("input",{type:"text",name:"optionC",id:"optionC",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionC}),p.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"C")}),p.a.createElement("p",null,"This is the correct answer")),p.a.createElement("div",{className:"form-field-top-label exam-option ".concat("D"===this.state.answer&&" answer")},p.a.createElement("label",{for:"optionD"},"Option D"),p.a.createElement("input",{type:"text",name:"optionD",id:"optionD",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionD}),p.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"D")}),p.a.createElement("p",null,"This is the correct answer")),p.a.createElement("div",{className:"form-field-top-label exam-option ".concat("E"===this.state.answer&&" answer")},p.a.createElement("label",{for:"optionE"},"Option E"),p.a.createElement("input",{type:"text",name:"optionE",id:"optionE",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionE}),p.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"E")}),p.a.createElement("p",null,"This is the correct answer")),p.a.createElement("div",{className:"form-field-top-label",style:{width:"80%"}},p.a.createElement("label",{for:"name"},"Explanation"),p.a.createElement("input",{id:"myFile",type:"file",name:"myFile",style:{display:"none"},onChange:""}),"Loading..."!==this.state.explanation?p.a.createElement(g.a,{apiKey:"j18ccoizrbdzpcunfqk7dugx72d7u9kfwls7xlpxg7m21mb5",initialValue:this.state.explanation,value:this.state.explanation,init:{height:240,width:"100%",menubar:!1,convert_urls:!1,image_class_list:[{title:"None",value:""},{title:"Responsive",value:"img-responsive"},{title:"Thumbnail",value:"img-responsive img-thumbnail"}],file_browser_callback_types:"image",file_picker_callback:function(e,t,n){if("image"==n.filetype){var i=document.getElementById("myFile");i.click(),i.onchange=function(){var t=this,n=new FormData;n.append("file",this.files[0]),window.$.ajax({url:"".concat(m.a,"v2/media/upload"),type:"POST",data:n,processData:!1,contentType:!1,success:function(n){e(n.result.url),t.value=""}})}}},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | bold italic backcolor |                                                                                 alignleft aligncenter alignright alignjustify | image |                                                                                     bullist numlist outdent indent | removeformat | help"},onEditorChange:function(t){return e.handleDynamicInput2(t)}}):null))),p.a.createElement("div",{className:"row",style:{justifyContent:"flex-end"}},!this.props.disabledForm&&p.a.createElement("button",{disabled:this.state.isSaving,onClick:this.save,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},p.a.createElement("i",{className:"fa fa-save"}),this.state.isSaving?"Saving...":"Save"))))))))))))}}]),t}(d.Component);t.default=b},324:function(e,t,n){"use strict";var i=n(0),a=n(10),o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},s={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func},r=o({apiKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,outputFormat:a.oneOf(["html","text"]),value:a.string,tagName:a.string,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string,tinymceScriptSrc:a.string,scriptLoading:a.shape({async:a.bool,defer:a.bool,delay:a.number})},s),l=function(e){return"function"===typeof e},c=function(e){return e in s},u=function(e){return e.substr(2)},d=function(e,t,n,i,a){return function(e,t,n,i,a,o,s){var r=Object.keys(a).filter(c),l=Object.keys(o).filter(c),d=r.filter((function(e){return void 0===o[e]})),p=l.filter((function(e){return void 0===a[e]}));d.forEach((function(e){var t=u(e),i=s[t];n(t,i),delete s[t]})),p.forEach((function(n){var a=i(e,n),o=u(n);s[o]=a,t(o,a)}))}(a,e.on.bind(e),e.off.bind(e),(function(t,n){return function(i){var a;return null===(a=t(n))||void 0===a?void 0:a(i,e)}}),t,n,i)},p=0,f=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++p+String(t)},m=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},h=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},g=function(e,t){return h(e).concat(h(t))},v=function(){return{listeners:[],scriptId:f("tiny-script"),scriptLoading:!1,scriptLoaded:!1}},b=function(){var e=v();return{load:function(t,n,i,a,o,s){var r=function(){return function(e,t,n,i,a,o){var s=t.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=e,s.src=n,s.async=i,s.defer=a;s.addEventListener("load",(function e(){s.removeEventListener("load",e),o()})),t.head&&t.head.appendChild(s)}(e.scriptId,t,n,i,a,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0}))};e.scriptLoaded?s():(e.listeners.push(s),e.scriptLoading||(e.scriptLoading=!0,o>0?setTimeout(r,o):r()))},reinitialize:function(){e=v()}}}(),y=n(448),E=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),S=function(){return(S=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},w=function(e){function t(t){var n,a,o,s=e.call(this,t)||this;return s.handleEditorChange=function(e){var t,n=s.editor;if(n&&n.initialized){var i=n.getContent({format:s.props.outputFormat});i!==s.currentContent&&(s.currentContent=i,l(s.props.onEditorChange)&&s.props.onEditorChange(null!==(t=s.currentContent)&&void 0!==t?t:"",n))}},s.initialise=function(){var e=s.elementRef.current;if(e){var t=Object(y.a)();if(!t)throw new Error("tinymce should have been loaded into global scope");var n=S(S({},s.props.init),{selector:void 0,target:e,readonly:s.props.disabled,inline:s.inline,plugins:g(s.props.init&&s.props.init.plugins,s.props.plugins),toolbar:s.props.toolbar||s.props.init&&s.props.init.toolbar,setup:function(t){s.editor=t,s.bindHandlers({}),s.inline&&!m(e)&&t.once("PostRender",(function(e){t.setContent(s.getInitialValue(),{no_events:!0})})),s.props.init&&l(s.props.init.setup)&&s.props.init.setup(t)}});s.inline||(e.style.visibility=""),m(e)&&(e.value=s.getInitialValue()),t.init(n)}},s.id=s.props.id||f("tiny-react"),s.elementRef=i.createRef(),s.inline=null!==(o=null!==(n=s.props.inline)&&void 0!==n?n:null===(a=s.props.init)||void 0===a?void 0:a.inline)&&void 0!==o&&o,s.boundHandlers={},s}return E(t,e),t.prototype.componentDidUpdate=function(e){var t,n=this;if(this.editor&&this.editor.initialized){if(this.bindHandlers(e),this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent({format:this.props.outputFormat}),"string"===typeof this.props.value&&this.props.value!==e.value&&this.props.value!==this.currentContent){var i=this.editor;i.undoManager.transact((function(){return i.setContent(n.props.value)}))}"boolean"===typeof this.props.disabled&&this.props.disabled!==e.disabled&&this.editor.setMode(this.props.disabled?"readonly":"design")}},t.prototype.componentDidMount=function(){var e,t,n,i,a,o;null!==Object(y.a)()?this.initialise():this.elementRef.current&&this.elementRef.current.ownerDocument&&b.load(this.elementRef.current.ownerDocument,this.getScriptSrc(),null!==(t=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async)&&void 0!==t&&t,null!==(i=null===(n=this.props.scriptLoading)||void 0===n?void 0:n.defer)&&void 0!==i&&i,null!==(o=null===(a=this.props.scriptLoading)||void 0===a?void 0:a.delay)&&void 0!==o?o:0,this.initialise)},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off("change keyup setcontent",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return i.createElement(t,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return i.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSrc=function(){if("string"===typeof this.props.tinymceScriptSrc)return this.props.tinymceScriptSrc;var e=this.props.cloudChannel;return"https://cdn.tiny.cloud/1/"+(this.props.apiKey?this.props.apiKey:"no-api-key")+"/tinymce/"+e+"/tinymce.min.js"},t.prototype.getInitialValue=function(){return"string"===typeof this.props.value?this.props.value:"string"===typeof this.props.initialValue?this.props.initialValue:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){d(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},i=n(e),a=n(this.props);!i&&a?this.editor.on("change keyup setcontent",this.handleEditorChange):i&&!a&&this.editor.off("change keyup setcontent",this.handleEditorChange)}},t.propTypes=r,t.defaultProps={cloudChannel:"5"},t}(i.Component);n.d(t,"a",(function(){return w}))},448:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var i=function(){return"undefined"!==typeof window?window:e},a=function(){var e=i();return e&&e.tinymce?e.tinymce:null}}).call(this,n(35))},469:function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,a=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return i}))}}]);
//# sourceMappingURL=78.a8380154.chunk.js.map
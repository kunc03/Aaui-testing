(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[129],{1609:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a.n(l),i=a(10),n=a(1613),o=a(3),c=a(305),r=a(2),m=a(1610),d=a.n(m);class u extends l.Component{constructor(){super(...arguments),this.state={companyId:"",informasiId:"",informasi:[],isModalAdd:!1,judul:"",deskripsi:"",files:"",isModalRemove:!1,isNotifikasi:!1,isiNotifikasi:""},this.onChangeInput=e=>{const t=e.target,a=t.value,l=t.name;"files"===l?t.files[0].size>=0?this.setState({[l]:t.files}):(t.value=null,this.handleCloseModal(),this.setState({isNotifikasi:!0,isiNotifikasi:"The file does not match the format, please check again."})):this.setState({[l]:a})},this.onChangeTinyMce=e=>{this.setState({deskripsi:e.target.getContent().replace(/'/g,"\\'")})},this.closeModal=e=>{this.setState({isModalAdd:!1,informasiId:"",judul:"",deskripsi:"",files:"",isModalRemove:!1,isNotifikasi:!1,isiNotifikasi:""})},this.openModalAdd=e=>{this.setState({isModalAdd:!0})},this.openModalEdit=e=>{let t=e.target.getAttribute("data-id");o.l.get("".concat(o.a,"v1/informasi/").concat(t)).then(e=>{200===e.status&&this.setState({isModalAdd:!0,informasiId:t,company_id:e.data.result[0].company_id,judul:e.data.result[0].informasi_judul,deskripsi:e.data.result[0].informasi_deskripsi})})},this.openModalRemove=e=>{this.setState({isModalRemove:!0,informasiId:e.target.getAttribute("data-id")})},this.onClickSubmitHapus=e=>{e.preventDefault(),o.l.delete("".concat(o.a,"v1/informasi/").concat(e.target.getAttribute("data-id"))).then(e=>{200===e.status&&(this.closeModal(),this.fetchData())})},this.onClickSubmitSave=e=>{if(e.preventDefault(),""==this.state.informasiId){let e={judul:this.state.judul,company:this.state.companyId,deskripsi:this.state.deskripsi};o.l.post("".concat(o.a,"v1/informasi"),e).then(e=>{if(200===e.status){if(console.log("STATE: ",e.data),0!=this.state.files.length){let t=new FormData;for(let e=0;e<this.state.files.length;e++)t.append("files",this.state.files[e]);o.l.put("".concat(o.a,"v1/informasi/file/").concat(e.data.result.informasi_id),t).then(e=>{200===e.status&&(console.log("Saved"),this.fetchData())})}this.fetchData(),this.closeModal()}})}else{let e={judul:this.state.judul,company:this.state.companyId,deskripsi:this.state.deskripsi};o.l.put("".concat(o.a,"v1/informasi/").concat(this.state.informasiId),e).then(e=>{if(200===e.status){if(0!=this.state.files.length){let e=new FormData;for(let t=0;t<this.state.files.length;t++)e.append("files",this.state.files[t]);o.l.put("".concat(o.a,"v1/informasi/file/").concat(this.state.informasiId),e).then(e=>{200===e.status&&(console.log("Saved"),this.fetchData())})}this.fetchData(),this.closeModal()}})}}}componentDidMount(){this.fetchData()}fetchData(){o.l.get("".concat(o.j).concat(r.a.get("user").data.email)).then(e=>{200===e.status&&(this.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):e.data.result.company_id}),o.l.get("".concat(o.a,"v1/informasi/company/").concat(e.data.result.company_id)).then(e=>{200===e.status&&this.setState({informasi:e.data.result})}))})}render(){const e=e=>{let{lists:t}=e,a=t.split(",");return a.length>0?"null"==a[0]?s.a.createElement("div",null,"No File"):s.a.createElement("div",{class:"list-group"},a.map((e,t)=>s.a.createElement("a",{key:e,href:e,target:"_blank",className:"list-group-item list-group-item-action"},"File ",t+1))):s.a.createElement("div",null,"No File")},t=t=>{let{lists:a}=t;return 0===a.length?s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{colSpan:5},"No data available"))):s.a.createElement("tbody",null,a.map((t,a)=>s.a.createElement("tr",{key:t.informasi_id},s.a.createElement("td",null,a+1),s.a.createElement("td",null,t.informasi_judul),s.a.createElement("td",null,s.a.createElement(e,{lists:t.informasi_files})),s.a.createElement("td",null,s.a.createElement(d.a,{format:"DD/MM/YYYY"},t.created_at)),s.a.createElement("td",null,s.a.createElement(i.b,{to:"#",className:"buttonku ml-2",title:"Edit"},s.a.createElement("i",{onClick:this.openModalEdit,"data-id":t.informasi_id,className:"fa fa-edit"})),s.a.createElement(i.b,{to:"#",className:"buttonku ml-2",title:"Hapus"},s.a.createElement("i",{onClick:this.openModalRemove,"data-id":t.informasi_id,className:"fa fa-trash"}))))))};return s.a.createElement("div",{className:"pcoded-main-container"},s.a.createElement("div",{className:"pcoded-wrapper"},s.a.createElement("div",{className:"pcoded-content"},s.a.createElement("div",{className:"pcoded-inner-content"},s.a.createElement("div",{className:"main-body"},s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-12"},s.a.createElement("h3",{className:"f-24 f-w-800"},"Information"),s.a.createElement("div",{style:{overflowX:"auto"}},s.a.createElement("table",{className:"table-curved",style:{width:"100%"}},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-center"},"NO"),s.a.createElement("th",null," Title "),s.a.createElement("th",null,"Files"),s.a.createElement("th",null,"Created At"),s.a.createElement("th",{className:"text-center"},s.a.createElement(i.b,{onClick:this.openModalAdd,className:"btn btn-ideku col-12 f-14",style:{padding:"7px 8px !important"}},s.a.createElement("img",{src:"assets/images/component/person_add.png",className:"button-img",alt:""}),"Add New")))),s.a.createElement(t,{lists:this.state.informasi})))))))))),s.a.createElement(n.a,{show:this.state.isModalAdd,onHide:this.closeModal},s.a.createElement(n.a.Body,null,s.a.createElement(n.a.Title,{style:{marginBottom:"20px"},className:"text-c-purple3 f-w-bold"},"Form Data"),s.a.createElement("form",{className:"form-vertical"},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",onChange:this.onChangeInput,className:"form-control",name:"judul",value:this.state.judul,placeholder:"Title Information"})),s.a.createElement("div",{className:"form-group"},s.a.createElement(c.a,{apiKey:"j18ccoizrbdzpcunfqk7dugx72d7u9kfwls7xlpxg7m21mb5",initialValue:this.state.deskripsi,init:{height:300,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                      alignleft aligncenter alignright alignjustify |                       bullist numlist outdent indent | removeformat | help"},onChange:this.onChangeTinyMce})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Attachments"),s.a.createElement("input",{name:"files",onChange:this.onChangeInput,className:"form-control",type:"file",multiple:!0}),s.a.createElement("span",null,"Bisa lebih dari satu file."))),s.a.createElement("button",{style:{marginTop:"30px"},type:"button",onClick:this.onClickSubmitSave,className:"btn btn-block btn-ideku f-w-bold"},"Save"),s.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.closeModal},"Tidak"))),s.a.createElement(n.a,{show:this.state.isModalRemove,onHide:this.closeModal},s.a.createElement(n.a.Body,null,s.a.createElement(n.a.Title,{className:"text-c-purple3 f-w-bold"},"Delete Information"),s.a.createElement("p",{className:"f-w-bold"}," Are you sure you want to delete this information ?"),s.a.createElement("button",{style:{marginTop:"50px"},type:"button","data-id":this.state.informasiId,onClick:this.onClickSubmitHapus,className:"btn btn-block btn-ideku f-w-bold"},"Delete"),s.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.closeModal},"No"))),s.a.createElement(n.a,{show:this.state.isNotifikasi,onHide:this.closeModal},s.a.createElement(n.a.Body,null,s.a.createElement(n.a.Title,{className:"text-c-purple3 f-w-bold"},"Notification"),s.a.createElement("p",{style:{color:"black",margin:"20px 0px"}},this.state.isiNotifikasi),s.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.closeModal},"Understand"))))}}t.default=u}}]);
//# sourceMappingURL=129.7734781f.chunk.js.map
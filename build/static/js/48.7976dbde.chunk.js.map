{"version":3,"sources":["components/training/membership/form.js"],"names":["FormMembership","props","save","e","preventDefault","setState","isSaving","state","image","formData","FormData","append","API","put","API_SERVER","match","params","id","then","res2","data","error","toast","warning","success","handleChange","target","name","value","files","length","size","imagePreview","URL","createObjectURL","companyId","logo","address","phone","fax","website","email","license_number","expired","disabledForm","goBack","bind","this","history","get","res","result","moment","tz","guess","format","photo","USER_ME","Storage","status","localStorage","getItem","company_id","getUserData","getCompany","className","src","alt","width","onClick","style","color","goEdit","padding","marginRight","fontSize","for","cursor","borderRadius","overflow","href","height","display","type","accept","onChange","disabled","placeholder","rows","cols","justifyContent","Component"],"mappings":"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","file":"static/js/48.7976dbde.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport API, { API_SERVER, USER_ME } from '../../../repository/api';\r\nimport Storage from '../../../repository/storage';\r\nimport moment from 'moment-timezone';\r\n\r\nclass FormMembership extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        companyId:'',\r\n        image:'',\r\n        logo:'',\r\n        imagePreview:'assets/images/no-image.png',\r\n        name: '',\r\n        address: '',\r\n        phone: '',\r\n        fax: '',\r\n        website: '',\r\n        email: '',\r\n        license_number: '',\r\n        expired: '',\r\n        isSaving: false,\r\n        disabledForm: this.props.disabledForm && this.props.id\r\n    };\r\n    this.goBack = this.goBack.bind(this);\r\n  }\r\n  \r\n  goBack() {\r\n    if (this.props.goBack){\r\n        this.props.goBack();\r\n    }\r\n    else{\r\n        this.props.history.goBack();\r\n    }\r\n  }\r\n\r\n  save = (e) =>{\r\n    e.preventDefault();\r\n    this.setState({isSaving: true})\r\n    if (this.state.image){\r\n        let formData = new FormData();\r\n        formData.append(\"photo\", this.state.image)\r\n        API.put(`${API_SERVER}v2/training/membership/photo/${this.props.match.params.id}`, formData).then(res2 => {\r\n            if (res2.data.error){\r\n                toast.warning('Fail to upload image')\r\n                this.setState({isSaving: false})\r\n            }\r\n            else{\r\n                toast.success('Membership edited')\r\n                this.setState({isSaving: false})\r\n            }\r\n        })\r\n    }\r\n    else{\r\n        toast.success('Membership edited')\r\n        this.setState({isSaving: false})\r\n    }\r\n}\r\n\r\n  handleChange = e => {\r\n      let {name, value} = e.target;\r\n      if (name==='image'){\r\n        if (e.target.files.length){\r\n            if (e.target.files[0].size <= 5000000) {\r\n                let image = {\r\n                    image: e.target.files[0],\r\n                    imagePreview: URL.createObjectURL(e.target.files[0])\r\n                }\r\n                this.setState(image)\r\n            } else {\r\n              e.target.value = null;\r\n              toast.warning('Image size cannot larger than 5MB and must be an image file')\r\n            }\r\n        }\r\n      }\r\n      else{\r\n          this.setState({[name]: value})\r\n      }\r\n  }\r\n  getCompany(id){\r\n    API.get(`${API_SERVER}v2/training/membership/read/${id}`).then(res => {\r\n        if (res.data.error){\r\n            toast.error('Error read membership')\r\n        }\r\n        else{\r\n            this.setState({\r\n                name: res.data.result.name,\r\n                address: res.data.result.address,\r\n                phone: res.data.result.phone,\r\n                email: res.data.result.email,\r\n                license_number: res.data.result.license_number,\r\n                expired: moment.tz(res.data.result.expired, moment.tz.guess(true)).format(\"DD-MM-YYYY\"),\r\n                imagePreview: res.data.result.photo ? res.data.result.photo : this.state.imagePreview\r\n            })\r\n        }\r\n    })\r\n  }\r\n  getUserData(){\r\n    API.get(`${USER_ME}${Storage.get('user').data.email}`).then(res => {\r\n        if (res.status === 200) {\r\n          this.setState({ companyId: localStorage.getItem('companyID') ? localStorage.getItem('companyID') : res.data.result.company_id });\r\n        }\r\n    })\r\n  }\r\n  componentDidMount(){\r\n    this.getUserData();\r\n    if (this.props.disabledForm && this.props.id){\r\n        this.getCompany(this.props.id);\r\n    }\r\n    else if (this.props.match.params.id){\r\n        this.getCompany(this.props.match.params.id);\r\n    }\r\n  }\r\n  render() {\r\n    return(\r\n        <div className=\"pcoded-main-container\">\r\n            <div className=\"pcoded-wrapper\">\r\n                <div className=\"pcoded-content\">\r\n                    <div className=\"pcoded-inner-content\">\r\n                        <div className=\"main-body\">\r\n                            <div className=\"page-wrapper\">\r\n                                <div className=\"floating-back\">\r\n                                    <img\r\n                                    src={`newasset/back-button.svg`}\r\n                                    alt=\"\"\r\n                                    width={90}\r\n                                    onClick={this.goBack}\r\n                                    ></img>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-xl-12\">\r\n                                        <div>\r\n                                            <div className=\"card p-20\">\r\n                                                <div className=\"row\">\r\n                                                    <div className=\"col-sm-10 m-b-20\">\r\n                                                        <strong className=\"f-w-bold f-18\" style={{color:'#000'}}>{this.props.id ? 'Detail' : this.props.match.params.id ? 'Edit' : 'Create New'} Membership</strong>\r\n                                                    </div>\r\n                                                    <div className=\"col-sm-2 m-b-20\">\r\n                                                        {\r\n                                                        this.props.disabledForm &&\r\n                                                        <button\r\n                                                        onClick={this.props.goEdit}\r\n                                                        className=\"btn btn-icademy-primary float-right\"\r\n                                                        style={{ padding: \"7px 8px !important\", marginRight: 30 }}>\r\n                                                            <i className=\"fa fa-edit\"></i>\r\n                                                            Edit\r\n                                                        </button>\r\n                                                        }\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"form-section\">\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"col-sm-12 m-b-20\">\r\n                                                            <strong className=\"f-w-bold\" style={{color:'#000', fontSize:'15px'}}>Membership Information</strong>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"image\">Member's Photo</label>\r\n                                                            <center>\r\n                                                                <label style={{cursor:'pointer', borderRadius:'10px', overflow:'hidden'}}>\r\n                                                                    <a href={this.state.imagePreview} target=\"_blank\">\r\n                                                                        <img src={this.state.imagePreview} height=\"54.8px\" />\r\n                                                                    </a>\r\n                                                                </label>\r\n                                                                <label for='image' style={{cursor:'pointer', overflow:'hidden', display: this.state.disabledForm ? 'none' : 'block'}}>\r\n                                                                    <div className=\"button-bordered-grey\">\r\n                                                                        {this.state.image ? this.state.image.name : 'Choose file'}\r\n                                                                    </div>\r\n                                                                </label>\r\n                                                            </center>\r\n                                                            <input type=\"file\" accept=\"image/*\" name=\"image\" id=\"image\" onChange={this.handleChange} disabled={this.state.disabledForm}/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"name\">Name<required>*</required></label>\r\n                                                            <input type=\"text\" name=\"name\" size=\"50\" id=\"name\" placeholder=\"PT XXX XXX\" value={this.state.name} onChange={this.handleChange} disabled/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"license_number\">License Number<required>*</required></label>\r\n                                                            <input type=\"text\" name=\"license_number\" size=\"50\" id=\"license_number\" placeholder=\"\" value={this.state.license_number} onChange={this.handleChange} disabled/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"expired\">Expiration Date<required>*</required></label>\r\n                                                            <input type=\"text\" name=\"expired\" size=\"50\" id=\"expired\" placeholder=\"2021-02-02\" value={this.state.expired} onChange={this.handleChange} disabled/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"form-section\">\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"col-sm-12 m-b-20\">\r\n                                                            <strong className=\"f-w-bold\" style={{color:'#000', fontSize:'15px'}}>Address</strong>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"address\">Address<required>*</required></label>\r\n                                                            <textarea name=\"address\" rows=\"3\" cols=\"60\" id=\"address\" placeholder=\"Jl.Pahlawan Seribu, BSD City, Tangerang, 15322\" value={this.state.address} onChange={this.handleChange} disabled></textarea>\r\n                                                        </div>\r\n                                                        {/* <div className=\"form-field-top-label\">\r\n                                                            <label for=\"street\">Street<required>*</required></label>\r\n                                                            <input type=\"text\" name=\"street\" id=\"street\" placeholder=\"Jl. Pahlawan Seribu\"/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"province\">Province<required>*</required></label>\r\n                                                            <input type=\"text\" name=\"province\" id=\"province\" placeholder=\"Banten\"/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"city\">City<required>*</required></label>\r\n                                                            <input type=\"text\" name=\"city\" id=\"city\" placeholder=\"Tangerang\"/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"district\">District</label>\r\n                                                            <input type=\"text\" name=\"district\" id=\"district\" placeholder=\"Serpong\"/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"subdistrict\">Sub-district</label>\r\n                                                            <input type=\"text\" name=\"subdistrict\" id=\"subdistrict\" placeholder=\"Lengkong Gudang\"/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"postal\">Postal Code</label>\r\n                                                            <input type=\"text\" name=\"postal\" id=\"postal\" placeholder=\"15327\"/>\r\n                                                        </div> */}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"form-section no-border\">\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"col-sm-12 m-b-20\">\r\n                                                            <strong className=\"f-w-bold\" style={{color:'#000', fontSize:'15px'}}>Contact</strong>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"phone\">Phone Number<required>*</required></label>\r\n                                                            <input type=\"number\" name=\"phone\" id=\"phone\" placeholder=\"021231231\" value={this.state.phone} onChange={this.handleChange} disabled/>\r\n                                                        </div>\r\n                                                        <div className=\"form-field-top-label\">\r\n                                                            <label for=\"email\">Email<required>*</required></label>\r\n                                                            <input type=\"text\" size=\"50\" name=\"email\" id=\"email\" placeholder=\"email@host.com\" value={this.state.email} onChange={this.handleChange} disabled/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"row\" style={{justifyContent:'flex-end'}}>\r\n                                                    {\r\n                                                    !this.props.disabledForm &&\r\n                                                    <button\r\n                                                    disabled={this.state.isSaving}\r\n                                                    onClick={this.save}\r\n                                                    className=\"btn btn-icademy-primary float-right\"\r\n                                                    style={{ padding: \"7px 8px !important\", marginRight: 30 }}>\r\n                                                        <i className=\"fa fa-save\"></i>\r\n                                                        {this.state.isSaving ? 'Saving...' : 'Save'}\r\n                                                    </button>\r\n                                                    }\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FormMembership;\r\n"],"sourceRoot":""}
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[127,143],{224:function(e,a,t){"use strict";function l(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(a,"a",(function(){return l}))},973:function(e,a,t){"use strict";t.r(a);var l=t(224),n=t(6),r=t(11),c=t(13),s=t(12),i=t(14),u=t(0),m=t.n(u),o=t(15),d=t(3),h=t(2),p=t(1615),E=t(24),j=function(e){function a(){var e,t;Object(n.a)(this,a);for(var l=arguments.length,r=new Array(l),i=0;i<l;i++)r[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(r)))).state={mataPelajaran:[],isModalBuka:!1,isModalSilabus:!1,jadwalPelajaran:[],pelajaranId:"",dataSilabus:[],jadwalKu:[],tahunAjaran:"",listTahunAjaran:[]},t.selectPelajaran=function(e){e.preventDefault();var a=e.target.value;t.setState({isModalSilabus:!0,pelajaranId:a}),t.fetchSilabus(a)},t.selectTahunAjaran=function(e){var a=e.target.value;t.setState({tahunAjaran:a}),t.fetchJadwal(a),t.fetchJadwalKu(a)},t}return Object(i.a)(a,e),Object(r.a)(a,[{key:"fetchJadwalKu",value:function(e){var a=this;d.l.get("".concat(d.a,"v2/jadwal-mengajar/guru/").concat(h.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then((function(e){e.data.error&&console.log("Error: fetch pelajaran");var t=e.data.result,n=Object(l.a)(new Map(t.map((function(e){return[e.pelajaran_id,e]}))).values());a.setState({mataPelajaran:t,jadwalPelajaran:n,jadwalKu:e.data.result})}))}},{key:"fetchJadwal",value:function(e){var a=this;d.l.get("".concat(d.a,"v2/jadwal-mengajar/guru/").concat(h.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then((function(e){e.data.error&&E.b.warning("Error: fetch jadwal"),a.setState({jadwalPelajaran:e.data.result})}))}},{key:"fetchSilabus",value:function(e){var a=this;d.l.get("".concat(d.a,"v2/silabus/pelajaran/").concat(e)).then((function(e){e.data.error&&console.log("Error: fetch overview"),a.setState({dataSilabus:e.data.result})}))}},{key:"componentDidMount",value:function(){for(var e=new Date,a=e.getMonth()<6?e.getFullYear()-1+"/"+e.getFullYear():e.getFullYear()+"/"+(e.getFullYear()+1),t=[],l=0;l<6;l++)t.push("".concat(e.getFullYear()-l,"/").concat(e.getFullYear()-l+1));this.setState({tahunAjaran:a,listTahunAjaran:t}),this.fetchJadwal(a),this.fetchJadwalKu(a)}},{key:"clearForm",value:function(){this.setState({isModalSilabus:!1,isModalBuka:!1,pelajaranId:"",dataSilabus:[]})}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"pcoded-main-container"},m.a.createElement("div",{className:"pcoded-wrapper"},m.a.createElement("div",{className:"pcoded-content"},m.a.createElement("div",{className:"pcoded-inner-content"},m.a.createElement("div",{className:"main-body"},m.a.createElement("div",{className:"page-wrapper"},m.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3"},"Semua Kelas"),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-12"},m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card-body",style:{padding:"12px"}},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",null,"Tahun Ajaran"),m.a.createElement("select",{onChange:this.selectTahunAjaran,value:this.state.tahunAjaran,className:"form-control",required:!0},m.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listTahunAjaran.map((function(e){return m.a.createElement("option",{value:e},e)})))),m.a.createElement("table",{className:"table table-bordered"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"text-center"},"Class"),m.a.createElement("th",{className:"text-center"},"Room"),m.a.createElement("th",{className:"text-center"},"Subject"),m.a.createElement("th",{className:"text-center"},"Time"),m.a.createElement("th",{className:"text-center"},"Action"))),m.a.createElement("tbody",null,this.state.mataPelajaran.map((function(e,a){return m.a.createElement("tr",null,m.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.kelas_nama),m.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_ruangan),m.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_pelajaran),m.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.jam_mulai,"-",e.jam_selesai),m.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},m.a.createElement(o.b,{to:"/guru/murid/".concat(e.jadwal_id),className:"btn btn-v2 btn-primary"},m.a.createElement("i",{className:"fa fa-paper-plane"})," Open")))}))))))),m.a.createElement(p.a,{show:this.state.isModalBuka,onHide:function(){return e.clearForm()}},m.a.createElement(p.a.Body,null,m.a.createElement("h4",null,"Perhatian"),m.a.createElement("p",null,"Apakah Kamu yakin mau masuk pelajaran ... ?"),m.a.createElement(o.b,{to:"/",className:"btn btn-v2 btn-primary"},"Yakin"))),m.a.createElement(p.a,{show:this.state.isModalSilabus,onHide:function(){return e.clearForm()},dialogClassName:"modal-xlg"},m.a.createElement(p.a.Header,{closeButton:!0},m.a.createElement("form",{className:"form-inline"},m.a.createElement("label",null,"Subject"),m.a.createElement("select",{onChange:this.selectPelajaran,className:"form-control ml-2"},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"Choose subject"),this.state.jadwalPelajaran.map((function(e,a){return m.a.createElement("option",{key:a,value:e.pelajaran_id},e.nama_pelajaran)}))))),m.a.createElement(p.a.Body,null,m.a.createElement("table",{className:"table table-striped"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"Session"),m.a.createElement("th",null,"Topic"),m.a.createElement("th",null,"Goal"),m.a.createElement("th",null,"Description"),m.a.createElement("th",null,"Files"))),m.a.createElement("tbody",null,this.state.dataSilabus.map((function(e,a){return 0===e.jenis?m.a.createElement("tr",{key:a},m.a.createElement("td",null,e.sesi),m.a.createElement("td",null,e.topik),m.a.createElement("td",null,e.tujuan),m.a.createElement("td",null,e.deskripsi),m.a.createElement("td",{style:{padding:"12px"}},e.files?m.a.createElement("a",{href:e.files,target:"_blank",className:"silabus"},"Open"):"No files")):m.a.createElement("tr",{key:a},m.a.createElement("td",null,e.sesi),m.a.createElement("td",{colSpan:"4",className:"text-center"},1==e.jenis?"Kuis":"Ujian"))})))))))))))))}}]),a}(m.a.Component);a.default=j}}]);
//# sourceMappingURL=127.b44615ad.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[48],{1157:function(e,a,t){"use strict";t.r(a);var s=t(21),l=t(6),i=t(11),n=t(13),r=t(12),m=t(31),c=t(14),o=t(0),d=t.n(o),p=t(24),h=t(3),g=t(2),b=t(25),u=t.n(b),v=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(n.a)(this,Object(r.a)(a).call(this,e))).save=function(e){if(e.preventDefault(),t.setState({isSaving:!0}),t.state.image){var a=new FormData;a.append("photo",t.state.image),h.l.put("".concat(h.a,"v2/training/membership/photo/").concat(t.props.match.params.id),a).then((function(e){e.data.error?(p.b.warning("Fail to upload image"),t.setState({isSaving:!1})):(p.b.success("Membership edited"),t.setState({isSaving:!1}))}))}else p.b.success("Membership edited"),t.setState({isSaving:!1})},t.handleChange=function(e){var a=e.target,l=a.name,i=a.value;if("image"===l){if(e.target.files.length)if(e.target.files[0].size<=5e6){var n={image:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])};t.setState(n)}else e.target.value=null,p.b.warning("Image size cannot larger than 5MB and must be an image file")}else t.setState(Object(s.a)({},l,i))},t.state={companyId:"",image:"",logo:"",imagePreview:"assets/images/no-image.png",name:"",address:"",phone:"",fax:"",website:"",email:"",license_number:"",expired:"",isSaving:!1,disabledForm:t.props.disabledForm&&t.props.id},t.goBack=t.goBack.bind(Object(m.a)(t)),t}return Object(c.a)(a,e),Object(i.a)(a,[{key:"goBack",value:function(){this.props.goBack?this.props.goBack():this.props.history.goBack()}},{key:"getCompany",value:function(e){var a=this;h.l.get("".concat(h.a,"v2/training/membership/read/").concat(e)).then((function(e){e.data.error?p.b.error("Error read membership"):a.setState({name:e.data.result.name,address:e.data.result.address,phone:e.data.result.phone,email:e.data.result.email,license_number:e.data.result.license_number,expired:u.a.tz(e.data.result.expired,u.a.tz.guess(!0)).format("DD-MM-YYYY"),imagePreview:e.data.result.photo?e.data.result.photo:a.state.imagePreview})}))}},{key:"getUserData",value:function(){var e=this;h.l.get("".concat(h.j).concat(g.a.get("user").data.email)).then((function(a){200===a.status&&e.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):a.data.result.company_id})}))}},{key:"componentDidMount",value:function(){this.getUserData(),this.props.disabledForm&&this.props.id?this.getCompany(this.props.id):this.props.match.params.id&&this.getCompany(this.props.match.params.id)}},{key:"render",value:function(){return d.a.createElement("div",{className:"pcoded-main-container"},d.a.createElement("div",{className:"pcoded-wrapper"},d.a.createElement("div",{className:"pcoded-content"},d.a.createElement("div",{className:"pcoded-inner-content"},d.a.createElement("div",{className:"main-body"},d.a.createElement("div",{className:"page-wrapper"},d.a.createElement("div",{className:"floating-back"},d.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90,onClick:this.goBack})),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-xl-12"},d.a.createElement("div",null,d.a.createElement("div",{className:"card p-20"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-10 m-b-20"},d.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},this.props.id?"Detail":this.props.match.params.id?"Edit":"Create New"," Membership")),d.a.createElement("div",{className:"col-sm-2 m-b-20"},this.props.disabledForm&&d.a.createElement("button",{onClick:this.props.goEdit,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},d.a.createElement("i",{className:"fa fa-edit"}),"Edit"))),d.a.createElement("div",{className:"form-section"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-12 m-b-20"},d.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Membership Information"))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"image"},"Member's Photo"),d.a.createElement("center",null,d.a.createElement("label",{style:{cursor:"pointer",borderRadius:"10px",overflow:"hidden"}},d.a.createElement("a",{href:this.state.imagePreview,target:"_blank"},d.a.createElement("img",{src:this.state.imagePreview,height:"54.8px"}))),d.a.createElement("label",{for:"image",style:{cursor:"pointer",overflow:"hidden",display:this.state.disabledForm?"none":"block"}},d.a.createElement("div",{className:"button-bordered-grey"},this.state.image?this.state.image.name:"Choose file"))),d.a.createElement("input",{type:"file",accept:"image/*",name:"image",id:"image",onChange:this.handleChange,disabled:this.state.disabledForm})),d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"name"},"Name",d.a.createElement("required",null,"*")),d.a.createElement("input",{type:"text",name:"name",size:"50",id:"name",placeholder:"PT XXX XXX",value:this.state.name,onChange:this.handleChange,disabled:!0})),d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"license_number"},"License Number",d.a.createElement("required",null,"*")),d.a.createElement("input",{type:"text",name:"license_number",size:"50",id:"license_number",placeholder:"",value:this.state.license_number,onChange:this.handleChange,disabled:!0})),d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"expired"},"Expiration Date",d.a.createElement("required",null,"*")),d.a.createElement("input",{type:"text",name:"expired",size:"50",id:"expired",placeholder:"2021-02-02",value:this.state.expired,onChange:this.handleChange,disabled:!0})))),d.a.createElement("div",{className:"form-section"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-12 m-b-20"},d.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Address"))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"address"},"Address",d.a.createElement("required",null,"*")),d.a.createElement("textarea",{name:"address",rows:"3",cols:"60",id:"address",placeholder:"Jl.Pahlawan Seribu, BSD City, Tangerang, 15322",value:this.state.address,onChange:this.handleChange,disabled:!0})))),d.a.createElement("div",{className:"form-section no-border"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-12 m-b-20"},d.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Contact"))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"phone"},"Phone Number",d.a.createElement("required",null,"*")),d.a.createElement("input",{type:"number",name:"phone",id:"phone",placeholder:"021231231",value:this.state.phone,onChange:this.handleChange,disabled:!0})),d.a.createElement("div",{className:"form-field-top-label"},d.a.createElement("label",{for:"email"},"Email",d.a.createElement("required",null,"*")),d.a.createElement("input",{type:"text",size:"50",name:"email",id:"email",placeholder:"email@host.com",value:this.state.email,onChange:this.handleChange,disabled:!0})))),d.a.createElement("div",{className:"row",style:{justifyContent:"flex-end"}},!this.props.disabledForm&&d.a.createElement("button",{disabled:this.state.isSaving,onClick:this.save,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},d.a.createElement("i",{className:"fa fa-save"}),this.state.isSaving?"Saving...":"Save"))))))))))))}}]),a}(o.Component);a.default=v}}]);
//# sourceMappingURL=48.7976dbde.chunk.js.map
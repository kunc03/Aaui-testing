(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[42],{1354:function(e,a,t){"use strict";t.r(a);var l=t(0),s=t.n(l),r=t(3),n=t(18),i=t(32),o=t.n(i),m=(t(458),t(19)),c=t.n(m);class d extends l.Component{constructor(e){super(e),this.dataTemplate={titleForm:"Form Registration Form",input:[{id:0,name:"Name",type:"text",mandatory:!0},{id:2,name:"Email",type:"email",mandatory:!0},{id:3,name:"Born_Date",type:"date",mandatory:!0},{id:4,name:"Gender",type:"select",mandatory:!0,option:[{id:0,labelString:"Male",labelName:"Male"},{id:1,labelString:"Female",labelName:"Female"}]}]},this.stateProps={},this.default={load:!0,template:this.dataTemplate,media:[],input:{},id:this.props.match.params.id,idForm:"1",titleForm:"Form Registration",nameCompany:"",...this.stateProps,isSubmit:!1,submitText:"Submit",enableRegist:!1,loading:!1,period:null,isPaidRegister:!1,isRegistrationClosed:!1},this.state=this.default,this.deleteMedia=(e,a,t)=>{r.l.delete("".concat(r.a,"v2/training/registration-user/media/").concat(a.id)).then(a=>{if(a.data.error)n.b.warning("Fail to delete media");else{let a=[...this.state[e]];a.splice(t,1),this.setState({[e]:a})}});let l=[...this.state[e]];l.splice(t,1),this.setState({[e]:l})},this.handleChange=e=>{const a=e.target.name;if(e.target.files.length)if(e.target.files[0].size<=5e8){this.setState({isUploading:!0});let l=this.state[a];l.isUploading=!0,this.setState({[a]:l});let s=new FormData;s.append("media",e.target.files[0]);var t={onUploadProgress:e=>{let t=this.state[a];t.progressUploadMedia=Math.round(100*e.loaded/e.total),this.setState({[a]:t})},headers:{}};o.a.post("".concat(r.a,"v2/training/registration-user/media"),s,t).then(e=>{if(e.data.error){n.b.warning(e.data.result);let t=this.state[a];t.progressUploadMedia=0,t.isUploading=!1,this.setState({[a]:t})}else{this.state[a].push({id:e.data.result.id,name:e.data.result.name,url:e.data.result.url});let t=this.state[a];t.progressUploadMedia=0,t.isUploading=!1,this.setState({[a]:t})}})}else e.target.value=null,n.b.warning("File size cannot larger than 500MB")},this.checkTypeInput=(e,a,t)=>{let l=e.type.toLowerCase();const r=e.name;if(["text","date","email","number"].indexOf(l)>-1)return s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"form-label",for:e.name},e.name,s.a.createElement("required",null,e.mandatory?"*":"")),s.a.createElement("input",{type:l,name:a,id:t,className:"form-control form-control-lg",value:this.state[r],style:{position:"relative",width:"100%",opacity:1},onChange:e=>this.onChange(e,r)}),e.subname&&s.a.createElement("small",{className:"form-text",style:{color:"#333"},for:e.subname},s.a.createElement("i",null,e.subname)));if("checkbox"===l)return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",for:e.name},e.name,s.a.createElement("required",null,e.mandatory?"*":""))),e.option.map((r,n)=>s.a.createElement("div",{className:"form-group row"},s.a.createElement("div",{className:"col-sm-1"},s.a.createElement("input",{type:l,name:a,id:t,className:"form-control",value:r.labelName,checked:r.check,style:{position:"relative",width:"100%",opacity:1,marginTop:"-2px",minHeight:20},onChange:a=>this.checkboxChange(a,r,e,n)})),s.a.createElement("div",{className:"col-sm"},s.a.createElement("label",{className:"form-check-label",style:{color:"#333",marginLeft:-30,fontSize:14},for:r.labelString},r.labelName)))),e.subname&&s.a.createElement("small",{className:"form-text",style:{color:"#333"},for:e.subname},s.a.createElement("i",null,e.subname)));if("select"===l)return s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"form-label",for:e.name},e.name,s.a.createElement("required",null,e.mandatory?"*":"")),s.a.createElement("select",{name:a,id:t,onChange:e=>this.onChange(e,r),className:"form-control form-control-lg"},s.a.createElement("option",{value:"0"},"Select ",e.name),e.option.map(e=>s.a.createElement("option",{value:e.labelString,selected:a===e.labelName},e.labelName))),e.subname&&s.a.createElement("small",{className:"form-text",style:{color:"#333"},for:e.subname},s.a.createElement("i",null,e.subname)));if("textarea"===l){return s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"form-label",for:e.name},e.name,s.a.createElement("required",null,e.mandatory?"*":"")),s.a.createElement("textarea",{name:t,rows:"3",id:t,className:"form-control form-control-lg",value:this.state[r],onChange:e=>this.onChange(e,r)}),e.subname&&s.a.createElement("small",{className:"form-text",style:{color:"#333"},for:e.subname},s.a.createElement("i",null,e.subname)))}return"file"===l?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-label"},s.a.createElement("label",{for:"media",className:"form-label"},e.name,s.a.createElement("required",null,e.mandatory?"*":""))),s.a.createElement("div",{className:"form-field-top-label",style:{marginLeft:-10}},s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{for:r,className:"form-control"},s.a.createElement("div",{className:"loading-button",style:{width:this.state[r].progressUploadMedia?this.state[r].progressUploadMedia:"0%"}}),this.state[r].progressUploadMedia?null:s.a.createElement("i",{className:"fa fa-plus"}),"\xa0",this.state[r].progressUploadMedia?100===this.state[r].progressUploadMedia?"Uploaded. Processing file...":"Uploading... ".concat(this.state[r].progressUploadMedia,"%"):"Add media"),s.a.createElement("input",{type:l,id:r,name:r,className:"form-control file-upload-icademy",onChange:this.handleChange,onClick:e=>e.target.value=null}),s.a.createElement("div",{className:"training-session-media"},this.state[e.name].length?this.state[e.name].map((a,t)=>{let l="fa-paperclip";switch(a.type){case"PDF":l="fa-file-pdf";break;case"Word":l="fa-file-word";break;case"Excel":l="fa-file-excel";break;case"PowerPoint":l="fa-file-powerpoint";break;case"Image":l="fa-image";break;case"Video":l="fa-file-video";break;case"Audio":l="fa-file-audio";break;default:l="fa-paperclip"}return s.a.createElement("div",{className:"training-session-media-list"},s.a.createElement("a",{href:a.url,target:"_blank",style:{color:"#000"},rel:"noopener noreferrer"},s.a.createElement("i",{className:"fa ".concat(l)}),"\xa0",a.name),s.a.createElement("i",{className:"fa fa-times",onClick:this.deleteMedia.bind(this,e.name,a,t)}))}):null))),e.subname&&s.a.createElement("div",{className:"form-field-top-label",style:{marginLeft:-10}},s.a.createElement("small",{className:"form-text",style:{color:"#333"},for:e.subname},s.a.createElement("i",null,e.subname)))):"attachments"===l?s.a.createElement("div",{className:"form-field-top-label"},s.a.createElement("label",{for:"media"},e.name),s.a.createElement("div",{className:"training-session-media"},this.state[e.name].length?this.state[e.name].map((e,a)=>{let t="fa-paperclip";switch(e.type){case"PDF":t="fa-file-pdf";break;case"Word":t="fa-file-word";break;case"Excel":t="fa-file-excel";break;case"PowerPoint":t="fa-file-powerpoint";break;case"Image":t="fa-image";break;case"Video":t="fa-file-video";break;case"Audio":t="fa-file-audio";break;default:t="fa-paperclip"}return s.a.createElement("div",{className:"training-session-media-list"},s.a.createElement("a",{href:e.url,target:"_blank",style:{color:"#000"},rel:"noopener noreferrer"},s.a.createElement("i",{className:"fa ".concat(t)}),"\xa0",e.name))}):null)):void 0},this.prepareDataTemplate=()=>{let e={},a=this.state.template;a.input.forEach((t,l)=>{let s=t.name.replace(/\s/g,"");e[s]=null,a.input[l].stateString=s}),this.setState({input:e,template:a})},this.checkboxChange=(e,a,t,l)=>{let s=t.option[l];s.check=!s.check;const r=t.option;this.setState({[t.name]:r})},this.onChange=(e,a)=>{let t={[a]:e.target.value};this.setState(t)},this.submitForm=e=>{let a={},t=!0;const l=this.state.template.input;for(let s=0;s<l.length;s++){if(!(!l[s].mandatory||this.state[l[s].name]&&this.state[l[s].name].length)){t=!1;break}a[l[s].name.toLowerCase()]=this.state[l[s].name]}if(t){const e={idTrainingCompany:this.state.id,idForm:this.state.idForm,data:JSON.stringify(a)};this.setState({isSubmit:!0}),r.l.post("".concat(r.a,"v2/training/user-registration-form"),e).then(e=>{e.data.error?(n.b.error("Error submit form : ".concat(e.data.result)),this.setState({isSubmit:!1})):(n.b.success("Successfully submit data, you will receive account information in your email when admin has activated your account."),this.getRegistrationForm(this.props.match.params.id),this.setState({loading:!1,isSubmit:!1,enableRegist:!0}),this.state.isPaidRegister&&"production"!==r.g&&(window.location.href="https://buy.stripe.com/test_3cs6pw1IraMT2wocMM"))})}else n.b.warning("Please fill the required field")}}initialForm(e){e.map(e=>{"file"===e.type?this.setState({[e.name]:[]}):"attachments"==e.type?e.option?this.setState({[e.name]:e.option}):this.setState({[e.name]:[]}):"checkbox"===e.type?this.setState({[e.name]:e.option.map(e=>({...e,check:!1}))}):this.setState({[e.name]:""})})}getRegistrationForm(e){r.l.get("".concat(r.a,"v2/training/setup-registration-form/").concat(e,"?mode=public")).then(e=>{if(e.data.error)n.b.error("Error read form");else{let a=this.state.template,t=this.state.media;e.data.result.length&&(a={input:e.data.result[0].json_data?JSON.parse(e.data.result[0].json_data):[],titleForm:e.data.result[0].title||"",subtitle:e.data.result[0].subtitle||""},t=e.data.result[0].media?JSON.parse(e.data.result[0].media):[],this.setState({isRegistrationClosed:e.data.result[0].isRegistrationClosed,idForm:e.data.result[0].id,period:e.data.result[0].close_registration?c()(e.data.result[0].close_registration).format("YYYY-MM-DD"):null,isPaidRegister:"1"==e.data.result[0].is_paid})),this.initialForm(a.input),this.setState({template:a,media:t},()=>{this.forceUpdate()})}})}getCompany(e){r.l.get("".concat(r.a,"v2/training/company/read-public/").concat(e)).then(e=>{if(e.data.error)n.b.error("Error read company");else{let a=1==e.data.result.enable_registration;this.setState({load:a,enableRegist:a,loading:!1,nameCompany:e.data.result.name})}})}componentDidMount(){this.getRegistrationForm(this.props.match.params.id),setTimeout(()=>{this.prepareDataTemplate(),this.getCompany(this.props.match.params.id)},1e3)}goBack(){}backtoHome(){window.location.replace("/")}render(){const e=this.state.template;return s.a.createElement("section",{className:"h-100 bg-white"},this.state.isRegistrationClosed?s.a.createElement("div",{className:"container",style:{justifyContent:"center",cursor:"default",textAlign:"center"}},s.a.createElement("h4",null,"Registration Already Closed... Please Contact Administrator.")," ",s.a.createElement("br",null),s.a.createElement("h5",{style:{cursor:"pointer"},onClick:()=>this.backtoHome()},s.a.createElement("u",null,"Back to Homepage"))):this.state.enableRegist&&!this.state.loading?s.a.createElement("div",{className:"container",style:{display:"flex",justifyContent:"center",cursor:"default"}},s.a.createElement("div",{className:"row d-flex justify-content-center align-items-center h-100",style:{width:"100%"}},s.a.createElement("div",{className:"col",style:{marginTop:"10px"}},s.a.createElement("div",{className:"card card-registration my-4"},s.a.createElement("div",{className:"row g-0"},s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"p-md-3 text-black"},s.a.createElement("div",{className:"mb-5 form-group"},s.a.createElement("center",null,s.a.createElement("h3",{className:"text-uppercase"},this.state.template.titleForm)),s.a.createElement("div",{className:"form-field-top-label",style:{marginLeft:-10}},this.state.template.subtitle&&s.a.createElement(s.a.Fragment,null,s.a.createElement("small",{className:"form-text",style:{color:"#333",marginLeft:15},for:"subtitle"},s.a.createElement("i",null,this.state.template.subtitle)),s.a.createElement("br",null)))),s.a.createElement("div",{className:"row",style:{display:"contents"}},s.a.createElement("div",{className:"col",style:{float:"left"}},s.a.createElement("div",{className:"form-field-top-label"},s.a.createElement("label",{className:"form-label"}),s.a.createElement("input",{type:"text",name:"nameCompany",id:"nameCompany",className:"form-control form-control-lg",value:this.state.nameCompany,size:"50",style:{width:"100%",opacity:1,cursor:"none",marginLeft:-10,color:"black"},disabled:!0}),s.a.createElement("br",null)))),this.state.media.length>0?this.state.media.map((e,a)=>s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"form-input p-20"},s.a.createElement("div",{className:"training-session-media-list",style:{fontSize:10,display:"inline-block"}},s.a.createElement("img",{src:e.url,alt:e.name,style:{maxWidth:"100%"}}))))))):null))),s.a.createElement("div",{className:"row g-0"},s.a.createElement("div",{className:"col"},s.a.createElement("hr",null))),s.a.createElement("div",{className:"row g-0"},s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"card-body p-md-3 text-black"},s.a.createElement("div",{className:"mb-2 form-group",style:{marginTop:-25,paddingBottom:20}},s.a.createElement("small",{className:"form-text",style:{color:"#333"}},s.a.createElement("i",null,"Please fill in your information"))),e.input.map(e=>s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col mb-4"},this.checkTypeInput(e,this.state.input[e.stateString],e.stateString))))),s.a.createElement("div",{className:"d-flex justify-content-start pt-3"},s.a.createElement("button",{type:"button",className:"btn btn-warning btn-lg",onClick:()=>this.submitForm(),disabled:this.state.isSubmit},this.state.submitText))))))))):this.state.loading?s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("div",{className:"p-20"},"Loading..."))):!this.state.load&&s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("div",{className:"col-xl d-xl-block",style:{justifyContent:"center"}},s.a.createElement("center",null,s.a.createElement("img",{src:"newasset/Page_Not_Found_Icademy.png",alt:"Icademy",className:"img-fluid",style:{borderTopLeftRadius:".25rem",borderBottomLeftRadius:".25rem",width:"80%",marginTop:"1%"}}))))))}}a.default=d},458:function(e,a,t){"use strict";var l=t(0),s=t.n(l),r=t(67),n=t.n(r),i=function(){return(i=Object.assign||function(e){for(var a,t=1,l=arguments.length;t<l;t++)for(var s in a=arguments[t])Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);return e}).apply(this,arguments)};a.a=function(e){for(var a=e.url,t=e.allowFullScreen,l=e.position,r=e.display,o=e.height,m=e.width,c=e.overflow,d=e.styles,u=e.onLoad,p=e.onMouseOver,h=e.onMouseOut,f=e.scrolling,g=e.id,b=e.frameBorder,E=e.ariaHidden,y=e.sandbox,N=e.allow,v=e.className,w=e.title,k=e.ariaLabel,S=e.ariaLabelledby,x=e.name,C=e.target,F=e.loading,M=e.importance,P=e.referrerpolicy,R=e.allowpaymentrequest,U=e.src,T=n()({src:U||a,target:C||null,style:{position:l||null,display:r||"block",overflow:c||null},scrolling:f||null,allowpaymentrequest:R||null,importance:M||null,sandbox:y||null,loading:F||null,styles:d||null,name:x||null,className:v||null,referrerpolicy:P||null,title:w||null,allow:N||null,id:g||null,"aria-labelledby":S||null,"aria-hidden":E||null,"aria-label":k||null,width:m||null,height:o||null,onLoad:u||null,onMouseOver:p||null,onMouseOut:h||null}),L=Object.create(null),O=0,_=Object.keys(T);O<_.length;O++){var j=_[O];null!=T[j]&&(L[j]=T[j])}for(var D=0,q=Object.keys(L.style);D<q.length;D++){var B=q[D];null==L.style[B]&&delete L.style[B]}if(t)if("allow"in L){var I=L.allow.replace("fullscreen","");L.allow=("fullscreen "+I.trim()).trim()}else L.allow="fullscreen";return b>=0&&(L.style.hasOwnProperty("border")||(L.style.border=b)),s.a.createElement("iframe",i({},L))}}}]);
//# sourceMappingURL=42.358333ae.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[33],{1075:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(11),o=a(13),i=a(12),c=a(31),l=a(14),s=a(0),u=a.n(s),d=a(480),f=a(3),p=a(2),m=a(25),g=a.n(m),b=a(37),v=a(544),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).filterNotification=function(e){e.preventDefault(),a.setState({filterNotification:e.target.value})},a.changeFilterType=function(e){a.setState({filterType:e.target.value})},a.deleteNotif=function(e){e.preventDefault(),f.l.delete("".concat(f.a,"v1/notification/id/").concat(e.target.getAttribute("data-id"))).then((function(e){e.data.error&&console.log("Error delete"),a.fetchNotif()}))},a.deleteAllNotif=function(e){e.preventDefault();var t=[];a.state.notificationData.filter((function(e){1==e.tag&&t.push(e.id)})),f.l.put("".concat(f.a,"v1/notification/id/").concat(p.a.get("user").data.user_id),{notifIds:t}).then((function(e){e.data.error&&console.log("Error delete"),a.fetchNotif()}))},a.readAllNotif=function(e){e.preventDefault();var t=[];a.state.notificationData.filter((function(e){1==e.tag&&0==e.isread&&t.push(e.id)})),f.l.put("".concat(f.a,"v1/notification/read/all"),{userId:p.a.get("user").data.user_id,notifIds:t}).then((function(e){e.data.error&&console.log("Error update"),a.props.socket.emit("send",{companyId:p.a.get("user").data.company_id}),a.fetchNotif()}))},a.deleteAllReminder=function(e){e.preventDefault();var t=[];a.state.notificationData.filter((function(e){2==e.tag&&t.push(e.id)})),f.l.put("".concat(f.a,"v1/notification/id/").concat(p.a.get("user").data.user_id),{notifIds:t}).then((function(e){e.data.error&&console.log("Error delete"),a.fetchNotif()}))},a.readAllReminder=function(e){e.preventDefault();var t=[];a.state.notificationData.filter((function(e){2==e.tag&&0==e.isread&&t.push(e.id)})),console.log("state: ",t),f.l.put("".concat(f.a,"v1/notification/read/all"),{userId:p.a.get("user").data.user_id,notifIds:t}).then((function(e){e.data.error&&console.log("Error update"),a.props.socket.emit("send",{companyId:p.a.get("user").data.company_id}),a.fetchNotif()}))},a.state={notificationData:[],tabIndex:1,badgeNotif:0,badgeRemind:0,filterType:"",filterNotification:"",notif:[],notifFilter:[]},a.tabAktivitas=a.tabAktivitas.bind(Object(c.a)(a)),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"tabAktivitas",value:function(e,t){this.setState({tabIndex:t+1})}},{key:"componentDidMount",value:function(){var e=this;this.fetchNotif(),this.fetchCheckAccess(p.a.get("user").data.company_id,["R_CONFIRMATION"]),this.props.socket.on("broadcast",(function(t){e.fetchNotif()}))}},{key:"fetchNotif",value:function(){var e=this,t="";t=localStorage.getItem("companyID")?"".concat(f.a,"v1/notification/all/").concat(p.a.get("user").data.user_id,"?companyId=").concat(localStorage.getItem("companyID")):"".concat(f.a,"v1/notification/all/").concat(p.a.get("user").data.user_id),f.l.get(t).then((function(t){var a=t.data.result[0].filter((function(e){return 0===e.isread&&1===e.tag})),n=t.data.result[0].filter((function(e){return 0===e.isread&&2===e.tag}));e.setState({notificationData:t.data.result[0],badgeNotif:a.length,badgeRemind:n.length})}))}},{key:"readNotif",value:function(e){var t=this;f.l.put("".concat(f.a,"v1/notification/read"),{id:e}).then((function(e){e.data.error&&console.log("Gagal read"),t.props.socket.emit("send",{companyId:p.a.get("user").data.company_id}),t.fetchNotif()}))}},{key:"konfirmasiHadir",value:function(e){var t=this;f.l.put("".concat(f.a,"v1/ptc-room/konfirmasi/").concat(e,"/").concat(p.a.get("user").data.user_id)).then((function(e){e.data.error&&console.log("Error: ",e.data.error),t.props.socket.emit("send",{companyId:p.a.get("user").data.company_id}),t.fetchNotif()}))}},{key:"fetchCheckAccess",value:function(e,t){var a=this;f.l.get("".concat(f.a,"v2/notification-alert/check-access"),{company_id:e,param:t}).then((function(e){200===e.status&&(console.log(e.data.result,"test"),a.setState({notif:e.data.result}))}))}},{key:"fetchNotification",value:function(){var e=this,t="";f.l.get(t).then((function(t){200===t.status&&e.setState({notifFilter:t.data.result})}))}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.state,n=a.notificationData,r=a.filterType,o=a.filterNotification;""!=r&&(n=n.filter((function(e){return e.type==r}))),""!=o&&(n=n.filter((function(e){return JSON.stringify(Object.values(e)).match(new RegExp(o,"gmi"))})));var i=n.filter((function(e){return 1===e.tag})),c=n.filter((function(e){return 2===e.tag})),l=(this.state.notifFilter.filter((function(e){return 1===e.types})),["Course","Forum","Meeting","Announcement","Task","Files","Webinar","PTC","Tugas","Kuis","Ujian","Notifikasi"]);return u.a.createElement("div",{className:"pcoded-main-container"},u.a.createElement("div",{className:"pcoded-wrapper"},u.a.createElement("div",{className:"pcoded-content"},u.a.createElement("div",{className:"pcoded-inner-content"},u.a.createElement("div",{className:"main-body"},u.a.createElement("div",{className:"page-wrapper"},u.a.createElement("div",{className:"row"},1===this.state.tabIndex?u.a.createElement("div",{className:"col-sm-12",style:{margin:"10px 10px 10px 0"}},u.a.createElement("h3",{className:"fc-blue"},t("notification")),u.a.createElement("div",{className:"row my-3"},u.a.createElement("div",{className:"col-sm-3"},u.a.createElement("select",{value:this.state.filterType,onChange:this.changeFilterType,style:{width:"100%",height:40,border:"1px solid #ced4da",borderRadius:".25rem",color:"#949ca6",padding:"0 6px 0"}},u.a.createElement("option",{value:""},"All"),u.a.createElement("option",{value:"3"},"Meeting"),u.a.createElement("option",{value:"4"},"Announcement"),u.a.createElement("option",{value:"5"},"Task"),u.a.createElement("option",{value:"6"},"Files"))),u.a.createElement("div",{className:"col-sm-3"},u.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.filterNotification,className:"form-control"})),u.a.createElement("div",{className:"float-right"},u.a.createElement("a",{href:"",onClick:this.readAllNotif,className:"btn btn-v2 btn-primary "}," Read all"),u.a.createElement("a",{href:"",onClick:this.deleteAllNotif,className:"btn btn-v2 btn-danger ml-3"}," Remove all"))),0===i.length?u.a.createElement("div",{style:{width:"-webkit-fill-available",marginTop:"15px",padding:20}},u.a.createElement("b",{className:"fc-blue "},"No notifications at this time ...")):u.a.createElement(s.Fragment,null,i.map((function(t,a){return u.a.createElement(s.Fragment,null,u.a.createElement("div",{className:"row my-2"},u.a.createElement("div",{className:"col-sm-9",onClick:function(){return e.readNotif(t.id)},key:t.id},u.a.createElement(d.a,{style:{borderRadius:"24px",marginBottom:"2px"}},u.a.createElement(d.a.Body,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-9"},u.a.createElement("h5",{className:"fc-blue",style:{fontWeight:"bold",marginBottom:0,fontSize:"16px"}},l[t.type-1],u.a.createElement("small",{style:{fontSize:"12px",marginLeft:"8px"}},g.a.utc(t.created_at).tz(g.a.tz.guess(!0)).format("HH:mm")," \xa0",g.a.utc(t.created_at).tz(g.a.tz.guess(!0)).format("DD/MM/YYYY"))),u.a.createElement(s.Fragment,null,t.description)),u.a.createElement("div",{className:"col-sm-3 text-center",style:{margin:"auto"}},u.a.createElement("a",{href:"null"===t.destination?f.c:null==t.destination?f.c:t.destination,className:"btn btn-v2 btn-primary mr-2"},"Open"),u.a.createElement("button",{onClick:e.deleteNotif,"data-id":t.id,className:"btn btn-v2 btn-danger"},"Delete"))))),t.company_name?u.a.createElement("span",{style:{fontSize:"10px",position:"absolute",top:"9px",left:"40px",marginRight:"5px",padding:"1px 6px",borderRadius:"8px",color:"white",background:"#0091ff"}},t.company_name):null,0===t.isread?u.a.createElement("img",{src:"/newasset/new.png",alt:"New",style:{position:"absolute",top:"-3px",left:"11px",width:"54px"}}):null)))})))):u.a.createElement("div",{className:"col-sm-12",style:{margin:"10px 10px 10px 0"}},u.a.createElement("select",{value:this.state.filterType,onChange:this.changeFilterType,style:{width:200,height:40,border:"1px solid #ced4da",borderRadius:".25rem",color:"#949ca6"}},u.a.createElement("option",{value:""},"All"),u.a.createElement("option",{value:"3"},"Meeting"),u.a.createElement("option",{value:"4"},"Announcement"),u.a.createElement("option",{value:"5"},"Task"),u.a.createElement("option",{value:"6"},"Files")),0===c.length?u.a.createElement("div",{style:{width:"-webkit-fill-available",marginTop:"15px",padding:20}},u.a.createElement("b",{className:"fc-blue "},"There is no reminder at this time ...")):u.a.createElement("span",null,u.a.createElement("button",{onClick:this.deleteAllReminder,className:"btn btn-transparent ml-4"}," Remove all"),u.a.createElement("button",{onClick:this.readAllReminder,className:"btn btn-transparent ml-2"}," Read all"),c.map((function(a,n){return u.a.createElement("div",{onClick:function(){return e.readNotif(a.id)},className:"row",key:a.id,style:{background:"#FFF",borderRadius:4,padding:"12px",margin:"10px 10px 10px -15px"}},u.a.createElement("span",{style:{width:"-webkit-fill-available"}},0==a.isread&&u.a.createElement("span",{style:{margin:"5px",padding:"1px 6px",borderRadius:"8px",color:"white",background:"red"}},"new"),u.a.createElement("b",{className:"fc-blue "},1==a.type?"Course":2==a.type?"Forum":3==a.type?"Meeting":4==a.type?"Pengumuman":5==a.type?"Task":6==a.type?"Files":7==a.type?"Training":8==a.type?"PTC":9==a.type?"Tugas":10==a.type?"Kuis":11==a.type?"Ujian":"Notifikasi"),"\xa0 \xa0",u.a.createElement("small",null,g.a.utc(a.created_at).format("HH:mm")," \xa0",g.a.utc(a.created_at).format("DD/MM/YYYY")),u.a.createElement("p",{className:"fc-muted mt-1"},a.description),u.a.createElement("a",{href:"null"==a.destination?f.c:null==a.destination?f.c:a.destination,className:"btn btn-v2 btn-primary"},t("check_now")),u.a.createElement("i",{className:"fa fa-trash float-right",onClick:e.deleteNotif,"data-id":a.id,style:{cursor:"pointer"}})))})))))))))))}}]),t}(s.Component),h=Object(v.a)("common")((function(e){return u.a.createElement(b.a.Consumer,null,(function(t){return u.a.createElement(y,Object.assign({},e,{socket:t}))}))}));t.default=h},269:function(e,t,a){var n=a(341),r=a(342),o=a(343),i=a(345);e.exports=function(e,t){return n(e)||r(e,t)||o(e,t)||i()},e.exports.default=e.exports,e.exports.__esModule=!0},313:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext(null);r.displayName="CardContext",t.a=r},341:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},342:function(e,t){e.exports=function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(l){c=!0,r=l}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},343:function(e,t,a){var n=a(344);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},344:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n},e.exports.default=e.exports,e.exports.__esModule=!0},345:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},346:function(e,t,a){var n=a(347);e.exports=function(e,t){if(null==e)return{};var a,r,o=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},347:function(e,t){e.exports=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r},e.exports.default=e.exports,e.exports.__esModule=!0},480:function(e,t,a){"use strict";var n=a(1),r=a(4),o=a(20),i=a.n(o),c=a(0),l=a.n(c),s=a(34),u=a(50),d=a(74),f=a(313),p=l.a.forwardRef((function(e,t){var a=e.bsPrefix,o=e.className,c=e.variant,u=e.as,d=void 0===u?"img":u,f=Object(r.a)(e,["bsPrefix","className","variant","as"]),p=Object(s.a)(a,"card-img");return l.a.createElement(d,Object(n.a)({ref:t,className:i()(c?p+"-"+c:p,o)},f))}));p.displayName="CardImg",p.defaultProps={variant:null};var m=p,g=Object(d.a)("h5"),b=Object(d.a)("h6"),v=Object(u.a)("card-body"),y=Object(u.a)("card-title",{Component:g}),h=Object(u.a)("card-subtitle",{Component:b}),x=Object(u.a)("card-link",{Component:"a"}),N=Object(u.a)("card-text",{Component:"p"}),O=Object(u.a)("card-header"),E=Object(u.a)("card-footer"),w=Object(u.a)("card-img-overlay"),j=l.a.forwardRef((function(e,t){var a=e.bsPrefix,o=e.className,u=e.bg,d=e.text,p=e.border,m=e.body,g=e.children,b=e.as,y=void 0===b?"div":b,h=Object(r.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),x=Object(s.a)(a,"card"),N=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:x+"-header"}}),[x]);return l.a.createElement(f.a.Provider,{value:N},l.a.createElement(y,Object(n.a)({ref:t},h,{className:i()(o,x,u&&"bg-"+u,d&&"text-"+d,p&&"border-"+p)}),m?l.a.createElement(v,null,g):g))}));j.displayName="Card",j.defaultProps={body:!1},j.Img=m,j.Title=y,j.Subtitle=h,j.Body=v,j.Link=x,j.Text=N,j.Header=O,j.Footer=E,j.ImgOverlay=w;t.a=j},544:function(e,t,a){"use strict";var n=a(71),r=a.n(n),o=a(269),i=a.n(o),c=a(346),l=a.n(c),s=a(0),u=a.n(s),d=a(192);function f(){if(console&&console.warn){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];"string"===typeof a[0]&&(a[0]="react-i18next:: ".concat(a[0])),(e=console).warn.apply(e,a)}}var p={};function m(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];"string"===typeof t[0]&&p[t[0]]||("string"===typeof t[0]&&(p[t[0]]=new Date),f.apply(void 0,t))}function g(e,t,a){e.loadNamespaces(t,(function(){if(e.isInitialized)a();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),a()}))}}))}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.i18n,n=Object(s.useContext)(d.a)||{},r=n.i18n,o=n.defaultNS,c=a||r||Object(d.d)();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new d.b),!c){m("You will need to pass in an i18next instance by using initReactI18next");var l=function(e){return Array.isArray(e)?e[e.length-1]:e},u=[l,{},!1];return u.t=l,u.i18n={},u.ready=!1,u}c.options.react&&void 0!==c.options.react.wait&&m("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var f=v(v(v({},Object(d.c)()),c.options.react),t),p=f.useSuspense,b=e||o||c.options&&c.options.defaultNS;b="string"===typeof b?[b]:b||["translation"],c.reportNamespaces.addUsedNamespaces&&c.reportNamespaces.addUsedNamespaces(b);var y=(c.isInitialized||c.initializedStoreOnce)&&b.every((function(e){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return m("i18n.languages were undefined or empty",t.languages),!0;var n=t.languages[0],r=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===n.toLowerCase())return!0;var i=function(e,a){var n=t.services.backendConnector.state["".concat(e,"|").concat(a)];return-1===n||2===n};return!(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(n,e)||(!t.services.backendConnector.backend||!(!i(n,e)||r&&!i(o,e))))}(e,c,f)}));function h(){return c.getFixedT(null,"fallback"===f.nsMode?b:b[0])}var x=Object(s.useState)(h),N=i()(x,2),O=N[0],E=N[1],w=Object(s.useRef)(!0);Object(s.useEffect)((function(){var e=f.bindI18n,t=f.bindI18nStore;function a(){w.current&&E(h)}return w.current=!0,y||p||g(c,b,(function(){w.current&&E(h)})),e&&c&&c.on(e,a),t&&c&&c.store.on(t,a),function(){w.current=!1,e&&c&&e.split(" ").forEach((function(e){return c.off(e,a)})),t&&c&&t.split(" ").forEach((function(e){return c.store.off(e,a)}))}}),[c,b.join()]);var j=Object(s.useRef)(!0);Object(s.useEffect)((function(){w.current&&!j.current&&E(h),j.current=!1}),[c]);var k=[O,c,y];if(k.t=O,k.i18n=c,k.ready=y,y)return k;if(!y&&!p)return k;throw new Promise((function(e){g(c,b,(function(){e()}))}))}a.d(t,"a",(function(){return O}));var h=["forwardedRef"];function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){function n(n){var r=n.forwardedRef,o=l()(n,h),c=y(e,o),s=i()(c,3),d=s[0],f=s[1],p=s[2],m=N(N({},o),{},{t:d,i18n:f,tReady:p});return t.withRef&&r?m.ref=r:!t.withRef&&r&&(m.forwardedRef=r),u.a.createElement(a,m)}var r;n.displayName="withI18nextTranslation(".concat((r=a).displayName||r.name||("string"===typeof r&&r.length>0?r:"Unknown"),")"),n.WrappedComponent=a;return t.withRef?u.a.forwardRef((function(e,t){return u.a.createElement(n,Object.assign({},e,{forwardedRef:t}))})):n}}}}]);
//# sourceMappingURL=33.407132cd.chunk.js.map
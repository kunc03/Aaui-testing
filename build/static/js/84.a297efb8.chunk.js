(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[84],{1410:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(1613),i=a(455),c=a(3),m=a(277),o=a.n(m),r=a(303),d=a.n(r);a(464);class p extends l.Component{constructor(e){super(e),this.handleChangeValidity=e=>{this.setState({validity:e})},this.onChangeInput=e=>{const t=e.target,a=t.value,l=t.name;this.setState({[l]:a})},this.onClickSimpan=e=>{e.preventDefault();const{triggerUpdate:t}=this.props;if(this.state.nama&&this.state.logo&&this.state.tipe){let e=0==this.state.unlimited?"1":"0",a=new FormData;a.append("company_name",this.state.nama),a.append("company_type",this.state.tipe),a.append("status",this.state.status),a.append("unlimited",e),a.append("logo",this.state.logo),a.append("validity",this.state.validity.toISOString().split("T")[0]),a.append("limituser",this.state.limituser),a.append("limitmeeting",this.state.limitmeeting),a.append("limitwebinar",this.state.limitwebinar),a.append("access_training",this.state.access_training);let l="".concat(c.a,"v1/company");c.l.post(l,a).then(e=>{if(t(e.data.result),"pendidikan"===this.state.tipe){let t=["Admin","Guru","Murid","Parents","Principal","Management"];for(var a=0;a<t.length;a++){let l={company_id:e.data.result.company_id,grup_name:t[a],activity:0,course:0,manage_course:0,forum:0,group_meeting:0,manage_group_meeting:0};c.l.post("".concat(c.a,"v1/grup"),l)}}this.setState({nama:"",status:"",logo:""}),this.setState({filename:null}),window.$("#modalAdd").modal("hide"),console.log("resss",e.data.result),console.log("reqqq",this.state.validate)}).catch(e=>{console.log(e)})}},this.onChangeNama=e=>{this.setState({nama:e.target.value})},this.onChangeTipe=e=>{this.setState({tipe:e.target.value})},this.onChangeStatus=e=>{this.setState({status:e.target.value})},this.onChangeLogo=e=>{const t=e.target;t.files[0].size<=5e5?this.setState({logo:t.files[0],filename:t.files[0].name}):(t.value=null,this.setState({notif:"The file does not match the format, please check again."}))},this.onChangeNama=this.onChangeNama.bind(this),this.onChangeStatus=this.onChangeStatus.bind(this),this.onChangeLogo=this.onChangeLogo.bind(this),this.onClickSimpan=this.onClickSimpan.bind(this),this.state={filename:null,nama:"",tipe:"",status:"active",logo:"",notif:"Make sure the file is in png, jpeg, jpg or gif format and does not exceed 500KB",unlimited:!1,access_training:!1,validity:new Date,limituser:null,limitmeeting:null,limitwebinar:null}}toggleSwitch(e){this.setState({unlimited:!this.state.unlimited})}toggleSwitchTraining(e){this.setState({access_training:!this.state.access_training})}render(){return n.a.createElement("div",{id:"modalAdd",className:"modal fade",tabIndex:-1,role:"dialog","aria-labelledby":"editModal","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},n.a.createElement("div",{className:"modal-content b-r-15",style:{padding:"30px 50px"}},n.a.createElement("div",{className:"modal-header p-b-0",style:{borderBottom:"0 !important"}},n.a.createElement("h5",{className:"modal-title p-t-0 f-21 f-w-bold text-c-black",id:"exampleModalCenterTitle"},"Add Company")),n.a.createElement("div",{className:"modal-body"},n.a.createElement(i.a,null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Type"),n.a.createElement("select",{onChange:this.onChangeTipe,className:"form-control",style:{textTransform:"capitalize"}},n.a.createElement("option",{value:""},"Select Company Type"),n.a.createElement("option",{value:"perusahaan"},"Perusahaan"),n.a.createElement("option",{value:"pendidikan"},"Pendidikan"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Company Name"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Company Name",onChange:this.onChangeNama,value:this.state.nama})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Company Logo"),n.a.createElement("input",{type:"file",onChange:this.onChangeLogo,className:"form-control",accept:"image/*"}),this.state.filename?n.a.createElement(i.a.Text,{className:"text-info"},this.state.filename," ",n.a.createElement("br",null)):null,this.state.notif&&n.a.createElement(i.a.Text,{className:"text-danger"},this.state.notif)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(o.a,{checked:!1,onChange:this.toggleSwitch.bind(this),checked:this.state.unlimited}))),this.state.unlimited&&n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(d.a,{selected:this.state.validity,onChange:this.handleChangeValidity,showTimeSelect:!0,dateFormat:"yyyy-MM-dd"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Product Limitation"),n.a.createElement("table",null,n.a.createElement("tr",null,n.a.createElement("th",null,"User"),n.a.createElement("th",null,"Meeting"),n.a.createElement("th",null,"Webinar")),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(i.a.Control,{type:"number",name:"limituser",onChange:this.onChangeInput,placeholder:"Unlimited",value:this.state.limituser})),n.a.createElement("td",null,n.a.createElement(i.a.Control,{type:"number",name:"limitmeeting",onChange:this.onChangeInput,placeholder:"Unlimited",value:this.state.limitmeeting})),n.a.createElement("td",null,n.a.createElement(i.a.Control,{type:"number",name:"limitwebinar",onChange:this.onChangeInput,placeholder:"Unlimited",value:this.state.limitwebinar}))))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-input",htmlFor:!0},"Access Training"),n.a.createElement("div",{style:{width:"100%"}},n.a.createElement(o.a,{checked:!1,onChange:this.toggleSwitchTraining.bind(this),checked:this.state.access_training}))))),n.a.createElement("div",{className:"modal-footer p-b-0",style:{borderTop:"0 !important"}},n.a.createElement("button",{type:"button",onClick:this.onClickSimpan,className:"btn btn-primary btn-block f-18 f-w-bold openalertedit"},"Save"),n.a.createElement("button",{type:"button",className:"btn btn-block bg-c-white text-c-grey3 f-18 f-w-bold","data-dismiss":"modal"},"Back")))))}}var h=p,g=a(10),u=a(2);class E extends l.Component{constructor(e){super(e),this.toggleModal=()=>{this.setState({isOpen:!this.state.isOpen})},this.closeModalAdd=e=>{console.log(e),this.setState({isOpen:e})},this.triggerUpdate=e=>this.setState({grup:[...this.state.grup,e]}),this.isToggleDelete=e=>{this.setState({delete:{modal:!this.state.delete.modal,id:e.target.getAttribute("data-id")}})},this.handleClose=e=>{this.setState({delete:{modal:!1,id:""}})},this.onClickDelete=e=>{e.preventDefault();let t="".concat(c.a,"v1/company/").concat(this.state.delete.id);c.l.delete(t).then(e=>{console.log(e.data),this.setState({grup:this.state.grup.filter(e=>e.company_id!=this.state.delete.id),delete:{modal:!1,id:""}})}).catch(e=>{console.log(e)})},this.state={grup:[],isOpen:!1,delete:{modal:!1,id:""}}}componentDidMount(){let e="".concat(c.a,"v1/company");c.l.get(e).then(e=>{this.setState({grup:e.data.result})}).catch((function(e){console.log(e)}))}render(){let{grup:e}=this.state,t="";t="superadmin"===u.a.get("user").data.level?"/company-detail-super":"/company-detail";const a=e=>{let{item:a}=e;return n.a.createElement("li",null,n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-block",style:{padding:"25px 30px !important"}},n.a.createElement("div",{className:"row d-flex align-items-center"},n.a.createElement("div",{className:"col-xl-1 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("img",{width:"80px",src:a.logo,alt:"Logo"})))),n.a.createElement("div",{className:"col-xl-4 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("small",{className:"f-w-600 f-16 text-c-grey-t "},"Company"),n.a.createElement(g.b,{to:"".concat(t,"/").concat(a.company_id)},n.a.createElement("h5",{className:"f-w-bold f-20 text-c-purple3"},a.company_name))))),n.a.createElement("div",{className:"col-xl-1 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"User"),n.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},a.user)))),n.a.createElement("div",{className:"col-xl-1 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Meeting"),n.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},a.meeting)))),n.a.createElement("div",{className:"col-xl-1 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Limited Time"),n.a.createElement("h5",{className:"f-w-bold f-16 text-c-purple3"},a.unlimited?"Tidak":a.validity.toString().substring(0,10))))),n.a.createElement("div",{className:"col-xl-1 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Status"),n.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},a.status)))),n.a.createElement("div",{className:"col-xl-2 col-md-12"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},n.a.createElement("div",{className:"col"},n.a.createElement("small",{className:"f-w-600 f-14 text-c-grey-t "},"Type"),n.a.createElement("h5",{style:{textTransform:"capitalize"},className:"f-w-bold f-16 text-c-purple3"},a.company_type?"perusahaan"===a.company_type?"Company":"Education":"Not Set")))),n.a.createElement("div",{className:"col-xl-1 col-md-12 text-right"},n.a.createElement("p",{className:"m-b-0"},n.a.createElement(g.b,{to:"".concat(t,"/").concat(a.company_id)},n.a.createElement("img",{src:"assets/images/component/Edit-1.png",className:"img-icon-edit m-r-10",alt:"Edit"})),n.a.createElement("a",{href:"#",title:"Delete","data-toggle":"modal","data-target":"#modalDelete"},n.a.createElement("img",{src:"assets/images/component/Delete-1.png",className:"img-icon-delete","data-id":a.company_id,onClick:this.isToggleDelete,alt:"Delete"}))))))))},l=e=>{let{lists:t}=e;return n.a.createElement("ul",{className:"list-cabang"},t.map(e=>n.a.createElement(a,{key:e.company_id,item:e})))};return n.a.createElement("div",{className:"pcoded-main-container"},n.a.createElement("div",{className:"pcoded-wrapper"},n.a.createElement("div",{className:"pcoded-content"},n.a.createElement("div",{className:"pcoded-inner-content"},n.a.createElement("div",{className:"main-body"},n.a.createElement("div",{className:"page-wrapper"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xl-12"},n.a.createElement("h3",{className:"f-24 f-w-800 mb-3"},"Company Management"),n.a.createElement("a",{href:"#",className:"btn btn-ideku f-14 float-right mb-3",style:{padding:"7px 25px !important"},"data-toggle":"modal","data-target":"#modalAdd"},n.a.createElement("img",{src:"assets/images/component/person_add.png",className:"button-img",alt:""}),"Add New")),n.a.createElement("div",{className:"col-xl-12"},n.a.createElement("div",{style:{overflowX:"auto"}},n.a.createElement(l,{lists:e}))),n.a.createElement(h,{show:this.state.isOpen,onClose:this.toggleModal,closeModalAdd:this.closeModalAdd,triggerUpdate:this.triggerUpdate}),n.a.createElement(s.a,{show:this.state.delete.modal,onHide:this.handleClose},n.a.createElement(s.a.Header,{closeButton:!0},n.a.createElement(s.a.Title,{className:"text-c-purple3 f-w-bold"},"Hapus Company")),n.a.createElement(s.a.Body,null,n.a.createElement("p",{className:"f-w-bold"},"Apakah anda yakin untuk menghapus company ini ?"),n.a.createElement("button",{type:"button",onClick:this.onClickDelete,className:"btn btn-block btn-ideku f-w-bold"},"Hapus"),n.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.handleClose},"Tidak"))))))))))}}t.default=E}}]);
//# sourceMappingURL=84.a297efb8.chunk.js.map
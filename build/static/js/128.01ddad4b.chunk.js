(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[128,143],{1497:function(e,t,a){"use strict";a.r(t);var n=a(227),l=a(6),r=a(11),s=a(13),c=a(12),o=a(14),i=a(0),m=a.n(i),u=a(2),d=a(3),f=a(24),E=(a(251),a(127),a(831)),h=a.n(E),p=(a(865),function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={listSemester:[],semesterId:"",semesterInfo:{},jadwalKu:{},listKelas:[],kelasId:"",kelasInfo:{},listMurid:[],muridId:[],muridInfo:{},isLoading:!1,nilaiMurid:[],tahunAjaran:"",listTahunAjaran:[]},a.exportPDF=function(){var e=new h.a("portrait","pt","A4");e.setFontSize(15);var t={startY:100,head:[["NO","SUBJECT","NILAI","TASK","QUIZ","EXAM","PRESENSI"]],body:a.state.nilaiMurid.map((function(e,t){return[t+1,e.nama_pelajaran,(e.totalAkhirScoreTugas+e.totalAkhirScoreKuis+e.totalAkhirScoreUjian).toFixed(2),e.totalAkhirScoreTugas,e.totalAkhirScoreKuis,e.totalAkhirScoreUjian,0]}))};e.text("Report ",40,40),e.setFontSize(9),e.text("NIK",40,60),e.text(": ".concat(a.state.muridId[0]),120,60),e.text("NAME",40,75),e.text(": ".concat(a.state.muridInfo.nama),120,75),e.text("CLASS",40,90),e.text(": ".concat(a.state.kelasInfo.kelas_nama),120,90),e.text("SEMESTER",220,60),e.text(": ".concat(a.state.semesterInfo.semester_name),300,60),e.text("YEAR",220,75),e.text(": ".concat(a.state.kelasInfo.tahun_ajaran),300,75),e.setFontSize(15),e.autoTable(t),e.save("report.pdf")},a.selectTahunAjaran=function(e){var t=e.target.value;a.setState({tahunAjaran:t}),a.fetchJadwal(t)},a.selectSemester=function(e){e.preventDefault();var t=e.target.value,l=Object(n.a)(a.state.jadwalKu.jadwal),r=Object(n.a)(new Map(l.map((function(e){return[e.kelas_id,e]}))).values()).filter((function(e){return e.semester_id===parseInt(t)}));a.setState({semesterId:t,listKelas:r}),d.l.get("".concat(d.a,"v1/semester/").concat(t)).then((function(e){a.setState({semesterId:t,semesterInfo:e.data.result,listKelas:r})}))},a.selectKelas=function(e){e.preventDefault();var t=e.target.value;d.l.get("".concat(d.a,"v2/kelas/one/").concat(t)).then((function(e){a.setState({kelasId:t,kelasInfo:e.data.result})})),a.fetchMurid(t)},a.selectMurid=function(e){console.log("state:",e),a.setState({isLoading:!0,nilaiMurid:[]}),d.l.get("".concat(d.a,"v2/murid/no-induk/").concat(e[0])).then((function(t){a.setState({muridId:e,muridInfo:t.data.result}),a.fetchNilaiMurid(a.state.semesterId,a.state.kelasId,t.data.result.user_id,a.state.tahunAjaran)}))},a.resetFilter=function(e){e.preventDefault(),a.setState({semesterId:"",semesterInfo:{},listKelas:[],kelasId:"",kelasInfo:{},listPelajaran:[],pelajaranId:"",pelajaranInfo:{},muridId:[],isLoading:!1,nilaiMurid:[]})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"fetchJadwal",value:function(e){var t=this;d.l.get("".concat(d.a,"v2/jadwal-mengajar/murid/").concat(u.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then((function(a){a.data.error&&console.log("Error: fetch pelajaran"),t.setState({jadwalKu:a.data.result});var n=a.data.result;d.l.get("".concat(d.a,"v2/murid/no-induk/").concat(n.no_induk)).then((function(e){t.setState({muridId:n.id,muridInfo:e.data.result})})),d.l.get("".concat(d.a,"v1/semester/").concat(n.semester_id)).then((function(e){t.setState({semesterId:n.semester_id,semesterInfo:e.data.result})})),d.l.get("".concat(d.a,"v2/kelas/one/").concat(n.kelas_id)).then((function(e){t.setState({kelasId:n.kelas_id,kelasInfo:e.data.result})})),t.fetchNilaiMurid(n.semester_id,n.kelas_id,u.a.get("user").data.user_id,e)}))}},{key:"fetchSemester",value:function(){var e=this;d.l.get("".concat(d.a,"v1/semester/company/").concat(u.a.get("user").data.company_id)).then((function(t){t.data.error&&f.b.warning("Error fetch data semester"),e.setState({listSemester:t.data.result})}))}},{key:"fetchKelas",value:function(e){var t=this;d.l.get("".concat(d.a,"v2/kelas/semester/").concat(u.a.get("user").data.company_id,"/").concat(e)).then((function(e){e.data.error&&f.b.warning("Error fetch data semester"),t.setState({listKelas:e.data.result})}))}},{key:"fetchMurid",value:function(e){var t=this;d.l.get("".concat(d.a,"v2/murid/kelas/").concat(e)).then((function(e){e.data.error&&f.b.warning("Error fetch murid");var a=[];e.data.result.map((function(e){a.push({value:e.no_induk,label:"".concat(e.no_induk," - ").concat(e.nama)})})),t.setState({listMurid:a})}))}},{key:"fetchNilaiMurid",value:function(e,t,a,n){var l=this;console.log("Query: ".concat(e," ").concat(t," ").concat(a)),d.l.get("".concat(d.a,"v2/guru/nilai-murid/").concat(e,"/").concat(t,"/").concat(a,"?tahunAjaran=").concat(n)).then((function(e){l.setState({nilaiMurid:e.data.result,isLoading:!1})}))}},{key:"componentDidMount",value:function(){for(var e=new Date,t=e.getMonth()<6?e.getFullYear()-1+"/"+e.getFullYear():e.getFullYear()+"/"+(e.getFullYear()+1),a=[],n=0;n<6;n++)a.push("".concat(e.getFullYear()-n,"/").concat(e.getFullYear()-n+1));this.setState({tahunAjaran:t,listTahunAjaran:a}),this.fetchJadwal(t),this.fetchSemester()}},{key:"render",value:function(){var e=this;u.a.get("user").data.level;return m.a.createElement("div",{className:"pcoded-main-container"},m.a.createElement("div",{className:"pcoded-wrapper"},m.a.createElement("div",{className:"pcoded-content"},m.a.createElement("div",{className:"pcoded-inner-content"},m.a.createElement("div",{className:"main-body"},m.a.createElement("div",{className:"page-wrapper"},m.a.createElement("div",{className:"row mt-3"},m.a.createElement("div",{className:"col-xl-12"},m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card-body"},m.a.createElement("form",null,m.a.createElement("div",{className:"form-group row"},m.a.createElement("div",{className:"col-sm-2"},m.a.createElement("label",null,"Tahun Ajaran"),m.a.createElement("select",{onChange:this.selectTahunAjaran,value:this.state.tahunAjaran,className:"form-control",required:!0},m.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listTahunAjaran.map((function(e){return m.a.createElement("option",{value:e},e)})))),m.a.createElement("div",{className:"col-sm-3"},m.a.createElement("button",{className:"btn btn-v2 btn-success mt-4 mr-2",onClick:function(){return e.exportPDF()}},m.a.createElement("i",{className:"fa fa-download"})," Report"),m.a.createElement("button",{className:"btn btn-v2 btn-info mt-4",type:"reset",onClick:this.resetFilter},"Reset"))))))),m.a.createElement("div",{className:"col-xl-12"},m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card-body"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-2"},m.a.createElement("img",{style:{marginTop:"36px",marginLeft:"64px"},src:"/assets/images/user/avatar-1.png",className:"rounded-circle img-profile mb-4"})),m.a.createElement("div",{className:"col-sm-10"},m.a.createElement("form",{className:"mt-4"},m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 col-form-label text-right"},"NO INDUK"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("input",{type:"text",value:this.state.jadwalKu.no_induk,disabled:!0,className:"form-control"})),m.a.createElement("label",{className:"col-sm-2 col-form-label text-right"},"SEMESTER"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("input",{type:"text",value:this.state.semesterInfo.semester_name,className:"form-control"}))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 col-form-label text-right"}," NAME "),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("input",{type:"text",value:this.state.muridInfo.nama,className:"form-control"})),m.a.createElement("label",{className:"col-sm-2 col-form-label text-right"},"SCHOOL YEAR"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("input",{type:"text",value:this.state.kelasInfo.tahun_ajaran,className:"form-control"}))),m.a.createElement("div",{className:"form-group row"},m.a.createElement("label",{className:"col-sm-2 col-form-label text-right"},"KELAS"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("input",{type:"text",value:this.state.kelasInfo.kelas_nama,className:"form-control"})))))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-12"},m.a.createElement("table",{className:"table table-striped mt-4 table-bordered"},m.a.createElement("thead",null,m.a.createElement("tr",{className:"text-center"},m.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"NO"),m.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," SUBJECT "),m.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," TOTAL"),m.a.createElement("td",{colSpan:"3"},"NILAI HASIL BELAJAR"),m.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"PERSENSI")),m.a.createElement("tr",{className:"text-center"},m.a.createElement("td",null,"TASK"),m.a.createElement("td",null,"QUIZ"),m.a.createElement("td",null,"EXAM"))),m.a.createElement("tbody",null,this.state.isLoading&&m.a.createElement("tr",null,m.a.createElement("td",{className:"text-center",colSpan:"7"},m.a.createElement("span",null,"Loading..."))),this.state.nilaiMurid.map((function(e,t){return m.a.createElement("tr",{className:"text-center"},m.a.createElement("td",null,t+1),m.a.createElement("td",null,e.nama_pelajaran),m.a.createElement("td",null,(e.totalAkhirScoreTugas+e.totalAkhirScoreKuis+e.totalAkhirScoreUjian).toFixed(2)),m.a.createElement("td",null,Number.parseFloat(e.totalAkhirScoreTugas).toFixed(2),m.a.createElement("br",null),e.kumpulTugas.length,"/",e.totalTugas.length),m.a.createElement("td",null,Number.parseFloat(e.totalAkhirScoreKuis).toFixed(2),m.a.createElement("br",null),e.kumpulKuis.length,"/",e.totalKuis.length),m.a.createElement("td",null,Number.parseFloat(e.totalAkhirScoreUjian).toFixed(2),m.a.createElement("br",null),e.kumpulUjian.length,"/",e.totalUjian.length),m.a.createElement("td",null,e.persensi?e.persensi+"%":"0%"))}))))))))))))))))}}]),t}(i.Component));t.default=p},227:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=128.01ddad4b.chunk.js.map
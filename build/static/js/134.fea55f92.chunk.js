(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[134],{1612:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(6),i=a(11),s=a(13),o=a(12),c=a(14),r=a(0),m=a.n(r),d=a(15),u=a(1616),f=a(3),p=a(323),h=a(2),b=a(1613),E=a.n(b),g=function(e){function t(){var e,a;Object(l.a)(this,t);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={companyId:"",informasiId:"",informasi:[],isModalAdd:!1,judul:"",deskripsi:"",files:"",isModalRemove:!1,isNotifikasi:!1,isiNotifikasi:""},a.onChangeInput=function(e){var t=e.target,l=t.value,i=t.name;"files"===i?t.files[0].size>=0?a.setState(Object(n.a)({},i,t.files)):(t.value=null,a.handleCloseModal(),a.setState({isNotifikasi:!0,isiNotifikasi:"The file does not match the format, please check again."})):a.setState(Object(n.a)({},i,l))},a.onChangeTinyMce=function(e){a.setState({deskripsi:e.target.getContent().replace(/'/g,"\\'")})},a.closeModal=function(e){a.setState({isModalAdd:!1,informasiId:"",judul:"",deskripsi:"",files:"",isModalRemove:!1,isNotifikasi:!1,isiNotifikasi:""})},a.openModalAdd=function(e){a.setState({isModalAdd:!0})},a.openModalEdit=function(e){var t=e.target.getAttribute("data-id");f.l.get("".concat(f.a,"v1/informasi/").concat(t)).then((function(e){200===e.status&&a.setState({isModalAdd:!0,informasiId:t,company_id:e.data.result[0].company_id,judul:e.data.result[0].informasi_judul,deskripsi:e.data.result[0].informasi_deskripsi})}))},a.openModalRemove=function(e){a.setState({isModalRemove:!0,informasiId:e.target.getAttribute("data-id")})},a.onClickSubmitHapus=function(e){e.preventDefault(),f.l.delete("".concat(f.a,"v1/informasi/").concat(e.target.getAttribute("data-id"))).then((function(e){200===e.status&&(a.closeModal(),a.fetchData())}))},a.onClickSubmitSave=function(e){if(e.preventDefault(),""==a.state.informasiId){var t={judul:a.state.judul,company:a.state.companyId,deskripsi:a.state.deskripsi};f.l.post("".concat(f.a,"v1/informasi"),t).then((function(e){if(200===e.status){if(console.log("STATE: ",e.data),0!=a.state.files.length){for(var t=new FormData,n=0;n<a.state.files.length;n++)t.append("files",a.state.files[n]);f.l.put("".concat(f.a,"v1/informasi/file/").concat(e.data.result.informasi_id),t).then((function(e){200===e.status&&(console.log("Saved"),a.fetchData())}))}a.fetchData(),a.closeModal()}}))}else{var n={judul:a.state.judul,company:a.state.companyId,deskripsi:a.state.deskripsi};f.l.put("".concat(f.a,"v1/informasi/").concat(a.state.informasiId),n).then((function(e){if(200===e.status){if(0!=a.state.files.length){for(var t=new FormData,n=0;n<a.state.files.length;n++)t.append("files",a.state.files[n]);f.l.put("".concat(f.a,"v1/informasi/file/").concat(a.state.informasiId),t).then((function(e){200===e.status&&(console.log("Saved"),a.fetchData())}))}a.fetchData(),a.closeModal()}}))}},a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;f.l.get("".concat(f.j).concat(h.a.get("user").data.email)).then((function(t){200===t.status&&(e.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):t.data.result.company_id}),f.l.get("".concat(f.a,"v1/informasi/company/").concat(t.data.result.company_id)).then((function(t){200===t.status&&e.setState({informasi:t.data.result})})))}))}},{key:"render",value:function(){var e=this,t=function(e){var t=e.lists.split(",");return t.length>0?"null"==t[0]?m.a.createElement("div",null,"No File"):m.a.createElement("div",{class:"list-group"},t.map((function(e,t){return m.a.createElement("a",{key:e,href:e,target:"_blank",className:"list-group-item list-group-item-action"},"File ",t+1)}))):m.a.createElement("div",null,"No File")};return m.a.createElement("div",{className:"pcoded-main-container"},m.a.createElement("div",{className:"pcoded-wrapper"},m.a.createElement("div",{className:"pcoded-content"},m.a.createElement("div",{className:"pcoded-inner-content"},m.a.createElement("div",{className:"main-body"},m.a.createElement("div",{className:"page-wrapper"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-xl-12"},m.a.createElement("h3",{className:"f-24 f-w-800"},"Information"),m.a.createElement("div",{style:{overflowX:"auto"}},m.a.createElement("table",{className:"table-curved",style:{width:"100%"}},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"text-center"},"NO"),m.a.createElement("th",null," Title "),m.a.createElement("th",null,"Files"),m.a.createElement("th",null,"Created At"),m.a.createElement("th",{className:"text-center"},m.a.createElement(d.b,{onClick:this.openModalAdd,className:"btn btn-ideku col-12 f-14",style:{padding:"7px 8px !important"}},m.a.createElement("img",{src:"assets/images/component/person_add.png",className:"button-img",alt:""}),"Add New")))),m.a.createElement((function(a){var n=a.lists;return 0===n.length?m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{colSpan:5},"No data available"))):m.a.createElement("tbody",null,n.map((function(a,n){return m.a.createElement("tr",{key:a.informasi_id},m.a.createElement("td",null,n+1),m.a.createElement("td",null,a.informasi_judul),m.a.createElement("td",null,m.a.createElement(t,{lists:a.informasi_files})),m.a.createElement("td",null,m.a.createElement(E.a,{format:"DD/MM/YYYY"},a.created_at)),m.a.createElement("td",null,m.a.createElement(d.b,{to:"#",className:"buttonku ml-2",title:"Edit"},m.a.createElement("i",{onClick:e.openModalEdit,"data-id":a.informasi_id,className:"fa fa-edit"})),m.a.createElement(d.b,{to:"#",className:"buttonku ml-2",title:"Hapus"},m.a.createElement("i",{onClick:e.openModalRemove,"data-id":a.informasi_id,className:"fa fa-trash"}))))})))}),{lists:this.state.informasi})))))))))),m.a.createElement(u.a,{show:this.state.isModalAdd,onHide:this.closeModal},m.a.createElement(u.a.Body,null,m.a.createElement(u.a.Title,{style:{marginBottom:"20px"},className:"text-c-purple3 f-w-bold"},"Form Data"),m.a.createElement("form",{className:"form-vertical"},m.a.createElement("div",{className:"form-group"},m.a.createElement("input",{type:"text",onChange:this.onChangeInput,className:"form-control",name:"judul",value:this.state.judul,placeholder:"Title Information"})),m.a.createElement("div",{className:"form-group"},m.a.createElement(p.a,{apiKey:"j18ccoizrbdzpcunfqk7dugx72d7u9kfwls7xlpxg7m21mb5",initialValue:this.state.deskripsi,init:{height:300,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                      alignleft aligncenter alignright alignjustify |                       bullist numlist outdent indent | removeformat | help"},onChange:this.onChangeTinyMce})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",null,"Attachments"),m.a.createElement("input",{name:"files",onChange:this.onChangeInput,className:"form-control",type:"file",multiple:!0}),m.a.createElement("span",null,"Bisa lebih dari satu file."))),m.a.createElement("button",{style:{marginTop:"30px"},type:"button",onClick:this.onClickSubmitSave,className:"btn btn-block btn-ideku f-w-bold"},"Save"),m.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.closeModal},"Tidak"))),m.a.createElement(u.a,{show:this.state.isModalRemove,onHide:this.closeModal},m.a.createElement(u.a.Body,null,m.a.createElement(u.a.Title,{className:"text-c-purple3 f-w-bold"},"Delete Information"),m.a.createElement("p",{className:"f-w-bold"}," Are you sure you want to delete this information ?"),m.a.createElement("button",{style:{marginTop:"50px"},type:"button","data-id":this.state.informasiId,onClick:this.onClickSubmitHapus,className:"btn btn-block btn-ideku f-w-bold"},"Delete"),m.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.closeModal},"No"))),m.a.createElement(u.a,{show:this.state.isNotifikasi,onHide:this.closeModal},m.a.createElement(u.a.Body,null,m.a.createElement(u.a.Title,{className:"text-c-purple3 f-w-bold"},"Notification"),m.a.createElement("p",{style:{color:"black",margin:"20px 0px"}},this.state.isiNotifikasi),m.a.createElement("button",{type:"button",className:"btn btn-block f-w-bold",onClick:this.closeModal},"Understand"))))}}]),t}(r.Component);t.default=g}}]);
//# sourceMappingURL=134.fea55f92.chunk.js.map
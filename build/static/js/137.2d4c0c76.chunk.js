(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[137],{1498:function(a,e,t){"use strict";t.r(e);var n=t(6),l=t(11),r=t(13),s=t(12),i=t(14),c=t(0),o=t.n(c),u=t(24),d=t(3),m=t(2),p=t(1614),b=t(15),h=function(a){function e(){var a,t;Object(n.a)(this,e);for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];return(t=Object(r.a)(this,(a=Object(s.a)(e)).call.apply(a,[this].concat(i)))).state={idPelajaran:"",namaPelajaran:"",kategori:"",kodePelajaran:"",kelas:"",listKelas:[],listPelajaran:[],openSilabus:!1,pelajaranId:"",silabusId:"",pelajaranNama:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0,files:null,tempFiles:Math.random().toString(36),silabus:[],nilaiTugas:0,nilaiKuis:0,nilaiUjian:0,openProsentase:!1},t.openProsentase=function(a){a.preventDefault(),t.setState({pelajaranId:a.target.getAttribute("data-id"),pelajaranNama:a.target.getAttribute("data-title"),openProsentase:!0}),t.fetchProsentase(a.target.getAttribute("data-id"))},t.saveProsentase=function(a){a.preventDefault();var e={tugas:t.state.nilaiTugas,kuis:t.state.nilaiKuis,ujian:t.state.nilaiUjian};d.l.put("".concat(d.a,"v2/nilai-pelajaran/").concat(t.state.pelajaranId),e).then((function(a){a.data.error&&u.b.warning("Warning: update prosentase"),u.b.success("Set prosentase nilai berhasil disimpan"),t.fetchProsentase(t.state.pelajaranId)}))},t.savePelajaran=function(a){if(a.preventDefault(),t.state.idPelajaran){console.log("update");var e={namaPelajaran:t.state.namaPelajaran,kategori:t.state.kategori,kodePelajaran:t.state.kodePelajaran};d.l.put("".concat(d.a,"v2/pelajaran/update/").concat(t.state.idPelajaran),e).then((function(a){a.data.error&&u.b.warning("Error create pelajaran"),t.fetchPelajaran()}))}else{console.log("insert");var n={companyId:m.a.get("user").data.company_id,namaPelajaran:t.state.namaPelajaran,kategori:t.state.kategori,kodePelajaran:t.state.kodePelajaran};d.l.post("".concat(d.a,"v2/pelajaran/create"),n).then((function(a){a.data.error&&u.b.warning("Error create pelajaran"),t.fetchPelajaran()}))}t.clearForm()},t.selectPelajaran=function(a){a.preventDefault();var e=a.target.getAttribute("data-id");d.l.get("".concat(d.a,"v2/pelajaran/one/").concat(e)).then((function(a){a.data.error&&u.b.warning("Error fetch data kelas");var n=a.data.result;t.setState({idPelajaran:e,namaPelajaran:n.nama_pelajaran,kategori:n.kategori,kodePelajaran:n.kode_pelajaran})}))},t.deletePelajaran=function(a){a.preventDefault(),d.l.delete("".concat(d.a,"v2/pelajaran/delete/").concat(a.target.getAttribute("data-id"))).then((function(a){a.data.error&&u.b.warning("Error: delete pelajaran"),t.fetchPelajaran()}))},t.openSilabus=function(a){a.preventDefault(),t.setState({pelajaranId:a.target.getAttribute("data-id"),pelajaranNama:a.target.getAttribute("data-title"),openSilabus:!0}),t.fetchSilabus(a.target.getAttribute("data-id"))},t.saveSilabus=function(a){a.preventDefault(),t.addKuisSilabus(t.state.jenis)},t.selectSilabus=function(a){d.l.get("".concat(d.a,"v2/silabus/id/").concat(a.target.getAttribute("data-id"))).then((function(a){a.data.error&&u.b.warning("Error: get one silabus"),t.setState({silabusId:a.data.result.id,sesi:a.data.result.sesi,topik:a.data.result.topik,tujuan:a.data.result.tujuan,deskripsi:a.data.result.deskripsi,jenis:parseInt(a.data.result.jenis)})}))},t.deleteSilabus=function(a){a.preventDefault(),d.l.delete("".concat(d.a,"v2/silabus/delete/").concat(a.target.getAttribute("data-id"))).then((function(a){a.data.error&&u.b.warning("Error: delete silabus"),t.fetchSilabus(t.state.pelajaranId)}))},t}return Object(i.a)(e,a),Object(l.a)(e,[{key:"fetchProsentase",value:function(a){var e=this;d.l.get("".concat(d.a,"v2/nilai-pelajaran/").concat(a)).then((function(a){a.data.error&&u.b.warning("Warning: fetch prosentase"),e.setState({nilaiTugas:a.data.result.tugas,nilaiKuis:a.data.result.kuis,nilaiUjian:a.data.result.ujian})}))}},{key:"closeProsentase",value:function(){this.setState({nilaiTugas:0,nilaiKuis:0,nilaiUjian:0,openProsentase:!1})}},{key:"closeModal",value:function(){this.fetchPelajaran(),this.setState({openSilabus:!1,silabus:[],pelajaranId:"",pelajaranNama:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0})}},{key:"clearFormSilabus",value:function(){this.setState({silabusId:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0,files:null,tempFiles:Math.random().toString(36)})}},{key:"clearForm",value:function(){this.setState({idPelajaran:"",namaPelajaran:"",kategori:"",kodePelajaran:"",kelas:""})}},{key:"componentDidMount",value:function(){this.fetchPelajaran(),this.fetchKelas()}},{key:"fetchKelas",value:function(){var a=this;d.l.get("".concat(d.a,"v2/kelas/company/").concat(m.a.get("user").data.company_id)).then((function(e){e.data.error&&u.b.warning("Error fetch data kelas"),a.setState({listKelas:e.data.result})}))}},{key:"fetchPelajaran",value:function(){var a=this;d.l.get("".concat(d.a,"v2/pelajaran/company/").concat(m.a.get("user").data.company_id)).then((function(e){e.data.error&&u.b.warning("Error fetch data kelas"),a.setState({listPelajaran:e.data.result})}))}},{key:"fetchSilabus",value:function(a){var e=this;d.l.get("".concat(d.a,"v2/silabus/pelajaran/").concat(a)).then((function(a){a.data.error&&u.b.info("Error: fetch silabus"),e.setState({silabus:a.data.result})}))}},{key:"addKuisSilabus",value:function(a){var e=this,t={pelajaranId:this.state.pelajaranId,sesi:this.state.sesi,topik:this.state.topik,tujuan:this.state.tujuan,deskripsi:this.state.deskripsi,jenis:a};this.state.silabusId?d.l.put("".concat(d.a,"v2/silabus/update/").concat(this.state.silabusId),t).then((function(a){a.data.error&&u.b.warning("Error: edit silabus"),e.state.files&&e.uploadFile(e.state.silabusId),e.fetchSilabus(e.state.pelajaranId),e.clearFormSilabus()})):d.l.post("".concat(d.a,"v2/silabus/create"),t).then((function(a){a.data.error&&u.b.warning("Error: create silabus"),e.state.files&&e.uploadFile(a.data.result.id),e.fetchSilabus(e.state.pelajaranId),e.clearFormSilabus()}))}},{key:"uploadFile",value:function(a){for(var e=this,t=new FormData,n=0;n<this.state.files.length;n++)t.append("files",this.state.files[n]);d.l.put("".concat(d.a,"v2/silabus/files/").concat(a),t).then((function(a){a.data.error&&u.b.warning("Error: upload file"),e.fetchSilabus(e.state.pelajaranId)}))}},{key:"render",value:function(){var a=this;m.a.get("user").data.level;return o.a.createElement("div",{className:"pcoded-main-container"},o.a.createElement("div",{className:"pcoded-wrapper"},o.a.createElement("div",{className:"pcoded-content"},o.a.createElement("div",{className:"pcoded-inner-content"},o.a.createElement("div",{className:"main-body"},o.a.createElement("div",{className:"page-wrapper"},o.a.createElement("div",{className:"floating-back"},o.a.createElement(b.b,{to:"/"},o.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90}))),o.a.createElement("div",{className:"row mt-3"},o.a.createElement("div",{className:"col-sm-12"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},o.a.createElement("h4",{className:"f-w-900 f-18 fc-blue"},"Pelajaran")),o.a.createElement("div",{className:"card-body",style:{padding:"5px"}},o.a.createElement("table",{className:"table table-striped"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"No"),o.a.createElement("th",null,"Kode"),o.a.createElement("th",null,"Pelajaran"),o.a.createElement("th",null,"Category"),o.a.createElement("th",null,"Silabus"),o.a.createElement("th",null,"Bobot %"))),o.a.createElement("tbody",null,this.state.listPelajaran.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,t+1),o.a.createElement("td",null,e.kode_pelajaran),o.a.createElement("td",null,e.nama_pelajaran),o.a.createElement("td",null,e.kategori),o.a.createElement("td",{style:{padding:"12px"}},e.silabus>0?o.a.createElement("span",{onClick:a.openSilabus,"data-id":e.pelajaran_id,"data-title":e.nama_pelajaran,className:"silabus"},o.a.createElement("i",{className:"fa fa-".concat(e.silabus>0?"share":"plus")})," Open"):null),o.a.createElement("td",{style:{padding:"12px"}},o.a.createElement("span",{onClick:a.openProsentase,"data-id":e.pelajaran_id,"data-title":e.nama_pelajaran,className:"silabus"},o.a.createElement("i",{className:"fa fa-cog"})," Open")))})))),o.a.createElement(p.a,{show:this.state.openProsentase,onHide:this.closeProsentase.bind(this)},o.a.createElement(p.a.Header,{closeButton:!0},o.a.createElement(p.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},this.state.pelajaranNama)),o.a.createElement(p.a.Body,null,o.a.createElement("form",{onSubmit:this.saveProsentase},o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("label",null,"Tugas"),o.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiTugas,onChange:function(e){return a.setState({nilaiTugas:e.target.value})}})),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("label",null,"Kuis"),o.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiKuis,onChange:function(e){return a.setState({nilaiKuis:e.target.value})}})),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("label",null,"Ujian"),o.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiUjian,onChange:function(e){return a.setState({nilaiUjian:e.target.value})}})))))),o.a.createElement(p.a,{show:this.state.openSilabus,onHide:this.closeModal.bind(this),dialogClassName:"modal-lg modal-1000-large"},o.a.createElement(p.a.Header,{closeButton:!0},o.a.createElement(p.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},"Silabus ",this.state.pelajaranNama)),o.a.createElement(p.a.Body,null,o.a.createElement("table",{className:"table table-striped"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Sesi"),o.a.createElement("th",null,"Topik"),o.a.createElement("th",null,"Tujuan"),o.a.createElement("th",null,"Deskripsi"),o.a.createElement("th",null,"Files"))),o.a.createElement("tbody",null,this.state.silabus.map((function(a,e){return 0===a.jenis?o.a.createElement("tr",{key:e},o.a.createElement("td",null,a.sesi),o.a.createElement("td",null,a.topik),o.a.createElement("td",null,a.tujuan),o.a.createElement("td",null,a.deskripsi),o.a.createElement("td",{style:{padding:"12px"}},a.files?o.a.createElement("a",{href:a.files,target:"_blank",className:"silabus"},"Open"):"No files")):o.a.createElement("tr",{key:e},o.a.createElement("td",null,a.sesi),o.a.createElement("td",{colSpan:"4",className:"text-center"},1==a.jenis?"Kuis":"Ujian"))}))))))))))))))))}}]),e}(o.a.Component);e.default=h}}]);
//# sourceMappingURL=137.2d4c0c76.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[127],{1510:function(e,a,t){"use strict";t.r(a);var l=t(0),s=t.n(l),n=t(455),r=t(3),i=t(2),m=t(277),c=t.n(m),o=t(303),d=t.n(o),p=(t(464),t(229)),u=t(18);class h extends l.Component{constructor(){super(...arguments),this.state={company_id:"",branch_id:"",grup_id:"",identity:"",name:"",email:"",alertemail:"",phone:"",address:"",password:"",level:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],responseMessage:"",responseEmail:"",responsePhone:"",optionsGroup:[],valueGroup:[]},this.handleChangeValidity=e=>{this.setState({validity:e})},this.onChangeInput=e=>{const a=e.target,t=a.value,l=a.name;"email"===l?r.l.get("".concat(r.a,"v1/user/cek/email/").concat(t)).then(e=>{e.data.error?(a.value="",this.setState({alertemail:"Email sudah terdaftar dan aktif. gunakan email lain"})):this.setState({[l]:t,alertemail:""})}):"address"===l?t.length<=100?this.setState({[l]:t}):this.setState({responseMessage:"Cannot exceed the character limit.",[l]:t.slice(0,a.maxLength)}):this.setState({[l]:t})},this.submitForm=e=>{e.preventDefault();let a=0==this.state.unlimited?"1":"0";const t={company_id:this.state.company_id,branch_id:0,grup_id:this.state.grup_id,group:this.state.valueGroup,identity:this.state.identity,name:this.state.name,email:this.state.email,phone:this.state.phone,address:this.state.address,password:this.state.password,level:this.state.level,status:"active",unlimited:a,validity:this.state.validity.toISOString().split("T")[0]};""===t.company_id||""==t.group||""===t.grup_id||""===t.name||""===t.identity||""===t.email||""===t.level?u.b.warning("Please fill required field."):r.l.post("".concat(r.a,"v1/user"),t).then(e=>{200===e.status&&(e.data.error?this.setState({responseMessage:e.data.result}):"superadmin"===i.a.get("User").data.level||"superadmin"===i.a.get("User").data.level?this.props.history.push("/user"):this.props.history.push("/my-company"))})}}toggleSwitch(e){this.setState({unlimited:!this.state.unlimited})}componentDidMount(){r.l.get("".concat(r.j).concat(i.a.get("user").data.email)).then(e=>{200===e.status&&(this.setState({company_id:localStorage.getItem("companyID")?localStorage.getItem("companyID"):e.data.result.company_id}),r.l.get("".concat(r.a,"v1/branch/company/").concat(this.state.company_id)).then(e=>{200===e.status&&(this.setState({listBranch:e.data.result[0]}),e.data.result[0].map(e=>{this.state.optionsGroup.push({value:e.branch_id,label:e.branch_name})}))}),r.l.get("".concat(r.a,"v1/grup/company/").concat(this.state.company_id)).then(e=>{200===e.status&&this.setState({listGrup:e.data.result})}))})}render(){return s.a.createElement("div",{className:"pcoded-main-container"},s.a.createElement("div",{className:"pcoded-wrapper"},s.a.createElement("div",{className:"pcoded-content"},s.a.createElement("div",{className:"pcoded-inner-content"},s.a.createElement("div",{className:"main-body"},s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-12"},s.a.createElement("h3",{className:"f-24 f-w-800"},"User Management"),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-block"},s.a.createElement("form",{onSubmit:e=>this.submitForm(e)},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Group"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement(p.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:e=>this.setState({valueGroup:e}),mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Role"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},s.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map(e=>s.a.createElement("option",{value:e.grup_id},e.grup_name)))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"}," Name "),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"}," Registration Number "),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"001",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Email"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{type:"email",required:!0,name:"email",className:"form-control",placeholder:"example@domain.com",onChange:this.onChangeInput}),s.a.createElement(n.a.Text,{className:"text-danger"},this.state.alertemail),s.a.createElement(n.a.Text,{className:"text-muted"},"Pastikan isi sesuai dengan format email ex. user@email.com")),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Phone"),s.a.createElement("input",{type:"text",name:"phone",className:"form-control",placeholder:"08119680220",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Address"),s.a.createElement("textarea",{maxLength:"100",name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput}),s.a.createElement(n.a.Text,{className:"text-muted"},"Maksimal 100 karakter untuk alamat")),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Level"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("select",{name:"level",className:"form-control",onChange:this.onChangeInput,required:!0,style:{textTransform:"capitalize"}},s.a.createElement("option",{value:""},"-- Select --"),[{level:"admin"},{level:"client"}].map(e=>s.a.createElement("option",{value:e.level},"client"===e.level?"User":e.level)))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Password"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{type:"password",name:"password",required:!0,className:"form-control",placeholder:"Password",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(c.a,{checked:!1,onChange:this.toggleSwitch.bind(this),checked:this.state.unlimited}))),this.state.unlimited&&s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(d.a,{selected:this.state.validity,onChange:this.handleChangeValidity,showTimeSelect:!0,dateFormat:"yyyy-MM-dd"}))),s.a.createElement("div",{style:{marginTop:"50px"}},this.state.responseMessage&&s.a.createElement("div",{class:"alert alert-primary",role:"alert"},s.a.createElement("b",null,"ALERT")," Please check you data before submit. ",this.state.responseMessage)),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-10 f-20 f-w-600"},"Save"))))))))))))}}a.default=h}}]);
//# sourceMappingURL=127.3cf946af.chunk.js.map
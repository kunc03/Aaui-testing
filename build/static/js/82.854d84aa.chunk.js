(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[82],{1365:function(e,a,t){"use strict";t.r(a);var l=t(0),s=t.n(l),n=t(455),i=t(3),m=t(277),r=t.n(m),o=t(303),c=t.n(o),p=(t(464),t(229)),u=(t(118),t(18));class d extends l.Component{constructor(){super(...arguments),this.state={company_id:"",branch_id:"",optionComapny:[],valueCompany:[],level_multicompany:"client",identity:"",name:"",email:"",alertemail:"",phone:"",address:"",password:"",level:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],responseMessage:"",responseEmail:"",responsePhone:"",optionsGroup:[],valueGroup:[],isbuttonDisabled:!1},this.handleChangeValidity=e=>{this.setState({validity:e})},this.onChangeInput=e=>{const a=e.target,t=a.value,l=a.name;"email"===l?(this.setState({isbuttonDisabled:!0}),i.l.get("".concat(i.a,"v1/user/cek/email/").concat(t)).then(e=>{e.data.error?(a.value="",this.setState({alertemail:"Email sudah terdaftar dan aktif. gunakan email lain"})):(this.setState({[l]:t,alertemail:""}),setTimeout(()=>{this.setState({isbuttonDisabled:!1})},600))})):"company_id"===l?i.l.get("".concat(i.a,"v1/branch/company/").concat(t)).then(e=>{200===e.status&&(this.setState({listBranch:e.data.result[0],company_id:t,listGrup:e.data.result[1]}),e.data.result[0].map(e=>{this.state.optionsGroup.push({value:e.branch_id,label:e.branch_name})}),this.showMultipleCompany(t))}):this.setState({[l]:t})},this.submitForm=e=>{e.preventDefault();let a=0==this.state.unlimited?"1":"0";const t={company_id:this.state.company_id,multi_company:this.state.valueCompany,branch_id:0,grup_id:this.state.grup_id,group:this.state.valueGroup,identity:this.state.identity,name:this.state.name,email:this.state.email,phone:this.state.phone,address:this.state.address,level:this.state.level,status:"active",unlimited:a,validity:this.state.validity.toISOString().split("T")[0]};""===t.company_id||""==t.group||""===t.grup_id||""===t.name||""===t.identity||""===t.email||""===t.level?u.b.warning("Please fill required field."):i.l.post("".concat(i.a,"v1/user"),t).then(e=>{if(200===e.status)if(e.data.error)this.setState({responseMessage:e.data.result});else{let a=e.data.result.user_id;i.l.delete("".concat(i.a,"v1/user/assign/").concat(e.data.result.user_id)).then(e=>{if(200===e.status)for(let t=0;t<this.state.valueCompany.length;t++){let e={user_id:a,company_id:this.state.valueCompany[t],level_multicompany:this.state.level_multicompany};i.l.post("".concat(i.a,"v1/user/assign"),e)}}),this.props.history.push("/company-detail-super/".concat(t.company_id))}})}}toggleSwitch(e){this.setState({unlimited:!this.state.unlimited})}showMultipleCompany(e){i.l.get("".concat(i.a,"v1/company")).then(a=>{this.setState({valueCompany:[]}),this.setState({optionComapny:[]}),a.data.result.map(e=>{this.state.optionComapny.push({value:e.company_id,label:e.company_name})}),this.setState({optionComapny:this.state.optionComapny.filter(a=>a.value!=e)})})}componentDidMount(){i.l.get("".concat(i.a,"v1/company")).then(e=>{200===e.status&&this.setState({listCompany:e.data.result})})}render(){const e=[{level:"superadmin"},{level:"admin"},{level:"client"}];return s.a.createElement("div",{className:"pcoded-main-container"},s.a.createElement("div",{className:"pcoded-wrapper"},s.a.createElement("div",{className:"pcoded-content"},s.a.createElement("div",{className:"pcoded-inner-content"},s.a.createElement("div",{className:"main-body"},s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-12"},s.a.createElement("h3",{className:"f-24 f-w-800"},"Add User Management"),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-block"},s.a.createElement("form",{onSubmit:e=>this.submitForm(e)},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Company"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("select",{required:!0,className:"form-control",name:"company_id",onChange:this.onChangeInput},s.a.createElement("option",{value:""},"-- Select --"),this.state.listCompany.map(e=>s.a.createElement("option",{value:e.company_id},e.company_name)))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Level"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("select",{style:{textTransform:"capitalize"},name:"level",className:"form-control",onChange:this.onChangeInput,required:!0},s.a.createElement("option",{value:""},"-- Select --"),e.map(e=>s.a.createElement("option",{value:e.level},"client"===e.level?"User":e.level)))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Multiple Company"),s.a.createElement(p.MultiSelect,{id:"multicompany",options:this.state.optionComapny,value:this.state.valueCompany,onChange:e=>this.setState({valueCompany:e}),mode:"tags",removableTags:!0,hasSelectAll:!0,selectAllLabel:"Choose all",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Company"})),this.state.valueCompany.length>0?s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Level Multicompany"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("select",{style:{textTransform:"capitalize"},name:"level_multicompany",className:"form-control",onChange:e=>this.setState({level_multicompany:e.target.value})},s.a.createElement("option",{value:""},"-- Select --"),e.map(e=>s.a.createElement("option",{value:e.level},"client"===e.level?"User":e.level)))):null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Group"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement(p.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:e=>this.setState({valueGroup:e}),mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Role"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},s.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map(e=>s.a.createElement("option",{value:e.grup_id},e.grup_name)))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"}," Name "),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"}," Registration Number "),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"001",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Email"),s.a.createElement(n.a.Text,{className:"text-danger"},"Required"),s.a.createElement("input",{type:"email",required:!0,name:"email",className:"form-control",placeholder:"example@domain.com",onChange:this.onChangeInput}),s.a.createElement(n.a.Text,{className:"text-danger"},this.state.alertemail)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Phone"),s.a.createElement("input",{type:"text",name:"phone",className:"form-control",placeholder:"08119680220",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input"},"Address"),s.a.createElement("textarea",{name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(r.a,{checked:!1,onChange:this.toggleSwitch.bind(this),checked:this.state.unlimited}))),this.state.unlimited&&s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(c.a,{selected:this.state.validity,onChange:this.handleChangeValidity,showTimeSelect:!0,dateFormat:"yyyy-MM-dd"}))),s.a.createElement("div",{style:{marginTop:"50px"}},this.state.responseMessage&&s.a.createElement("div",{class:"alert alert-primary",role:"alert"},s.a.createElement("b",null,"ALERT")," Please check you data before submit. ",this.state.responseMessage)),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-100 f-20 f-w-600",disabled:this.state.isbuttonDisabled},"Save"))))))))))))}}a.default=d}}]);
//# sourceMappingURL=82.854d84aa.chunk.js.map
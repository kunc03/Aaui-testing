(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[80],{1402:function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n),a=i(18),o=i(3),r=i(2),l=i(305),c=i(229);class d extends n.Component{constructor(e){super(e),this.closeModalDelete=e=>{this.setState({modalDelete:!1,deleteId:""})},this.autoSave=e=>{if(this.setState({isSaving:!0}),this.state.edited||e)if(this.state.title&&this.state.overview&&this.state.answer.length){if(this.state.id){let e={image:this.state.image,title:this.state.title,overview:this.state.overview,session:this.state.session,created_by:r.a.get("user").data.user_id};o.l.put("".concat(o.a,"v2/training/course/").concat(this.state.id),e).then(e=>{if(e.data.error)a.b.error("Error edit course");else if(this.state.image){let e=new FormData;e.append("image",this.state.image),o.l.put("".concat(o.a,"v2/training/course/image/").concat(this.state.id),e).then(e=>{e.data.error?(a.b.warning("Course edited but fail to upload image"),this.setState({edited:!1,isSaving:!1})):(a.b.success("Automatic saving"),this.setState({edited:!1,isSaving:!1}))})}else a.b.success("Automatic saving"),this.setState({edited:!1,isSaving:!1})})}}else a.b.warning("Some field is required, please check your data."),this.setState({isSaving:!1});else this.setState({isSaving:!1})},this.save=(e,t)=>{if(this.setState({isSaving:!0}),e.preventDefault(),this.state.valueLicensesType.length&&this.state.valueCourse.length&&this.state.answer.length)if(this.state.id){let e={training_course_id:String(this.state.valueCourse),licenses_type_id:String(this.state.valueLicensesType),question:this.state.question_text,answer:this.state.answer,explanation:this.state.explanation,options:[{option_label:"A",option_text:this.state.optionA},{option_label:"B",option_text:this.state.optionB},{option_label:"C",option_text:this.state.optionC},{option_label:"D",option_text:this.state.optionD},{option_label:"E",option_text:this.state.optionE}]};o.l.put("".concat(o.a,"v2/training/questions/").concat(this.state.id),e).then(e=>{e.data.error?a.b.error("Error edit questions"):(a.b.success("Question edited"),this.props.history.push("/training/questions"))})}else{let e={training_course_id:String(this.state.valueCourse),licenses_type_id:String(this.state.valueLicensesType),question:this.state.question_text,answer:this.state.answer,explanation:this.state.explanation,options:[{option_label:"A",option_text:this.state.optionA},{option_label:"B",option_text:this.state.optionB},{option_label:"C",option_text:this.state.optionC},{option_label:"D",option_text:this.state.optionD},{option_label:"E",option_text:this.state.optionE}]};o.l.post("".concat(o.a,"v2/training/questions"),e).then(e=>{e.data.error?a.b.error("Error create questions"):(a.b.success("New questions added"),this.props.history.push("/training/questions"))})}else a.b.warning("Some field is required, please check your data."),this.setState({isSaving:!1})},this.handleChangeOpt=e=>{let{name:t,value:i}=e.target;this.setState({[t]:i})},this.handleChangeAnswer=e=>{this.setState({answer:e})},this.handleDynamicInput=e=>{this.setState({question_text:e})},this.handleDynamicInput2=e=>{this.setState({explanation:e})},this.handleOverview=e=>{this.setState({overview:e,edited:!0})},this.handleChange=e=>{this.setState({edited:!0});let{name:t,value:i}=e.target;if("media"===t){if(e.target.files.length)if(e.target.files[0].size<=5e8){this.setState({isUploading:!0});let t=new FormData;t.append("media",e.target.files[0]),o.l.post("".concat(o.a,"v2/training/course/session/media/").concat(this.state.selectedSession),t).then(e=>{if(e.data.error)a.b.warning("Fail to upload image"),this.setState({isUploading:!1});else{this.state.session.indexOf(this.state.session.filter(e=>e.id===this.state.selectedSession)[0]);let t=this.state.media;t.push({id:e.data.result.id,name:e.data.result.name,url:e.data.result.url}),this.setState({media:t,isUploading:!1})}})}else e.target.value=null,a.b.warning("Image size cannot larger than 5MB and must be an image file")}else if("image"===t){if(e.target.files.length)if(e.target.files[0].size<=5e6){let t={image:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])};this.setState(t)}else e.target.value=null,a.b.warning("Image size cannot larger than 5MB and must be an image file")}else if("session_title"===t){this.setState({[t]:i});let e=this.state.session.indexOf(this.state.session.filter(e=>e.id===this.state.selectedSession)[0]),n={id:this.state.selectedSession,title:i,content:this.state.content,sort:e,media:this.state.media};this.state.session.splice(e,1,n)}else this.setState({[t]:i})},this.selectSession=e=>{this.state.selectedSession!==e?(this.autoSave(),this.setState({initialSession:!0,selectedSession:this.state.session.filter(t=>t.id===e)[0].id,session_title:this.state.session.filter(t=>t.id===e)[0].title,content:this.state.session.filter(t=>t.id===e)[0].content,media:this.state.session.filter(t=>t.id===e)[0].media})):this.setState({initialSession:!0,selectedSession:this.state.session.filter(t=>t.id===e)[0].id,session_title:this.state.session.filter(t=>t.id===e)[0].title,content:this.state.session.filter(t=>t.id===e)[0].content,media:this.state.session.filter(t=>t.id===e)[0].media})},this.state={edited:!1,initialSession:!1,id:this.props.match.params.id?this.props.match.params.id:"",companyId:"",image:"",logo:"",imagePreview:"assets/images/no-image.png",name:"",address:"",telephone:"",fax:"",website:"",email:"",isUploading:!1,isSaving:!1,explanation:"Loading...",optionA:"",optionB:"",optionC:"",optionD:"",optionE:"",optionsLicensesType:[],valueLicensesType:[],optionsCourse:[],valueCourse:[],answer:"",question_text:"Loading...",content:"Loading...",title:"",overview:"Loading...",session_title:"",file:"",selectedSession:"",media:[],modalDelete:!1,disabledForm:this.props.disabledForm&&this.props.id,session:[]},this.goBack=this.goBack.bind(this)}goBack(){this.props.goBack?this.props.goBack():this.props.history.push("/training/questions")}getData(e){o.l.get("".concat(o.a,"v2/training/questions/read/").concat(e)).then(e=>{e.data.error?a.b.error("Error read questions"):this.setState({id:e.data.result.id,question_text:e.data.result.question,explanation:e.data.result.explanation,answer:e.data.result.answer,valueCourse:[e.data.result.training_course_id],valueLicensesType:[e.data.result.licenses_type_id],optionA:e.data.result.options.filter(e=>"A"===e.option_label).length?e.data.result.options.filter(e=>"A"===e.option_label)[0].option_text:"",optionB:e.data.result.options.filter(e=>"B"===e.option_label).length?e.data.result.options.filter(e=>"B"===e.option_label)[0].option_text:"",optionC:e.data.result.options.filter(e=>"C"===e.option_label).length?e.data.result.options.filter(e=>"C"===e.option_label)[0].option_text:"",optionD:e.data.result.options.filter(e=>"D"===e.option_label).length?e.data.result.options.filter(e=>"D"===e.option_label)[0].option_text:"",optionE:e.data.result.options.filter(e=>"E"===e.option_label).length?e.data.result.options.filter(e=>"E"===e.option_label)[0].option_text:""})})}getUserData(){o.l.get("".concat(o.j).concat(r.a.get("user").data.email)).then(e=>{200===e.status&&this.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):e.data.result.company_id},()=>{o.l.get("".concat(o.a,"v2/training/settings/licenses-type/").concat(this.state.companyId)).then(e=>{e.data.error?a.b.error("Error read licenses type"):e.data.result.map(e=>{this.state.optionsLicensesType.push({label:e.notes.length?"".concat(e.name," - ").concat(e.notes):e.name,value:e.id})})}),o.l.get("".concat(o.a,"v2/training/course-list-admin/").concat(this.state.companyId)).then(e=>{e.data.error?a.b.error("Error read course list"):(e.data.result.map(e=>{this.state.optionsCourse.push({label:e.title,value:e.id})}),this.props.disabledForm&&this.props.id?this.getData(this.props.id):this.props.match.params.id?this.getData(this.props.match.params.id):this.setState({question_text:"",explanation:""}))})})})}componentDidMount(){this.getUserData()}clearSessionForm(){this.setState({edited:!1,selectedSession:"",session_title:"",content:"",media:[]})}deleteSession(){o.l.delete("".concat(o.a,"v2/training/course/session/").concat(this.state.selectedSession)).then(e=>{if(e.data.error)a.b.error("Error delete course");else{let e=this.state.session.indexOf(this.state.session.filter(e=>e.id===this.state.selectedSession)[0]),t=(this.state.session[e].id,this.state.session);t.splice(e,1),this.setState({session:t}),t.length?this.selectSession(t[0].id):(this.setState({initialSession:!1}),this.clearSessionForm()),this.closeModalDelete()}})}addNewSession(){if(this.state.title){let e={course_id:this.props.match.params.id?this.props.match.params.id:this.state.id,title:"",content:"",sort:this.state.session.length};o.l.post("".concat(o.a,"v2/training/course/session"),e).then(e=>{e.data.error?a.b.error("Error create session"):this.setState({initialSession:!0},()=>{this.session_title.focus(),this.state.session.push({id:e.data.result.insertId,title:"",content:"",sort:this.state.session.length,media:[]});let t=this.state.session[this.state.session.length-1].id;this.setState({initialSession:!0,selectedSession:this.state.session.filter(e=>e.id===t)[0].id,session_title:this.state.session.filter(e=>e.id===t)[0].title,content:this.state.session.filter(e=>e.id===t)[0].content,media:this.state.session.filter(e=>e.id===t)[0].media}),this.forceUpdate()})})}else a.b.warning("Some field is required, please check your data."),this.setState({isSaving:!1})}handleOnDragEnd(e){if(!e.destination)return;const t=Array.from(this.state.session),[i]=t.splice(e.source.index,1);t.splice(e.destination.index,0,i),this.setState({session:t},()=>{this.autoSave(!0)})}render(){let{session:e,media:t}=this.state;return s.a.createElement("div",{className:"pcoded-main-container"},s.a.createElement("div",{className:"pcoded-wrapper"},s.a.createElement("div",{className:"pcoded-content"},s.a.createElement("div",{className:"pcoded-inner-content"},s.a.createElement("div",{className:"main-body"},s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("div",{className:"floating-back"},s.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90,onClick:this.goBack})),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-12"},s.a.createElement("div",null,s.a.createElement("div",{className:"card p-20"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-10 m-b-20"},s.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},this.props.id?"Detail":this.props.match.params.id?"Edit":"Create New"," Questions")),s.a.createElement("div",{className:"col-sm-2 m-b-20"},this.props.disabledForm&&s.a.createElement("button",{onClick:this.props.goEdit,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},s.a.createElement("i",{className:"fa fa-edit"}),"Edit"))),s.a.createElement("div",{className:"form-section"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12 m-b-20"},s.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Questions Configuration"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"form-field-top-label",style:{width:400}},s.a.createElement("label",{for:"licenses"},"Licenses Type",s.a.createElement("required",null,"*")),s.a.createElement(c.MultiSelect,{id:"licenses",options:this.state.optionsLicensesType,value:this.state.valueLicensesType,onChange:e=>this.setState({valueLicensesType:e}),mode:"single",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Licenses Type"})),s.a.createElement("div",{className:"form-field-top-label",style:{width:400}},s.a.createElement("label",{for:"course"},"Course",s.a.createElement("required",null,"*")),s.a.createElement(c.MultiSelect,{id:"course",options:this.state.optionsCourse,value:this.state.valueCourse,onChange:e=>this.setState({valueCourse:e}),mode:"single",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Course"})))),s.a.createElement("div",{className:"form-section no-border"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12 m-b-20"},s.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Questions & Answers"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"form-field-top-label",style:{width:"80%"}},s.a.createElement("label",{for:"name"},"Question",s.a.createElement("required",null,"*")),s.a.createElement("input",{id:"myFile",type:"file",name:"myFile",style:{display:"none"},onChange:""}),"Loading..."!==this.state.question_text?s.a.createElement(l.a,{apiKey:"j18ccoizrbdzpcunfqk7dugx72d7u9kfwls7xlpxg7m21mb5",initialValue:this.state.question_text,value:this.state.question_text,init:{height:400,width:"100%",menubar:!1,convert_urls:!1,image_class_list:[{title:"None",value:""},{title:"Responsive",value:"img-responsive"},{title:"Thumbnail",value:"img-responsive img-thumbnail"}],file_browser_callback_types:"image",file_picker_callback:function(e,t,i){if("image"==i.filetype){var n=document.getElementById("myFile");n.click(),n.onchange=function(){var t=new FormData;t.append("file",this.files[0]),window.$.ajax({url:"".concat(o.a,"v2/media/upload"),type:"POST",data:t,processData:!1,contentType:!1,success:t=>{e(t.result.url),this.value=""}})}}},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | bold italic backcolor |                                                                                 alignleft aligncenter alignright alignjustify | image |                                                                                     bullist numlist outdent indent | removeformat | help"},onEditorChange:e=>this.handleDynamicInput(e)}):null),s.a.createElement("div",{className:"form-field-top-label exam-option ".concat("A"===this.state.answer&&" answer")},s.a.createElement("label",{for:"optionA"},"Option A"),s.a.createElement("input",{type:"text",name:"optionA",id:"optionA",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionA}),s.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"A")}),s.a.createElement("p",null,"This is the correct answer")),s.a.createElement("div",{className:"form-field-top-label exam-option ".concat("B"===this.state.answer&&" answer")},s.a.createElement("label",{for:"optionB"},"Option B"),s.a.createElement("input",{type:"text",name:"optionB",id:"optionB",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionB}),s.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"B")}),s.a.createElement("p",null,"This is the correct answer")),s.a.createElement("div",{className:"form-field-top-label exam-option ".concat("C"===this.state.answer&&" answer")},s.a.createElement("label",{for:"optionC"},"Option C"),s.a.createElement("input",{type:"text",name:"optionC",id:"optionC",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionC}),s.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"C")}),s.a.createElement("p",null,"This is the correct answer")),s.a.createElement("div",{className:"form-field-top-label exam-option ".concat("D"===this.state.answer&&" answer")},s.a.createElement("label",{for:"optionD"},"Option D"),s.a.createElement("input",{type:"text",name:"optionD",id:"optionD",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionD}),s.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"D")}),s.a.createElement("p",null,"This is the correct answer")),s.a.createElement("div",{className:"form-field-top-label exam-option ".concat("E"===this.state.answer&&" answer")},s.a.createElement("label",{for:"optionE"},"Option E"),s.a.createElement("input",{type:"text",name:"optionE",id:"optionE",placeholder:"Nothing",onChange:this.handleChangeOpt,value:this.state.optionE}),s.a.createElement("i",{className:"fa fa-check-circle",onClick:this.handleChangeAnswer.bind(this,"E")}),s.a.createElement("p",null,"This is the correct answer")),s.a.createElement("div",{className:"form-field-top-label",style:{width:"80%"}},s.a.createElement("label",{for:"name"},"Explanation"),s.a.createElement("input",{id:"myFile",type:"file",name:"myFile",style:{display:"none"},onChange:""}),"Loading..."!==this.state.explanation?s.a.createElement(l.a,{apiKey:"j18ccoizrbdzpcunfqk7dugx72d7u9kfwls7xlpxg7m21mb5",initialValue:this.state.explanation,value:this.state.explanation,init:{height:240,width:"100%",menubar:!1,convert_urls:!1,image_class_list:[{title:"None",value:""},{title:"Responsive",value:"img-responsive"},{title:"Thumbnail",value:"img-responsive img-thumbnail"}],file_browser_callback_types:"image",file_picker_callback:function(e,t,i){if("image"==i.filetype){var n=document.getElementById("myFile");n.click(),n.onchange=function(){var t=new FormData;t.append("file",this.files[0]),window.$.ajax({url:"".concat(o.a,"v2/media/upload"),type:"POST",data:t,processData:!1,contentType:!1,success:t=>{e(t.result.url),this.value=""}})}}},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | bold italic backcolor |                                                                                 alignleft aligncenter alignright alignjustify | image |                                                                                     bullist numlist outdent indent | removeformat | help"},onEditorChange:e=>this.handleDynamicInput2(e)}):null))),s.a.createElement("div",{className:"row",style:{justifyContent:"flex-end"}},!this.props.disabledForm&&s.a.createElement("button",{disabled:this.state.isSaving,onClick:this.save,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},s.a.createElement("i",{className:"fa fa-save"}),this.state.isSaving?"Saving...":"Save"))))))))))))}}t.default=d},305:function(e,t,i){"use strict";var n=i(0),s=i(9),a=function(){return(a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},o={onActivate:s.func,onAddUndo:s.func,onBeforeAddUndo:s.func,onBeforeExecCommand:s.func,onBeforeGetContent:s.func,onBeforeRenderUI:s.func,onBeforeSetContent:s.func,onBeforePaste:s.func,onBlur:s.func,onChange:s.func,onClearUndos:s.func,onClick:s.func,onContextMenu:s.func,onCopy:s.func,onCut:s.func,onDblclick:s.func,onDeactivate:s.func,onDirty:s.func,onDrag:s.func,onDragDrop:s.func,onDragEnd:s.func,onDragGesture:s.func,onDragOver:s.func,onDrop:s.func,onExecCommand:s.func,onFocus:s.func,onFocusIn:s.func,onFocusOut:s.func,onGetContent:s.func,onHide:s.func,onInit:s.func,onKeyDown:s.func,onKeyPress:s.func,onKeyUp:s.func,onLoadContent:s.func,onMouseDown:s.func,onMouseEnter:s.func,onMouseLeave:s.func,onMouseMove:s.func,onMouseOut:s.func,onMouseOver:s.func,onMouseUp:s.func,onNodeChange:s.func,onObjectResizeStart:s.func,onObjectResized:s.func,onObjectSelected:s.func,onPaste:s.func,onPostProcess:s.func,onPostRender:s.func,onPreProcess:s.func,onProgressState:s.func,onRedo:s.func,onRemove:s.func,onReset:s.func,onSaveContent:s.func,onSelectionChange:s.func,onSetAttrib:s.func,onSetContent:s.func,onShow:s.func,onSubmit:s.func,onUndo:s.func,onVisualAid:s.func},r=a({apiKey:s.string,id:s.string,inline:s.bool,init:s.object,initialValue:s.string,onEditorChange:s.func,outputFormat:s.oneOf(["html","text"]),value:s.string,tagName:s.string,cloudChannel:s.string,plugins:s.oneOfType([s.string,s.array]),toolbar:s.oneOfType([s.string,s.array]),disabled:s.bool,textareaName:s.string,tinymceScriptSrc:s.string,scriptLoading:s.shape({async:s.bool,defer:s.bool,delay:s.number})},o),l=function(e){return"function"===typeof e},c=function(e){return e in o},d=function(e){return e.substr(2)},p=function(e,t,i,n,s){return function(e,t,i,n,s,a,o){var r=Object.keys(s).filter(c),l=Object.keys(a).filter(c),p=r.filter((function(e){return void 0===a[e]})),u=l.filter((function(e){return void 0===s[e]}));p.forEach((function(e){var t=d(e),n=o[t];i(t,n),delete o[t]})),u.forEach((function(i){var s=n(e,i),a=d(i);o[a]=s,t(a,s)}))}(s,e.on.bind(e),e.off.bind(e),(function(t,i){return function(n){var s;return null===(s=t(i))||void 0===s?void 0:s(n,e)}}),t,i,n)},u=0,h=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++u+String(t)},m=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},f=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},g=function(){return{listeners:[],scriptId:h("tiny-script"),scriptLoading:!1,scriptLoaded:!1}},v=function(){var e=g();return{load:function(t,i,n,s,a,o){var r=function(){return function(e,t,i,n,s,a){var o=t.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=e,o.src=i,o.async=n,o.defer=s;var r=function(){o.removeEventListener("load",r),a()};o.addEventListener("load",r),t.head&&t.head.appendChild(o)}(e.scriptId,t,i,n,s,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0}))};e.scriptLoaded?o():(e.listeners.push(o),e.scriptLoading||(e.scriptLoading=!0,a>0?setTimeout(r,a):r()))},reinitialize:function(){e=g()}}}(),b=i(424),y=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),E=function(){return(E=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},S=function(e){function t(t){var i,s,a,o=e.call(this,t)||this;return o.handleEditorChange=function(e){var t,i=o.editor;if(i&&i.initialized){var n=i.getContent({format:o.props.outputFormat});n!==o.currentContent&&(o.currentContent=n,l(o.props.onEditorChange)&&o.props.onEditorChange(null!==(t=o.currentContent)&&void 0!==t?t:"",i))}},o.initialise=function(){var e=o.elementRef.current;if(e){var t=Object(b.a)();if(!t)throw new Error("tinymce should have been loaded into global scope");var i,n,s=E(E({},o.props.init),{selector:void 0,target:e,readonly:o.props.disabled,inline:o.inline,plugins:(i=o.props.init&&o.props.init.plugins,n=o.props.plugins,f(i).concat(f(n))),toolbar:o.props.toolbar||o.props.init&&o.props.init.toolbar,setup:function(t){o.editor=t,o.bindHandlers({}),o.inline&&!m(e)&&t.once("PostRender",(function(e){t.setContent(o.getInitialValue(),{no_events:!0})})),o.props.init&&l(o.props.init.setup)&&o.props.init.setup(t)}});o.inline||(e.style.visibility=""),m(e)&&(e.value=o.getInitialValue()),t.init(s)}},o.id=o.props.id||h("tiny-react"),o.elementRef=n.createRef(),o.inline=null!==(a=null!==(i=o.props.inline)&&void 0!==i?i:null===(s=o.props.init)||void 0===s?void 0:s.inline)&&void 0!==a&&a,o.boundHandlers={},o}return y(t,e),t.prototype.componentDidUpdate=function(e){var t,i=this;if(this.editor&&this.editor.initialized){if(this.bindHandlers(e),this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent({format:this.props.outputFormat}),"string"===typeof this.props.value&&this.props.value!==e.value&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact((function(){return n.setContent(i.props.value)}))}"boolean"===typeof this.props.disabled&&this.props.disabled!==e.disabled&&this.editor.setMode(this.props.disabled?"readonly":"design")}},t.prototype.componentDidMount=function(){var e,t,i,n,s,a;null!==Object(b.a)()?this.initialise():this.elementRef.current&&this.elementRef.current.ownerDocument&&v.load(this.elementRef.current.ownerDocument,this.getScriptSrc(),null!==(t=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async)&&void 0!==t&&t,null!==(n=null===(i=this.props.scriptLoading)||void 0===i?void 0:i.defer)&&void 0!==n&&n,null!==(a=null===(s=this.props.scriptLoading)||void 0===s?void 0:s.delay)&&void 0!==a?a:0,this.initialise)},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off("change keyup setcontent",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(i){t.off(i,e.boundHandlers[i])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return n.createElement(t,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return n.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSrc=function(){if("string"===typeof this.props.tinymceScriptSrc)return this.props.tinymceScriptSrc;var e=this.props.cloudChannel;return"https://cdn.tiny.cloud/1/"+(this.props.apiKey?this.props.apiKey:"no-api-key")+"/tinymce/"+e+"/tinymce.min.js"},t.prototype.getInitialValue=function(){return"string"===typeof this.props.value?this.props.value:"string"===typeof this.props.initialValue?this.props.initialValue:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){p(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var i=function(e){return void 0!==e.onEditorChange||void 0!==e.value},n=i(e),s=i(this.props);!n&&s?this.editor.on("change keyup setcontent",this.handleEditorChange):n&&!s&&this.editor.off("change keyup setcontent",this.handleEditorChange)}},t.propTypes=r,t.defaultProps={cloudChannel:"5"},t}(n.Component);i.d(t,"a",(function(){return S}))},424:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return s}));var n=function(){return"undefined"!==typeof window?window:e},s=function(){var e=n();return e&&e.tinymce?e.tinymce:null}}).call(this,i(28))}}]);
//# sourceMappingURL=80.d8b703c4.chunk.js.map
{"version":3,"sources":["components/principalEvaluasi/evaluasi.js","components/principalEvaluasi/index.js"],"names":["Evaluasi","state","guru","guruId","guruName","semester","semesterId","semesterName","kelas","kelasId","kelasName","pelajaran","pelajaranId","pelajaranName","isModal","gId","jId","sId","kId","pId","fileName","tempFile","Math","random","toString","isPreview","detailKinerja","formatKpi","menguasai","tidak","nilaiMurid","changeGuru","e","filter","kinerja","item","pengajar","target","value","findUnique","d","semester_id","getGuru","setState","nama","changeSemester","kelas_id","getSemester","changeKelas","pelajaran_id","getKelas","changePelajaran","getPelajaran","fetchNilaiMurid","openModal","getAttribute","submitKPI","preventDefault","form","FormData","append","API","post","API_SERVER","then","res","console","log","data","error","toast","warning","success","clearFilter","openPreview","detail","this","fetchKinerja","fetchNewestFormat","get","Storage","company_id","result","lulus","quiz","exam","task","length","belum","file","info","arr","predicate","found","forEach","Object","keys","map","key","dataEvaluasi","labels","datasets","label","backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","className","style","paddingBottom","onChange","disabled","selected","onClick","options","scales","yAxes","ticks","beginAtZero","min","overflowX","background","border","textTransform","width","verticalAlign","rowSpan","colSpan","isLoading","i","no_induk","class","Component","EvaluasiPrincipal","props","goBack","bind","history","level","to","src","alt"],"mappings":"6NA+XeA,E,2MArXbC,MAAQ,CACNC,KAAM,GACNC,OAAQ,GACRC,SAAU,GAEVC,SAAU,GACVC,WAAY,GACZC,aAAc,GAEdC,MAAO,GACPC,QAAS,GACTC,UAAW,GAEXC,UAAW,GACXC,YAAa,GACbC,cAAe,GAEfC,SAAS,EACTC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,IAAK,GAELC,SAAU,GACVC,SAAUC,KAAKC,SAASC,SAAS,IAEjCC,WAAW,EACXC,cAAe,GAEfC,UAAW,GAEXC,UAAW,EACXC,MAAO,EAEPC,WAAY,I,EAGdC,WAAa,SAAAC,GACX,IACIC,EADE,YAAO,EAAKhC,MAAMiC,SACRD,QAAO,SAAAE,GAAI,OAAIA,EAAKC,UAAYJ,EAAEK,OAAOC,SACrDjC,EAAW,EAAKkC,WAAWN,GAAQ,SAAAO,GAAC,OAAIA,EAAEC,eAC1CC,EAAU,YAAI,EAAKzC,MAAMC,MAAM+B,QAAO,SAAAE,GAAI,OAAIA,EAAKC,UAAYJ,EAAEK,OAAOC,SAC5E,EAAKK,SAAS,CAAExC,OAAQ6B,EAAEK,OAAOC,MAAOJ,QAASD,EAAQ7B,SAAUsC,EAAQ,GAAGE,KAAMvC,c,EAGtFwC,eAAiB,SAAAb,GACf,IACIC,EADE,YAAO,EAAKhC,MAAMiC,SACRD,QAAO,SAAAE,GAAI,OAAIA,EAAKM,aAAeT,EAAEK,OAAOC,SACxD9B,EAAQ,EAAK+B,WAAWN,GAAQ,SAAAO,GAAC,OAAIA,EAAEM,YACvCC,EAAc,YAAI,EAAK9C,MAAMI,UAAU4B,QAAO,SAAAE,GAAI,OAAIA,EAAKM,aAAeT,EAAEK,OAAOC,SACvF,EAAKK,SAAS,CAAErC,WAAY0B,EAAEK,OAAOC,MAAOJ,QAASD,EAAQ1B,aAAcwC,EAAY,GAAG1C,SAAUG,W,EAGtGwC,YAAc,SAAAhB,GACZ,IACIC,EADE,YAAO,EAAKhC,MAAMiC,SACRD,QAAO,SAAAE,GAAI,OAAIA,EAAKW,UAAYd,EAAEK,OAAOC,SACrD3B,EAAY,EAAK4B,WAAWN,GAAQ,SAAAO,GAAC,OAAIA,EAAES,gBAC3CC,EAAW,YAAI,EAAKjD,MAAMO,OAAOyB,QAAO,SAAAE,GAAI,OAAIA,EAAKW,UAAYd,EAAEK,OAAOC,SAC9E,EAAKK,SAAS,CAAElC,QAASuB,EAAEK,OAAOC,MAAOJ,QAASD,EAAQvB,UAAWwC,EAAS,GAAG1C,MAAOG,e,EAG1FwC,gBAAkB,SAAAnB,GAChB,IACIC,EADE,YAAO,EAAKhC,MAAMiC,SACRD,QAAO,SAAAE,GAAI,OAAIA,EAAKc,cAAgBjB,EAAEK,OAAOC,SACzDc,EAAe,YAAI,EAAKnD,MAAMU,WAAWsB,QAAO,SAAAE,GAAI,OAAIA,EAAKc,cAAgBjB,EAAEK,OAAOC,SAC1F,EAAKK,SAAS,CAAE/B,YAAaoB,EAAEK,OAAOC,MAAOJ,QAASD,EAAQpB,cAAeuC,EAAa,GAAGzC,YAE7F,EAAK0C,gBAAgB,EAAKpD,MAAMQ,QAASuB,EAAEK,OAAOC,Q,EAGpDgB,UAAY,SAAAtB,GACV,EAAKW,SAAS,CACZ7B,SAAS,EACTE,IAAKgB,EAAEK,OAAOkB,aAAa,eAC3BxC,IAAKiB,EAAEK,OAAOkB,aAAa,aAC3BtC,IAAKe,EAAEK,OAAOkB,aAAa,iBAC3BrC,IAAKc,EAAEK,OAAOkB,aAAa,cAC3BpC,IAAKa,EAAEK,OAAOkB,aAAa,qB,EAI/BC,UAAY,SAAAxB,GACVA,EAAEyB,iBACF,IAAIC,EAAO,IAAIC,SACfD,EAAKE,OAAO,OAAQ,EAAK3D,MAAMmB,UAC/BsC,EAAKE,OAAO,WAAY,EAAK3D,MAAMe,KACnC0C,EAAKE,OAAO,SAAU,EAAK3D,MAAMc,KACjC2C,EAAKE,OAAO,aAAc,EAAK3D,MAAMgB,KACrCyC,EAAKE,OAAO,UAAW,EAAK3D,MAAMiB,KAClCwC,EAAKE,OAAO,cAAe,EAAK3D,MAAMkB,KAGtC0C,IAAIC,KAAJ,UAAYC,IAAZ,uBAA6CL,GAAMM,MAAK,SAAAC,GACtDC,QAAQC,IAAI,QAASF,EAAIG,MACrBH,EAAIG,KAAKC,OAAOC,IAAMC,QAAN,qBAEpBD,IAAME,QAAN,4BACA,EAAKC,kB,EAITC,YAAc,SAAA1C,GACZ,IACI2C,EADE,YAAO,EAAK1E,MAAMiC,SACRF,EAAEK,OAAOkB,aAAa,eACtC,EAAKZ,SAAS,CAAElB,WAAW,EAAMC,cAAeiD,K,mFAIhDC,KAAKC,eACLD,KAAKE,sB,qCAILF,KAAKjC,SAAS,CACZlB,WAAW,EACXC,cAAe,O,oCAIJ,IAAD,OACZmC,IAAIkB,IAAJ,UAAWhB,IAAX,iCAA8CiB,IAAQD,IAAI,QAAQX,KAAKa,aAAcjB,MAAK,SAAAC,GACxF,EAAKtB,SAAS,CACZtB,SAAUC,KAAKC,SAASC,SAAS,IACjCR,IAAK,GAAIC,IAAK,GAAIF,IAAK,GAAIG,IAAK,GAAIC,IAAK,GAAIC,SAAU,GAAIN,SAAS,EACpER,WAAY,GAAIH,OAAQ,GAAIM,QAAS,GAAIG,YAAa,GAAIsB,QAAS+B,EAAIG,KAAKc,OAC5E9E,SAAU,GAAIG,aAAc,GAAIG,UAAW,GAAIG,cAAe,GAAIe,UAAW,GAAIC,MAAO,GAAIC,WAAY,U,qCAK9F,IAAD,OACb+B,IAAIkB,IAAJ,UAAWhB,IAAX,iCAA8CiB,IAAQD,IAAI,QAAQX,KAAKa,aAAcjB,MAAK,SAAAC,GAExF,IAAI/D,EAAO,EAAKqC,WAAW0B,EAAIG,KAAKc,QAAQ,SAAA1C,GAAC,OAAIA,EAAEJ,YAKnD,EAAKO,SAAS,CAAET,QAAS+B,EAAIG,KAAKc,OAAQhF,c,sCAI9BO,EAASG,GAAc,IAAD,OACpCsD,QAAQC,IAAR,iBAAsB1D,EAAtB,YAAiCG,IAEjCiD,IAAIkB,IAAJ,UAAWhB,IAAX,+BAA4CtD,EAA5C,YAAuDG,IAAeoD,MAAK,SAAAC,GAEzE,IAAIkB,EAAQlB,EAAIG,KAAKc,OAAOjD,QAAO,SAAAE,GAAI,OAAKA,EAAKiD,KAAOjD,EAAKkD,KAAOlD,EAAKmD,MAAS,MAAIC,OAClFC,EAAQvB,EAAIG,KAAKc,OAAOjD,QAAO,SAAAE,GAAI,OAAKA,EAAKiD,KAAOjD,EAAKkD,KAAOlD,EAAKmD,KAAQ,MAAIC,OAErF,EAAK5C,SAAS,CAAEb,WAAYmC,EAAIG,KAAKc,OAAQtD,UAAWuD,EAAOtD,MAAO2D,S,0CAIrD,IAAD,OAClB3B,IAAIkB,IAAJ,UAAWhB,IAAX,mCAAgDiB,IAAQD,IAAI,QAAQX,KAAKa,aAAcjB,MAAK,SAAAC,GACtFA,EAAIG,KAAKc,OAAOK,OAClB,EAAK5C,SAAS,CAAEhB,UAAWsC,EAAIG,KAAKc,OAAOjB,EAAIG,KAAKc,OAAOK,OAAS,GAAGE,OAEvEnB,IAAMoB,KAAN,+C,iCAKKC,EAAKC,GACd,IAAIC,EAAQ,GAIZ,OAHAF,EAAIG,SAAQ,SAAAtD,GACVqD,EAAMD,EAAUpD,IAAMA,KAEjBuD,OAAOC,KAAKH,GAAOI,KAAI,SAAAC,GAAG,OAAIL,EAAMK,Q,+BAGnC,IAAD,OAIDC,EAAe,CACnBC,OAAQ,CAAC,aACTC,SAAU,CACR,CACEC,MAAO,YACPC,gBAAiB,UACjBC,YAAa,UACbC,YAAa,EACbC,qBAAsB,UACtBC,iBAAkB,UAClBvC,KAAM,CAACQ,KAAK3E,MAAM2B,YAEpB,CACE0E,MAAO,kBACPC,gBAAiB,UACjBC,YAAa,UACbC,YAAa,EACbC,qBAAsB,UACtBC,iBAAkB,UAClBvC,KAAM,CAACQ,KAAK3E,MAAM4B,UAgBxB,OACE,yBAAK+E,UAAU,OACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,OAAOC,MAAO,CAAEC,cAAe,KAC5C,yBAAKF,UAAU,OAEb,yBAAKA,UAAU,uBACb,wBAAIA,UAAU,qCAAd,oBAGA,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,YACb,uCACA,4BAAQG,SAAUnC,KAAK7C,WAAYiF,SAAUpC,KAAK3E,MAAME,OAAQmC,MAAOsC,KAAK3E,MAAME,OAAQyG,UAAU,gBAClG,4BAAQtE,MAAM,GAAG2E,UAAQ,EAACD,UAAQ,GAAlC,UAEEpC,KAAK3E,MAAMC,KAAK+F,KAAI,SAAA9D,GAAI,OACtB,4BAAQG,MAAOH,EAAKC,UAAWD,EAAKS,WAM5C,yBAAKgE,UAAU,YACb,2CACA,4BAAQG,SAAUnC,KAAK/B,eAAgBmE,SAAUpC,KAAK3E,MAAMK,WAAYgC,MAAOsC,KAAK3E,MAAMK,WAAYsG,UAAU,gBAC9G,4BAAQtE,MAAM,GAAG2E,UAAQ,EAACD,UAAQ,GAAlC,UAEEpC,KAAK3E,MAAMI,SAAS4F,KAAI,SAAA9D,GAAI,OAC1B,4BAAQG,MAAOH,EAAKM,aAAcN,EAAK9B,eAM/C,yBAAKuG,UAAU,YACb,wCACA,4BAAQG,SAAUnC,KAAK5B,YAAagE,SAAUpC,KAAK3E,MAAMQ,QAAS6B,MAAOsC,KAAK3E,MAAMQ,QAASmG,UAAU,gBACrG,4BAAQtE,MAAM,GAAG2E,UAAQ,EAACD,UAAQ,GAAlC,UAEEpC,KAAK3E,MAAMO,MAAMyF,KAAI,SAAA9D,GAAI,OACvB,4BAAQG,MAAOH,EAAKW,UAAWX,EAAK3B,YAM5C,yBAAKoG,UAAU,YACb,4CACA,4BAAQG,SAAUnC,KAAKzB,gBAAiB6D,SAAUpC,KAAK3E,MAAMW,YAAa0B,MAAOsC,KAAK3E,MAAMW,YAAagG,UAAU,gBACjH,4BAAQtE,MAAM,GAAG2E,UAAQ,EAACD,UAAQ,GAAlC,UAEEpC,KAAK3E,MAAMU,UAAUsF,KAAI,SAAA9D,GAAI,OAC3B,4BAAQG,MAAOH,EAAKc,cAAed,EAAKxB,gBAMhD,yBAAKiG,UAAU,YACb,4BAAQA,UAAU,8BAA8BM,QAAS,kBAAM,EAAKzC,gBAApE,mBAON,yBAAKmC,UAAU,gBACb,kBAAC,MAAD,CAAKxC,KAAM+B,EAAcgB,QA/ErB,CACdC,OAAQ,CACNC,MAAO,CAAC,CACNC,MAAO,CACLC,aAAa,EACbC,IAAK,UA6EH,yBAAKZ,UAAU,gBACb,yBAAKC,MAAO,CAAEY,UAAW,SACvB,2BAAOb,UAAU,SACf,4BACE,wBAAIC,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAAqB,0BAAMf,UAAU,4BAA4BC,MAAO,CAAEe,cAAe,cAApE,cAEjE,wBAAIf,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAC1C,uBAAGf,UAAU,cAAchC,KAAK3E,MAAMG,YAG1C,4BACE,wBAAIyH,MAAM,QAAQhB,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAAqB,0BAAMf,UAAU,4BAA4BC,MAAO,CAAEe,cAAe,cAApE,aAE/E,wBAAIf,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAC1C,uBAAGf,UAAU,cAAchC,KAAK3E,MAAMM,gBAE1C,4BACE,wBAAIsH,MAAM,QAAQhB,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAAqB,0BAAMf,UAAU,4BAA4BC,MAAO,CAAEe,cAAe,cAApE,eAE/E,wBAAIf,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAC1C,uBAAGf,UAAU,cAAchC,KAAK3E,MAAMS,aAE1C,4BACE,wBAAImH,MAAM,QAAQhB,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAAqB,0BAAMf,UAAU,4BAA4BC,MAAO,CAAEe,cAAe,cAApE,mBAE/E,wBAAIf,MAAO,CAAEa,WAAY,UAAWC,OAAQ,oBAC1C,uBAAGf,UAAU,cAAchC,KAAK3E,MAAMY,oBAOhD,yBAAK+F,UAAU,iBAEb,2BAAOA,UAAU,sCACf,+BACE,wBAAIA,UAAU,eACZ,wBAAIC,MAAO,CAAEiB,cAAe,UAAYC,QAAQ,KAAhD,QACA,wBAAIlB,MAAO,CAAEiB,cAAe,UAAYC,QAAQ,KAAhD,SACA,wBAAIlB,MAAO,CAAEiB,cAAe,UAAYC,QAAQ,KAAhD,UACA,wBAAIC,QAAQ,KAAZ,uBACA,wBAAInB,MAAO,CAAEiB,cAAe,UAAYC,QAAQ,KAAhD,eACA,wBAAIlB,MAAO,CAAEiB,cAAe,UAAYC,QAAQ,KAAhD,WAEF,wBAAInB,UAAU,eACZ,oCACA,oCACA,sCAIJ,+BAEIhC,KAAK3E,MAAMgI,WACX,4BACE,wBAAIrB,UAAU,cAAcoB,QAAQ,KAClC,8CAKJpD,KAAK3E,MAAM6B,WAAWmE,KAAI,SAAC9D,EAAM+F,GAAP,OACxB,wBAAItB,UAAU,eACZ,4BAAKsB,EAAI,GACT,4BAAK/F,EAAKgG,UACV,4BAAKhG,EAAKS,MACV,4BAAKT,EAAKmD,MACV,4BAAKnD,EAAKiD,MACV,4BAAKjD,EAAKkD,MACV,4BAAKlD,EAAKmD,KAAOnD,EAAKiD,KAAOjD,EAAKkD,MAClC,4BAAMlD,EAAKmD,KAAOnD,EAAKiD,KAAOjD,EAAKkD,MAAS,GAAK,0BAAM+C,MAAM,uBAAZ,SAAiD,0BAAMA,MAAM,sBAAZ,6B,GApWrGC,a,QCAjBC,E,YACJ,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,OAAS,EAAKA,OAAOC,KAAZ,gBAFG,E,sEAKjB7D,KAAK2D,MAAMG,QAAQF,W,+BAIHxD,IAAQD,IAAI,QAAQX,KAAKuE,MAEzC,OACE,yBAAK/B,UAAU,yBACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,wBACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,gBAEb,yBAAKA,UAAU,iBACb,kBAAC,IAAD,CAAMgC,GAAE,KACN,yBACEC,IAAG,2BACHC,IAAI,GACJjB,MAAO,OAKb,yBAAKjB,UAAU,OACb,yBAAKA,UAAU,aACb,kBAAC,EAAD,kB,GAhCUyB,aA6CjBC","file":"static/js/136.6ab26e6b.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Doughnut, Bar } from 'react-chartjs-2';\r\n\r\nimport Storage from '../../repository/storage';\r\nimport API, { API_SERVER } from '../../repository/api';\r\nimport { toast } from 'react-toastify'\r\nimport { Modal } from 'react-bootstrap';\r\n\r\nclass Evaluasi extends Component {\r\n\r\n  state = {\r\n    guru: [],\r\n    guruId: '',\r\n    guruName: '',\r\n\r\n    semester: [],\r\n    semesterId: '',\r\n    semesterName: '',\r\n\r\n    kelas: [],\r\n    kelasId: '',\r\n    kelasName: '',\r\n\r\n    pelajaran: [],\r\n    pelajaranId: '',\r\n    pelajaranName: '',\r\n\r\n    isModal: false,\r\n    gId: '',\r\n    jId: '',\r\n    sId: '',\r\n    kId: '',\r\n    pId: '',\r\n\r\n    fileName: '',\r\n    tempFile: Math.random().toString(36),\r\n\r\n    isPreview: false,\r\n    detailKinerja: {},\r\n\r\n    formatKpi: '',\r\n\r\n    menguasai: 0,\r\n    tidak: 0,\r\n\r\n    nilaiMurid: [],\r\n  }\r\n\r\n  changeGuru = e => {\r\n    let cc = [...this.state.kinerja];\r\n    let filter = cc.filter(item => item.pengajar == e.target.value)\r\n    let semester = this.findUnique(filter, d => d.semester_id)\r\n    let getGuru = [...this.state.guru].filter(item => item.pengajar == e.target.value)\r\n    this.setState({ guruId: e.target.value, kinerja: filter, guruName: getGuru[0].nama, semester })\r\n  }\r\n\r\n  changeSemester = e => {\r\n    let cc = [...this.state.kinerja];\r\n    let filter = cc.filter(item => item.semester_id == e.target.value)\r\n    let kelas = this.findUnique(filter, d => d.kelas_id)\r\n    let getSemester = [...this.state.semester].filter(item => item.semester_id == e.target.value)\r\n    this.setState({ semesterId: e.target.value, kinerja: filter, semesterName: getSemester[0].semester, kelas })\r\n  }\r\n\r\n  changeKelas = e => {\r\n    let cc = [...this.state.kinerja];\r\n    let filter = cc.filter(item => item.kelas_id == e.target.value)\r\n    let pelajaran = this.findUnique(filter, d => d.pelajaran_id)\r\n    let getKelas = [...this.state.kelas].filter(item => item.kelas_id == e.target.value)\r\n    this.setState({ kelasId: e.target.value, kinerja: filter, kelasName: getKelas[0].kelas, pelajaran })\r\n  }\r\n\r\n  changePelajaran = e => {\r\n    let cc = [...this.state.kinerja];\r\n    let filter = cc.filter(item => item.pelajaran_id == e.target.value)\r\n    let getPelajaran = [...this.state.pelajaran].filter(item => item.pelajaran_id == e.target.value)\r\n    this.setState({ pelajaranId: e.target.value, kinerja: filter, pelajaranName: getPelajaran[0].pelajaran })\r\n\r\n    this.fetchNilaiMurid(this.state.kelasId, e.target.value);\r\n  }\r\n\r\n  openModal = e => {\r\n    this.setState({\r\n      isModal: true,\r\n      jId: e.target.getAttribute('data-jadwal'),\r\n      gId: e.target.getAttribute('data-guru'),\r\n      sId: e.target.getAttribute('data-semester'),\r\n      kId: e.target.getAttribute('data-kelas'),\r\n      pId: e.target.getAttribute('data-pelajaran'),\r\n    })\r\n  }\r\n\r\n  submitKPI = e => {\r\n    e.preventDefault();\r\n    let form = new FormData();\r\n    form.append('file', this.state.fileName);\r\n    form.append('jadwalId', this.state.jId);\r\n    form.append('guruId', this.state.gId);\r\n    form.append('semesterId', this.state.sId);\r\n    form.append('kelasId', this.state.kId);\r\n    form.append('pelajaranId', this.state.pId);\r\n\r\n    //console.log('state: ', this.state)\r\n    API.post(`${API_SERVER}v2/principal/upload`, form).then(res => {\r\n      console.log('res: ', res.data);\r\n      if (res.data.error) toast.warning(`Error: upload KPI`)\r\n\r\n      toast.success(`Berhasil upload KPI Guru`);\r\n      this.clearFilter();\r\n    })\r\n  }\r\n\r\n  openPreview = e => {\r\n    let cc = [...this.state.kinerja];\r\n    let detail = cc[e.target.getAttribute('data-index')];\r\n    this.setState({ isPreview: true, detailKinerja: detail })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchKinerja()\r\n    this.fetchNewestFormat()\r\n  }\r\n\r\n  clearPreview() {\r\n    this.setState({\r\n      isPreview: false,\r\n      detailKinerja: {}\r\n    })\r\n  }\r\n\r\n  clearFilter() {\r\n    API.get(`${API_SERVER}v2/principal/kpi-guru/${Storage.get('user').data.company_id}`).then(res => {\r\n      this.setState({\r\n        tempFile: Math.random().toString(36),\r\n        jId: '', sId: '', gId: '', kId: '', pId: '', fileName: '', isModal: false,\r\n        semesterId: '', guruId: '', kelasId: '', pelajaranId: '', kinerja: res.data.result,\r\n        guruName: '', semesterName: '', kelasName: '', pelajaranName: '', menguasai: '', tidak: '', nilaiMurid: []\r\n      })\r\n    })\r\n  }\r\n\r\n  fetchKinerja() {\r\n    API.get(`${API_SERVER}v2/principal/kpi-guru/${Storage.get('user').data.company_id}`).then(res => {\r\n\r\n      let guru = this.findUnique(res.data.result, d => d.pengajar)\r\n      // let semester = this.findUnique(res.data.result, d => d.semester_id)\r\n      // let kelas = this.findUnique(res.data.result, d => d.kelas_id)\r\n      // let pelajaran = this.findUnique(res.data.result, d => d.pelajaran_id)\r\n\r\n      this.setState({ kinerja: res.data.result, guru })\r\n    })\r\n  }\r\n\r\n  fetchNilaiMurid(kelasId, pelajaranId) {\r\n    console.log(`Query: ${kelasId} ${pelajaranId}`);\r\n\r\n    API.get(`${API_SERVER}v2/guru/nilai-kelas/${kelasId}/${pelajaranId}`).then(res => {\r\n\r\n      let lulus = res.data.result.filter(item => (item.quiz + item.exam + item.task) >= 50).length;\r\n      let belum = res.data.result.filter(item => (item.quiz + item.exam + item.task) < 50).length;\r\n\r\n      this.setState({ nilaiMurid: res.data.result, menguasai: lulus, tidak: belum })\r\n    })\r\n  }\r\n\r\n  fetchNewestFormat() {\r\n    API.get(`${API_SERVER}v2/learning-kpi/company/${Storage.get('user').data.company_id}`).then(res => {\r\n      if (res.data.result.length) {\r\n        this.setState({ formatKpi: res.data.result[res.data.result.length - 1].file })\r\n      } else {\r\n        toast.info(`Format KPI belum di upload oleh Admin.`)\r\n      }\r\n    })\r\n  }\r\n\r\n  findUnique(arr, predicate) {\r\n    var found = {};\r\n    arr.forEach(d => {\r\n      found[predicate(d)] = d;\r\n    });\r\n    return Object.keys(found).map(key => found[key]);\r\n  }\r\n\r\n  render() {\r\n\r\n    //console.log('state: ', this.state)\r\n\r\n    const dataEvaluasi = {\r\n      labels: ['Responden'],\r\n      datasets: [\r\n        {\r\n          label: 'Menguasai',\r\n          backgroundColor: '#28a745',\r\n          borderColor: '#0b2e13',\r\n          borderWidth: 1,\r\n          hoverBackgroundColor: '#1a692c',\r\n          hoverBorderColor: '#0b2e13',\r\n          data: [this.state.menguasai]\r\n        },\r\n        {\r\n          label: 'Tidak Menguasai',\r\n          backgroundColor: '#fa3e3e',\r\n          borderColor: '#b12e2e',\r\n          borderWidth: 1,\r\n          hoverBackgroundColor: '#7c2323',\r\n          hoverBorderColor: '#b12e2e',\r\n          data: [this.state.tidak]\r\n        }\r\n      ]\r\n    }\r\n\r\n    const options = {\r\n      scales: {\r\n        yAxes: [{\r\n          ticks: {\r\n            beginAtZero: true,\r\n            min: 0\r\n          }\r\n        }]\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-sm-12\">\r\n          <div className=\"card\" style={{ paddingBottom: 10 }}>\r\n            <div className=\"row\">\r\n\r\n              <div className=\"col-xl-12 pl-5 mb-4\">\r\n                <h3 className=\"f-24 fc-skyblue f-w-800 mb-3 mt-3\">\r\n                  Laporan Evaluasi\r\n                  </h3>\r\n                <div className=\"form-group row\">\r\n                  <div className=\"col-sm-3\">\r\n                    <label>Guru</label>\r\n                    <select onChange={this.changeGuru} disabled={this.state.guruId} value={this.state.guruId} className=\"form-control\">\r\n                      <option value=\"\" selected disabled>Select</option>\r\n                      {\r\n                        this.state.guru.map(item => (\r\n                          <option value={item.pengajar}>{item.nama}</option>\r\n                        ))\r\n                      }\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-2\">\r\n                    <label>Semester</label>\r\n                    <select onChange={this.changeSemester} disabled={this.state.semesterId} value={this.state.semesterId} className=\"form-control\">\r\n                      <option value=\"\" selected disabled>Select</option>\r\n                      {\r\n                        this.state.semester.map(item => (\r\n                          <option value={item.semester_id}>{item.semester}</option>\r\n                        ))\r\n                      }\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-2\">\r\n                    <label>Kelas</label>\r\n                    <select onChange={this.changeKelas} disabled={this.state.kelasId} value={this.state.kelasId} className=\"form-control\" >\r\n                      <option value=\"\" selected disabled>Select</option>\r\n                      {\r\n                        this.state.kelas.map(item => (\r\n                          <option value={item.kelas_id}>{item.kelas}</option>\r\n                        ))\r\n                      }\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-2\">\r\n                    <label>Pelajaran</label>\r\n                    <select onChange={this.changePelajaran} disabled={this.state.pelajaranId} value={this.state.pelajaranId} className=\"form-control\" >\r\n                      <option value=\"\" selected disabled>Select</option>\r\n                      {\r\n                        this.state.pelajaran.map(item => (\r\n                          <option value={item.pelajaran_id}>{item.pelajaran}</option>\r\n                        ))\r\n                      }\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-2\">\r\n                    <button className=\"btn btn-v2 btn-success mt-4\" onClick={() => this.clearFilter()}>\r\n                      Reset Filter\r\n                      </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-xl-6 p-5\">\r\n                <Bar data={dataEvaluasi} options={options} />\r\n              </div>\r\n\r\n              <div className=\"col-xl-6 p-5\">\r\n                <div style={{ overflowX: \"auto\" }}>\r\n                  <table className=\"table\">\r\n                    <tr>\r\n                      <td style={{ background: '#FAFAFA', border: '4px solid white' }}><span className=\"f-w-800 f-14 text-c-grey \" style={{ textTransform: 'uppercase' }}>\r\n                        Nama Guru</span></td>\r\n                      <td style={{ background: '#F5F5F5', border: '4px solid white' }}>\r\n                        <b className=\"fc-skyblue\">{this.state.guruName}</b>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td width=\"200px\" style={{ background: '#FAFAFA', border: '4px solid white' }}><span className=\"f-w-800 f-14 text-c-grey \" style={{ textTransform: 'uppercase' }}>\r\n                        Semester</span></td>\r\n                      <td style={{ background: '#F5F5F5', border: '4px solid white' }}>\r\n                        <b className=\"fc-skyblue\">{this.state.semesterName}</b></td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td width=\"200px\" style={{ background: '#FAFAFA', border: '4px solid white' }}><span className=\"f-w-800 f-14 text-c-grey \" style={{ textTransform: 'uppercase' }}>\r\n                        Nama Kelas</span></td>\r\n                      <td style={{ background: '#F5F5F5', border: '4px solid white' }}>\r\n                        <b className=\"fc-skyblue\">{this.state.kelasName}</b></td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td width=\"200px\" style={{ background: '#FAFAFA', border: '4px solid white' }}><span className=\"f-w-800 f-14 text-c-grey \" style={{ textTransform: 'uppercase' }}>\r\n                        Mata Pelajaran</span></td>\r\n                      <td style={{ background: '#F5F5F5', border: '4px solid white' }}>\r\n                        <b className=\"fc-skyblue\">{this.state.pelajaranName}</b></td>\r\n                    </tr>\r\n\r\n                  </table>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-xl-12 p-5\">\r\n\r\n                <table className=\"table table-striped table-bordered\">\r\n                  <thead>\r\n                    <tr className=\"text-center\">\r\n                      <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\"> NO </td>\r\n                      <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\"> NIK </td>\r\n                      <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\"> NAMA </td>\r\n                      <td colSpan=\"3\">NILAI HASIL BELAJAR</td>\r\n                      <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\">NILAI AKHIR</td>\r\n                      <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\">STATUS</td>\r\n                    </tr>\r\n                    <tr className=\"text-center\">\r\n                      <td>TASK</td>\r\n                      <td>QUIZ</td>\r\n                      <td>EXAM</td>\r\n                    </tr>\r\n                  </thead>\r\n\r\n                  <tbody>\r\n                    {\r\n                      this.state.isLoading &&\r\n                      <tr>\r\n                        <td className=\"text-center\" colSpan='8'>\r\n                          <span>Loading...</span>\r\n                        </td>\r\n                      </tr>\r\n                    }\r\n                    {\r\n                      this.state.nilaiMurid.map((item, i) => (\r\n                        <tr className=\"text-center\">\r\n                          <td>{i + 1}</td>\r\n                          <td>{item.no_induk}</td>\r\n                          <td>{item.nama}</td>\r\n                          <td>{item.task}</td>\r\n                          <td>{item.quiz}</td>\r\n                          <td>{item.exam}</td>\r\n                          <td>{item.task + item.quiz + item.exam}</td>\r\n                          <td>{(item.task + item.quiz + item.exam) >= 50 ? <span class=\"label label-success\">Lulus</span> : <span class=\"label label-danger\">Mengulang</span>}</td>\r\n                        </tr>\r\n                      ))\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Evaluasi;\r\n","import React, { Component } from \"react\";\r\nimport Storage from '../../repository/storage';\r\n\r\nimport Evaluasi from './evaluasi';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\n\r\nclass EvaluasiPrincipal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.goBack = this.goBack.bind(this);\r\n  }\r\n  goBack() {\r\n    this.props.history.goBack();\r\n  }\r\n\r\n  render() {\r\n    let levelUser = Storage.get('user').data.level;\r\n    let access_project_admin = levelUser == 'admin' || levelUser == 'superadmin' ? true : false;\r\n    return (\r\n      <div className=\"pcoded-main-container\">\r\n        <div className=\"pcoded-wrapper\">\r\n          <div className=\"pcoded-content\">\r\n            <div className=\"pcoded-inner-content\">\r\n              <div className=\"main-body\">\r\n                <div className=\"page-wrapper\">\r\n\r\n                  <div className=\"floating-back\">\r\n                    <Link to={`/`}>\r\n                      <img\r\n                        src={`newasset/back-button.svg`}\r\n                        alt=\"\"\r\n                        width={90}\r\n                      ></img>\r\n                    </Link>\r\n                  </div>\r\n\r\n                  <div className=\"row\">\r\n                    <div className=\"col-xl-12\">\r\n                      <Evaluasi />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EvaluasiPrincipal;\r\n"],"sourceRoot":""}
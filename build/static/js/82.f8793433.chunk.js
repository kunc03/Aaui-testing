(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[82],{1368:function(e,a,t){"use strict";t.r(a);var l=t(21),n=t(6),s=t(11),r=t(13),i=t(12),m=t(14),o=t(0),c=t.n(o),u=t(470),p=t(3),d=t(291),h=t.n(d),v=t(321),y=t.n(v),g=(t(481),t(247)),E=(t(127),t(24)),b=function(e){function a(){var e,t;Object(n.a)(this,a);for(var s=arguments.length,m=new Array(s),o=0;o<s;o++)m[o]=arguments[o];return(t=Object(r.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(m)))).state={company_id:"",branch_id:"",optionComapny:[],valueCompany:[],level_multicompany:"client",identity:"",name:"",email:"",alertemail:"",phone:"",address:"",password:"",level:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],responseMessage:"",responseEmail:"",responsePhone:"",optionsGroup:[],valueGroup:[],isbuttonDisabled:!1},t.handleChangeValidity=function(e){t.setState({validity:e})},t.onChangeInput=function(e){var a=e.target,n=a.value,s=a.name;"email"===s?(t.setState({isbuttonDisabled:!0}),p.l.get("".concat(p.a,"v1/user/cek/email/").concat(n)).then((function(e){var r;e.data.error?(a.value="",t.setState({alertemail:"Email sudah terdaftar dan aktif. gunakan email lain"})):(t.setState((r={},Object(l.a)(r,s,n),Object(l.a)(r,"alertemail",""),r)),setTimeout((function(){t.setState({isbuttonDisabled:!1})}),600))}))):"company_id"===s?p.l.get("".concat(p.a,"v1/branch/company/").concat(n)).then((function(e){200===e.status&&(t.setState({listBranch:e.data.result[0],company_id:n,listGrup:e.data.result[1]}),e.data.result[0].map((function(e){t.state.optionsGroup.push({value:e.branch_id,label:e.branch_name})})),t.showMultipleCompany(n))})):t.setState(Object(l.a)({},s,n))},t.submitForm=function(e){e.preventDefault();var a=0==t.state.unlimited?"1":"0",l={company_id:t.state.company_id,multi_company:t.state.valueCompany,branch_id:0,grup_id:t.state.grup_id,group:t.state.valueGroup,identity:t.state.identity,name:t.state.name,email:t.state.email,phone:t.state.phone,address:t.state.address,level:t.state.level,status:"active",unlimited:a,validity:t.state.validity.toISOString().split("T")[0]};""===l.company_id||""==l.group||""===l.grup_id||""===l.name||""===l.identity||""===l.email||""===l.level?E.b.warning("Please fill required field."):p.l.post("".concat(p.a,"v1/user"),l).then((function(e){if(200===e.status)if(e.data.error)t.setState({responseMessage:e.data.result});else{var a=e.data.result.user_id;p.l.delete("".concat(p.a,"v1/user/assign/").concat(e.data.result.user_id)).then((function(e){if(200===e.status)for(var l=0;l<t.state.valueCompany.length;l++){var n={user_id:a,company_id:t.state.valueCompany[l],level_multicompany:t.state.level_multicompany};p.l.post("".concat(p.a,"v1/user/assign"),n)}})),t.props.history.push("/company-detail-super/".concat(l.company_id))}}))},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"toggleSwitch",value:function(e){this.setState({unlimited:!this.state.unlimited})}},{key:"showMultipleCompany",value:function(e){var a=this;p.l.get("".concat(p.a,"v1/company")).then((function(t){a.setState({valueCompany:[]}),a.setState({optionComapny:[]}),t.data.result.map((function(e){a.state.optionComapny.push({value:e.company_id,label:e.company_name})})),a.setState({optionComapny:a.state.optionComapny.filter((function(a){return a.value!=e}))})}))}},{key:"componentDidMount",value:function(){var e=this;p.l.get("".concat(p.a,"v1/company")).then((function(a){200===a.status&&e.setState({listCompany:a.data.result})}))}},{key:"render",value:function(){var e=this,a=[{level:"superadmin"},{level:"admin"},{level:"client"}];return c.a.createElement("div",{className:"pcoded-main-container"},c.a.createElement("div",{className:"pcoded-wrapper"},c.a.createElement("div",{className:"pcoded-content"},c.a.createElement("div",{className:"pcoded-inner-content"},c.a.createElement("div",{className:"main-body"},c.a.createElement("div",{className:"page-wrapper"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-xl-12"},c.a.createElement("h3",{className:"f-24 f-w-800"},"Add User Management"),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-block"},c.a.createElement("form",{onSubmit:function(a){return e.submitForm(a)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Company"),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("select",{required:!0,className:"form-control",name:"company_id",onChange:this.onChangeInput},c.a.createElement("option",{value:""},"-- Select --"),this.state.listCompany.map((function(e){return c.a.createElement("option",{value:e.company_id},e.company_name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Level"),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("select",{style:{textTransform:"capitalize"},name:"level",className:"form-control",onChange:this.onChangeInput,required:!0},c.a.createElement("option",{value:""},"-- Select --"),a.map((function(e){return c.a.createElement("option",{value:e.level},"client"===e.level?"User":e.level)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Multiple Company"),c.a.createElement(g.MultiSelect,{id:"multicompany",options:this.state.optionComapny,value:this.state.valueCompany,onChange:function(a){return e.setState({valueCompany:a})},mode:"tags",removableTags:!0,hasSelectAll:!0,selectAllLabel:"Choose all",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Company"})),this.state.valueCompany.length>0?c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Level Multicompany"),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("select",{style:{textTransform:"capitalize"},name:"level_multicompany",className:"form-control",onChange:function(a){return e.setState({level_multicompany:a.target.value})}},c.a.createElement("option",{value:""},"-- Select --"),a.map((function(e){return c.a.createElement("option",{value:e.level},"client"===e.level?"User":e.level)})))):null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Group"),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement(g.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:function(a){return e.setState({valueGroup:a})},mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Role"),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},c.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map((function(e){return c.a.createElement("option",{value:e.grup_id},e.grup_name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"}," Name "),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",onChange:this.onChangeInput})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"}," Registration Number "),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"001",onChange:this.onChangeInput})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Email"),c.a.createElement(u.a.Text,{className:"text-danger"},"Required"),c.a.createElement("input",{type:"email",required:!0,name:"email",className:"form-control",placeholder:"example@domain.com",onChange:this.onChangeInput}),c.a.createElement(u.a.Text,{className:"text-danger"},this.state.alertemail)),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Phone"),c.a.createElement("input",{type:"text",name:"phone",className:"form-control",placeholder:"08119680220",onChange:this.onChangeInput})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input"},"Address"),c.a.createElement("textarea",{name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(h.a,Object(l.a)({checked:!1,onChange:this.toggleSwitch.bind(this)},"checked",this.state.unlimited)))),this.state.unlimited&&c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(y.a,{selected:this.state.validity,onChange:this.handleChangeValidity,showTimeSelect:!0,dateFormat:"yyyy-MM-dd"}))),c.a.createElement("div",{style:{marginTop:"50px"}},this.state.responseMessage&&c.a.createElement("div",{class:"alert alert-primary",role:"alert"},c.a.createElement("b",null,"ALERT")," Please check you data before submit. ",this.state.responseMessage)),c.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-100 f-20 f-w-600",disabled:this.state.isbuttonDisabled},"Save"))))))))))))}}]),a}(o.Component);a.default=b}}]);
//# sourceMappingURL=82.f8793433.chunk.js.map
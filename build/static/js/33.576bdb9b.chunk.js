(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[33],{1051:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(463),o=a(3),s=a(2),c=a(19),l=a.n(c),d=a(30),u=a(516);class f extends n.Component{constructor(e){super(e),this.filterNotification=e=>{e.preventDefault(),this.setState({filterNotification:e.target.value})},this.changeFilterType=e=>{this.setState({filterType:e.target.value})},this.deleteNotif=e=>{e.preventDefault(),o.l.delete("".concat(o.a,"v1/notification/id/").concat(e.target.getAttribute("data-id"))).then(e=>{e.data.error&&console.log("Error delete"),this.fetchNotif()})},this.deleteAllNotif=e=>{e.preventDefault();let t=[];this.state.notificationData.filter(e=>{1==e.tag&&t.push(e.id)}),o.l.put("".concat(o.a,"v1/notification/id/").concat(s.a.get("user").data.user_id),{notifIds:t}).then(e=>{e.data.error&&console.log("Error delete"),this.fetchNotif()})},this.readAllNotif=e=>{e.preventDefault();let t=[];this.state.notificationData.filter(e=>{1==e.tag&&0==e.isread&&t.push(e.id)}),o.l.put("".concat(o.a,"v1/notification/read/all"),{userId:s.a.get("user").data.user_id,notifIds:t}).then(e=>{e.data.error&&console.log("Error update"),this.props.socket.emit("send",{companyId:s.a.get("user").data.company_id}),this.fetchNotif()})},this.deleteAllReminder=e=>{e.preventDefault();let t=[];this.state.notificationData.filter(e=>{2==e.tag&&t.push(e.id)}),o.l.put("".concat(o.a,"v1/notification/id/").concat(s.a.get("user").data.user_id),{notifIds:t}).then(e=>{e.data.error&&console.log("Error delete"),this.fetchNotif()})},this.readAllReminder=e=>{e.preventDefault();let t=[];this.state.notificationData.filter(e=>{2==e.tag&&0==e.isread&&t.push(e.id)}),console.log("state: ",t),o.l.put("".concat(o.a,"v1/notification/read/all"),{userId:s.a.get("user").data.user_id,notifIds:t}).then(e=>{e.data.error&&console.log("Error update"),this.props.socket.emit("send",{companyId:s.a.get("user").data.company_id}),this.fetchNotif()})},this.state={notificationData:[],tabIndex:1,badgeNotif:0,badgeRemind:0,filterType:"",filterNotification:"",notif:[],notifFilter:[]},this.tabAktivitas=this.tabAktivitas.bind(this)}tabAktivitas(e,t){this.setState({tabIndex:t+1})}componentDidMount(){this.fetchNotif(),this.fetchCheckAccess(s.a.get("user").data.company_id,["R_CONFIRMATION"]),this.props.socket.on("broadcast",e=>{this.fetchNotif()})}fetchNotif(){var e="";e=localStorage.getItem("companyID")?"".concat(o.a,"v1/notification/all/").concat(s.a.get("user").data.user_id,"?companyId=").concat(localStorage.getItem("companyID")):"".concat(o.a,"v1/notification/all/").concat(s.a.get("user").data.user_id),o.l.get(e).then(e=>{const t=e.data.result[0].filter(e=>0===e.isread&&1===e.tag),a=e.data.result[0].filter(e=>0===e.isread&&2===e.tag);this.setState({notificationData:e.data.result[0],badgeNotif:t.length,badgeRemind:a.length})})}readNotif(e){o.l.put("".concat(o.a,"v1/notification/read"),{id:e}).then(e=>{e.data.error&&console.log("Gagal read"),this.props.socket.emit("send",{companyId:s.a.get("user").data.company_id}),this.fetchNotif()})}konfirmasiHadir(e){o.l.put("".concat(o.a,"v1/ptc-room/konfirmasi/").concat(e,"/").concat(s.a.get("user").data.user_id)).then(e=>{e.data.error&&console.log("Error: ",e.data.error),this.props.socket.emit("send",{companyId:s.a.get("user").data.company_id}),this.fetchNotif()})}fetchCheckAccess(e,t){o.l.get("".concat(o.a,"v2/notification-alert/check-access"),{company_id:e,param:t}).then(e=>{200===e.status&&(console.log(e.data.result,"test"),this.setState({notif:e.data.result}))})}fetchNotification(){let e="";o.l.get(e).then(e=>{200===e.status&&this.setState({notifFilter:e.data.result})})}render(){const{t:e}=this.props;let{notificationData:t,filterType:a,filterNotification:s}=this.state;""!=a&&(t=t.filter(e=>e.type==a)),""!=s&&(t=t.filter(e=>JSON.stringify(Object.values(e)).match(new RegExp(s,"gmi"))));let c=t.filter(e=>1===e.tag);const d=t.filter(e=>2===e.tag);this.state.notifFilter.filter(e=>1===e.types);const u=["Course","Forum","Meeting","Announcement","Task","Files","Webinar","PTC","Tugas","Kuis","Ujian","Notifikasi"];return r.a.createElement("div",{className:"pcoded-main-container"},r.a.createElement("div",{className:"pcoded-wrapper"},r.a.createElement("div",{className:"pcoded-content"},r.a.createElement("div",{className:"pcoded-inner-content"},r.a.createElement("div",{className:"main-body"},r.a.createElement("div",{className:"page-wrapper"},r.a.createElement("div",{className:"row"},1===this.state.tabIndex?r.a.createElement("div",{className:"col-sm-12",style:{margin:"10px 10px 10px 0"}},r.a.createElement("h3",{className:"fc-blue"},e("notification")),r.a.createElement("div",{className:"row my-3"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("select",{value:this.state.filterType,onChange:this.changeFilterType,style:{width:"100%",height:40,border:"1px solid #ced4da",borderRadius:".25rem",color:"#949ca6",padding:"0 6px 0"}},r.a.createElement("option",{value:""},"All"),r.a.createElement("option",{value:"3"},"Meeting"),r.a.createElement("option",{value:"4"},"Announcement"),r.a.createElement("option",{value:"5"},"Task"),r.a.createElement("option",{value:"6"},"Files"))),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.filterNotification,className:"form-control"})),r.a.createElement("div",{className:"float-right"},r.a.createElement("a",{href:"",onClick:this.readAllNotif,className:"btn btn-v2 btn-primary "}," Read all"),r.a.createElement("a",{href:"",onClick:this.deleteAllNotif,className:"btn btn-v2 btn-danger ml-3"}," Remove all"))),0===c.length?r.a.createElement("div",{style:{width:"-webkit-fill-available",marginTop:"15px",padding:20}},r.a.createElement("b",{className:"fc-blue "},"No notifications at this time ...")):r.a.createElement(n.Fragment,null,c.map((e,t)=>r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row my-2"},r.a.createElement("div",{className:"col-sm-9",onClick:()=>this.readNotif(e.id),key:e.id},r.a.createElement(i.a,{style:{borderRadius:"24px",marginBottom:"2px"}},r.a.createElement(i.a.Body,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("h5",{className:"fc-blue",style:{fontWeight:"bold",marginBottom:0,fontSize:"16px"}},u[e.type-1],r.a.createElement("small",{style:{fontSize:"12px",marginLeft:"8px"}},l.a.utc(e.created_at).tz(l.a.tz.guess(!0)).format("HH:mm")," \xa0",l.a.utc(e.created_at).tz(l.a.tz.guess(!0)).format("DD/MM/YYYY"))),r.a.createElement(n.Fragment,null,e.description)),r.a.createElement("div",{className:"col-sm-3 text-center",style:{margin:"auto"}},r.a.createElement("a",{href:"null"===e.destination||null==e.destination?o.c:e.destination,className:"btn btn-v2 btn-primary mr-2"},"Open"),r.a.createElement("button",{onClick:this.deleteNotif,"data-id":e.id,className:"btn btn-v2 btn-danger"},"Delete"))))),e.company_name?r.a.createElement("span",{style:{fontSize:"10px",position:"absolute",top:"9px",left:"40px",marginRight:"5px",padding:"1px 6px",borderRadius:"8px",color:"white",background:"#0091ff"}},e.company_name):null,0===e.isread?r.a.createElement("img",{src:"/newasset/new.png",alt:"New",style:{position:"absolute",top:"-3px",left:"11px",width:"54px"}}):null)))))):r.a.createElement("div",{className:"col-sm-12",style:{margin:"10px 10px 10px 0"}},r.a.createElement("select",{value:this.state.filterType,onChange:this.changeFilterType,style:{width:200,height:40,border:"1px solid #ced4da",borderRadius:".25rem",color:"#949ca6"}},r.a.createElement("option",{value:""},"All"),r.a.createElement("option",{value:"3"},"Meeting"),r.a.createElement("option",{value:"4"},"Announcement"),r.a.createElement("option",{value:"5"},"Task"),r.a.createElement("option",{value:"6"},"Files")),0===d.length?r.a.createElement("div",{style:{width:"-webkit-fill-available",marginTop:"15px",padding:20}},r.a.createElement("b",{className:"fc-blue "},"There is no reminder at this time ...")):r.a.createElement("span",null,r.a.createElement("button",{onClick:this.deleteAllReminder,className:"btn btn-transparent ml-4"}," Remove all"),r.a.createElement("button",{onClick:this.readAllReminder,className:"btn btn-transparent ml-2"}," Read all"),d.map((t,a)=>r.a.createElement("div",{onClick:()=>this.readNotif(t.id),className:"row",key:t.id,style:{background:"#FFF",borderRadius:4,padding:"12px",margin:"10px 10px 10px -15px"}},r.a.createElement("span",{style:{width:"-webkit-fill-available"}},0==t.isread&&r.a.createElement("span",{style:{margin:"5px",padding:"1px 6px",borderRadius:"8px",color:"white",background:"red"}},"new"),r.a.createElement("b",{className:"fc-blue "},1==t.type?"Course":2==t.type?"Forum":3==t.type?"Meeting":4==t.type?"Pengumuman":5==t.type?"Task":6==t.type?"Files":7==t.type?"Training":8==t.type?"PTC":9==t.type?"Tugas":10==t.type?"Kuis":11==t.type?"Ujian":"Notifikasi"),"\xa0 \xa0",r.a.createElement("small",null,l.a.utc(t.created_at).format("HH:mm")," \xa0",l.a.utc(t.created_at).format("DD/MM/YYYY")),r.a.createElement("p",{className:"fc-muted mt-1"},t.description),r.a.createElement("a",{href:"null"==t.destination||null==t.destination?o.c:t.destination,className:"btn btn-v2 btn-primary"},e("check_now")),r.a.createElement("i",{className:"fa fa-trash float-right",onClick:this.deleteNotif,"data-id":t.id,style:{cursor:"pointer"}})))))))))))))}}const p=Object(u.a)("common")(e=>r.a.createElement(d.a.Consumer,null,t=>r.a.createElement(f,Object.assign({},e,{socket:t}))));t.default=p},255:function(e,t,a){var n=a(322),r=a(323),i=a(324),o=a(326);e.exports=function(e,t){return n(e)||r(e,t)||i(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},300:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext(null);r.displayName="CardContext",t.a=r},322:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},323:function(e,t){e.exports=function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){s=!0,r=c}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},324:function(e,t,a){var n=a(325);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},325:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n},e.exports.default=e.exports,e.exports.__esModule=!0},326:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},327:function(e,t,a){var n=a(328);e.exports=function(e,t){if(null==e)return{};var a,r,i=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},328:function(e,t){e.exports=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r},e.exports.default=e.exports,e.exports.__esModule=!0},463:function(e,t,a){"use strict";var n=a(1),r=a(4),i=a(15),o=a.n(i),s=a(0),c=a.n(s),l=a(27),d=a(43),u=a(64),f=a(300),p=c.a.forwardRef((function(e,t){var a=e.bsPrefix,i=e.className,s=e.variant,d=e.as,u=void 0===d?"img":d,f=Object(r.a)(e,["bsPrefix","className","variant","as"]),p=Object(l.a)(a,"card-img");return c.a.createElement(u,Object(n.a)({ref:t,className:o()(s?p+"-"+s:p,i)},f))}));p.displayName="CardImg",p.defaultProps={variant:null};var m=p,g=Object(u.a)("h5"),h=Object(u.a)("h6"),b=Object(d.a)("card-body"),y=Object(d.a)("card-title",{Component:g}),v=Object(d.a)("card-subtitle",{Component:h}),x=Object(d.a)("card-link",{Component:"a"}),N=Object(d.a)("card-text",{Component:"p"}),E=Object(d.a)("card-header"),O=Object(d.a)("card-footer"),w=Object(d.a)("card-img-overlay"),j=c.a.forwardRef((function(e,t){var a=e.bsPrefix,i=e.className,d=e.bg,u=e.text,p=e.border,m=e.body,g=e.children,h=e.as,y=void 0===h?"div":h,v=Object(r.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),x=Object(l.a)(a,"card"),N=Object(s.useMemo)((function(){return{cardHeaderBsPrefix:x+"-header"}}),[x]);return c.a.createElement(f.a.Provider,{value:N},c.a.createElement(y,Object(n.a)({ref:t},v,{className:o()(i,x,d&&"bg-"+d,u&&"text-"+u,p&&"border-"+p)}),m?c.a.createElement(b,null,g):g))}));j.displayName="Card",j.defaultProps={body:!1},j.Img=m,j.Title=y,j.Subtitle=v,j.Body=b,j.Link=x,j.Text=N,j.Header=E,j.Footer=O,j.ImgOverlay=w;t.a=j},516:function(e,t,a){"use strict";var n=a(62),r=a.n(n),i=a(255),o=a.n(i),s=a(327),c=a.n(s),l=a(0),d=a.n(l),u=a(182);function f(){if(console&&console.warn){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];"string"===typeof a[0]&&(a[0]="react-i18next:: ".concat(a[0])),(e=console).warn.apply(e,a)}}var p={};function m(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];"string"===typeof t[0]&&p[t[0]]||("string"===typeof t[0]&&(p[t[0]]=new Date),f.apply(void 0,t))}function g(e,t,a){e.loadNamespaces(t,(function(){if(e.isInitialized)a();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),a()}))}}))}function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.languages||!t.languages.length)return m("i18n.languages were undefined or empty",t.languages),!0;var n=t.languages[0],r=!!t.options&&t.options.fallbackLng,i=t.languages[t.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(e,a){var n=t.services.backendConnector.state["".concat(e,"|").concat(a)];return-1===n||2===n};return!(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(n,e)||(!t.services.backendConnector.backend||!(!o(n,e)||r&&!o(i,e))))}function b(e){return e.displayName||e.name||("string"===typeof e&&e.length>0?e:"Unknown")}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.i18n,n=Object(l.useContext)(u.a)||{},r=n.i18n,i=n.defaultNS,s=a||r||Object(u.d)();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new u.b),!s){m("You will need to pass in an i18next instance by using initReactI18next");var c=function(e){return Array.isArray(e)?e[e.length-1]:e},d=[c,{},!1];return d.t=c,d.i18n={},d.ready=!1,d}s.options.react&&void 0!==s.options.react.wait&&m("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var f=v(v(v({},Object(u.c)()),s.options.react),t),p=f.useSuspense,b=e||i||s.options&&s.options.defaultNS;b="string"===typeof b?[b]:b||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(b);var y=(s.isInitialized||s.initializedStoreOnce)&&b.every((function(e){return h(e,s,f)}));function x(){return s.getFixedT(null,"fallback"===f.nsMode?b:b[0])}var N=Object(l.useState)(x),E=o()(N,2),O=E[0],w=E[1],j=Object(l.useRef)(!0);Object(l.useEffect)((function(){var e=f.bindI18n,t=f.bindI18nStore;function a(){j.current&&w(x)}return j.current=!0,y||p||g(s,b,(function(){j.current&&w(x)})),e&&s&&s.on(e,a),t&&s&&s.store.on(t,a),function(){j.current=!1,e&&s&&e.split(" ").forEach((function(e){return s.off(e,a)})),t&&s&&t.split(" ").forEach((function(e){return s.store.off(e,a)}))}}),[s,b.join()]);var k=Object(l.useRef)(!0);Object(l.useEffect)((function(){j.current&&!k.current&&w(x),k.current=!1}),[s]);var C=[O,s,y];if(C.t=O,C.i18n=s,C.ready=y,y)return C;if(!y&&!p)return C;throw new Promise((function(e){g(s,b,(function(){e()}))}))}a.d(t,"a",(function(){return w}));var N=["forwardedRef"];function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){function n(n){var r=n.forwardedRef,i=c()(n,N),s=x(e,i),l=o()(s,3),u=l[0],f=l[1],p=l[2],m=O(O({},i),{},{t:u,i18n:f,tReady:p});return t.withRef&&r?m.ref=r:!t.withRef&&r&&(m.forwardedRef=r),d.a.createElement(a,m)}n.displayName="withI18nextTranslation(".concat(b(a),")"),n.WrappedComponent=a;return t.withRef?d.a.forwardRef((function(e,t){return d.a.createElement(n,Object.assign({},e,{forwardedRef:t}))})):n}}}}]);
//# sourceMappingURL=33.576bdb9b.chunk.js.map
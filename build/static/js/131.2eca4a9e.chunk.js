(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[131],{1513:function(e,a,t){"use strict";t.r(a);var n=t(21),l=t(6),s=t(11),r=t(13),c=t(12),i=t(14),m=t(0),o=t.n(m),u=t(539),d=t(3),p=t(2),h=t(300),g=t.n(h),v=t(332),E=t.n(v),b=(t(546),t(251)),y=t(24),N=function(e){function a(){var e,t;Object(l.a)(this,a);for(var s=arguments.length,i=new Array(s),m=0;m<s;m++)i[m]=arguments[m];return(t=Object(r.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(i)))).state={company_id:"",branch_id:"",grup_id:"",identity:"",name:"",email:"",alertemail:"",phone:"",address:"",password:"",level:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],responseMessage:"",responseEmail:"",responsePhone:"",optionsGroup:[],valueGroup:[]},t.handleChangeValidity=function(e){t.setState({validity:e})},t.onChangeInput=function(e){var a=e.target,l=a.value,s=a.name;"email"===s?d.l.get("".concat(d.a,"v1/user/cek/email/").concat(l)).then((function(e){var r;e.data.error?(a.value="",t.setState({alertemail:"Email sudah terdaftar dan aktif. gunakan email lain"})):t.setState((r={},Object(n.a)(r,s,l),Object(n.a)(r,"alertemail",""),r))})):"address"===s?l.length<=100?t.setState(Object(n.a)({},s,l)):t.setState(Object(n.a)({responseMessage:"Cannot exceed the character limit."},s,l.slice(0,a.maxLength))):t.setState(Object(n.a)({},s,l))},t.submitForm=function(e){e.preventDefault();var a=0==t.state.unlimited?"1":"0",n={company_id:t.state.company_id,branch_id:0,grup_id:t.state.grup_id,group:t.state.valueGroup,identity:t.state.identity,name:t.state.name,email:t.state.email,phone:t.state.phone,address:t.state.address,password:t.state.password,level:t.state.level,status:"active",unlimited:a,validity:t.state.validity.toISOString().split("T")[0]};""===n.company_id||""==n.group||""===n.grup_id||""===n.name||""===n.identity||""===n.email||""===n.level?y.b.warning("Please fill required field."):d.l.post("".concat(d.a,"v1/user"),n).then((function(e){200===e.status&&(e.data.error?t.setState({responseMessage:e.data.result}):"superadmin"===p.a.get("User").data.level?t.props.history.push("/user"):"superadmin"===p.a.get("User").data.level?t.props.history.push("/user"):t.props.history.push("/my-company"))}))},t}return Object(i.a)(a,e),Object(s.a)(a,[{key:"toggleSwitch",value:function(e){this.setState({unlimited:!this.state.unlimited})}},{key:"componentDidMount",value:function(){var e=this;d.l.get("".concat(d.j).concat(p.a.get("user").data.email)).then((function(a){200===a.status&&(e.setState({company_id:localStorage.getItem("companyID")?localStorage.getItem("companyID"):a.data.result.company_id}),d.l.get("".concat(d.a,"v1/branch/company/").concat(e.state.company_id)).then((function(a){200===a.status&&(e.setState({listBranch:a.data.result[0]}),a.data.result[0].map((function(a){e.state.optionsGroup.push({value:a.branch_id,label:a.branch_name})})))})),d.l.get("".concat(d.a,"v1/grup/company/").concat(e.state.company_id)).then((function(a){200===a.status&&e.setState({listGrup:a.data.result})})))}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"pcoded-main-container"},o.a.createElement("div",{className:"pcoded-wrapper"},o.a.createElement("div",{className:"pcoded-content"},o.a.createElement("div",{className:"pcoded-inner-content"},o.a.createElement("div",{className:"main-body"},o.a.createElement("div",{className:"page-wrapper"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-12"},o.a.createElement("h3",{className:"f-24 f-w-800"},"User Management"),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-block"},o.a.createElement("form",{onSubmit:function(a){return e.submitForm(a)}},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Group"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement(b.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:function(a){return e.setState({valueGroup:a})},mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Role"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},o.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map((function(e){return o.a.createElement("option",{value:e.grup_id},e.grup_name)})))),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"}," Name "),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"}," Registration Number "),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"001",onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Email"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{type:"email",required:!0,name:"email",className:"form-control",placeholder:"example@domain.com",onChange:this.onChangeInput}),o.a.createElement(u.a.Text,{className:"text-danger"},this.state.alertemail),o.a.createElement(u.a.Text,{className:"text-muted"},"Pastikan isi sesuai dengan format email ex. user@email.com")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Phone"),o.a.createElement("input",{type:"text",name:"phone",className:"form-control",placeholder:"08119680220",onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Address"),o.a.createElement("textarea",{maxLength:"100",name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput}),o.a.createElement(u.a.Text,{className:"text-muted"},"Maksimal 100 karakter untuk alamat")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Level"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("select",{name:"level",className:"form-control",onChange:this.onChangeInput,required:!0,style:{textTransform:"capitalize"}},o.a.createElement("option",{value:""},"-- Select --"),[{level:"admin"},{level:"client"}].map((function(e){return o.a.createElement("option",{value:e.level},"client"===e.level?"User":e.level)})))),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input"},"Password"),o.a.createElement(u.a.Text,{className:"text-danger"},"Required"),o.a.createElement("input",{type:"password",name:"password",required:!0,className:"form-control",placeholder:"Password",onChange:this.onChangeInput})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(g.a,Object(n.a)({checked:!1,onChange:this.toggleSwitch.bind(this)},"checked",this.state.unlimited)))),this.state.unlimited&&o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(E.a,{selected:this.state.validity,onChange:this.handleChangeValidity,showTimeSelect:!0,dateFormat:"yyyy-MM-dd"}))),o.a.createElement("div",{style:{marginTop:"50px"}},this.state.responseMessage&&o.a.createElement("div",{class:"alert alert-primary",role:"alert"},o.a.createElement("b",null,"ALERT")," Please check you data before submit. ",this.state.responseMessage)),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-10 f-20 f-w-600"},"Save"))))))))))))}}]),a}(m.Component);a.default=N}}]);
//# sourceMappingURL=131.2eca4a9e.chunk.js.map
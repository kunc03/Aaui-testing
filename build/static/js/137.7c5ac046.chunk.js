(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[137],{1624:function(e,a,t){"use strict";t.r(a);var l=t(6),r=t(11),n=t(13),s=t(12),c=t(31),i=t(14),d=t(0),u=t.n(d),o=t(2),m=t(224),p=t(581),g=t(3),b=t(24),f=function(e){function a(){var e,t;Object(l.a)(this,a);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(t=Object(n.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(c)))).state={guru:[],guruId:"",guruName:"",semester:[],semesterId:"",semesterName:"",kelas:[],kelasId:"",kelasName:"",pelajaran:[],pelajaranId:"",pelajaranName:"",isModal:!1,gId:"",jId:"",sId:"",kId:"",pId:"",fileName:"",tempFile:Math.random().toString(36),isPreview:!1,detailKinerja:{},formatKpi:"",menguasai:0,tidak:0,nilaiMurid:[]},t.changeGuru=function(e){var a=Object(m.a)(t.state.kinerja).filter((function(a){return a.pengajar==e.target.value})),l=t.findUnique(a,(function(e){return e.semester_id})),r=Object(m.a)(t.state.guru).filter((function(a){return a.pengajar==e.target.value}));t.setState({guruId:e.target.value,kinerja:a,guruName:r[0].nama,semester:l})},t.changeSemester=function(e){var a=Object(m.a)(t.state.kinerja).filter((function(a){return a.semester_id==e.target.value})),l=t.findUnique(a,(function(e){return e.kelas_id})),r=Object(m.a)(t.state.semester).filter((function(a){return a.semester_id==e.target.value}));t.setState({semesterId:e.target.value,kinerja:a,semesterName:r[0].semester,kelas:l})},t.changeKelas=function(e){var a=Object(m.a)(t.state.kinerja).filter((function(a){return a.kelas_id==e.target.value})),l=t.findUnique(a,(function(e){return e.pelajaran_id})),r=Object(m.a)(t.state.kelas).filter((function(a){return a.kelas_id==e.target.value}));t.setState({kelasId:e.target.value,kinerja:a,kelasName:r[0].kelas,pelajaran:l})},t.changePelajaran=function(e){var a=Object(m.a)(t.state.kinerja).filter((function(a){return a.pelajaran_id==e.target.value})),l=Object(m.a)(t.state.pelajaran).filter((function(a){return a.pelajaran_id==e.target.value}));t.setState({pelajaranId:e.target.value,kinerja:a,pelajaranName:l[0].pelajaran}),t.fetchNilaiMurid(t.state.kelasId,e.target.value)},t.openModal=function(e){t.setState({isModal:!0,jId:e.target.getAttribute("data-jadwal"),gId:e.target.getAttribute("data-guru"),sId:e.target.getAttribute("data-semester"),kId:e.target.getAttribute("data-kelas"),pId:e.target.getAttribute("data-pelajaran")})},t.submitKPI=function(e){e.preventDefault();var a=new FormData;a.append("file",t.state.fileName),a.append("jadwalId",t.state.jId),a.append("guruId",t.state.gId),a.append("semesterId",t.state.sId),a.append("kelasId",t.state.kId),a.append("pelajaranId",t.state.pId),g.l.post("".concat(g.a,"v2/principal/upload"),a).then((function(e){console.log("res: ",e.data),e.data.error&&b.b.warning("Error: upload KPI"),b.b.success("Berhasil upload KPI Guru"),t.clearFilter()}))},t.openPreview=function(e){var a=Object(m.a)(t.state.kinerja)[e.target.getAttribute("data-index")];t.setState({isPreview:!0,detailKinerja:a})},t}return Object(i.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchKinerja(),this.fetchNewestFormat()}},{key:"clearPreview",value:function(){this.setState({isPreview:!1,detailKinerja:{}})}},{key:"clearFilter",value:function(){var e=this;g.l.get("".concat(g.a,"v2/principal/kpi-guru/").concat(o.a.get("user").data.company_id)).then((function(a){e.setState({tempFile:Math.random().toString(36),jId:"",sId:"",gId:"",kId:"",pId:"",fileName:"",isModal:!1,semesterId:"",guruId:"",kelasId:"",pelajaranId:"",kinerja:a.data.result,guruName:"",semesterName:"",kelasName:"",pelajaranName:"",menguasai:"",tidak:"",nilaiMurid:[]})}))}},{key:"fetchKinerja",value:function(){var e=this;g.l.get("".concat(g.a,"v2/principal/kpi-guru/").concat(o.a.get("user").data.company_id)).then((function(a){var t=e.findUnique(a.data.result,(function(e){return e.pengajar}));e.setState({kinerja:a.data.result,guru:t})}))}},{key:"fetchNilaiMurid",value:function(e,a){var t=this;console.log("Query: ".concat(e," ").concat(a)),g.l.get("".concat(g.a,"v2/guru/nilai-kelas/").concat(e,"/").concat(a)).then((function(e){var a=e.data.result.filter((function(e){return e.quiz+e.exam+e.task>=50})).length,l=e.data.result.filter((function(e){return e.quiz+e.exam+e.task<50})).length;t.setState({nilaiMurid:e.data.result,menguasai:a,tidak:l})}))}},{key:"fetchNewestFormat",value:function(){var e=this;g.l.get("".concat(g.a,"v2/learning-kpi/company/").concat(o.a.get("user").data.company_id)).then((function(a){a.data.result.length?e.setState({formatKpi:a.data.result[a.data.result.length-1].file}):b.b.info("Format KPI belum di upload oleh Admin.")}))}},{key:"findUnique",value:function(e,a){var t={};return e.forEach((function(e){t[a(e)]=e})),Object.keys(t).map((function(e){return t[e]}))}},{key:"render",value:function(){var e=this,a={labels:["Responden"],datasets:[{label:"Menguasai",backgroundColor:"#28a745",borderColor:"#0b2e13",borderWidth:1,hoverBackgroundColor:"#1a692c",hoverBorderColor:"#0b2e13",data:[this.state.menguasai]},{label:"Tidak Menguasai",backgroundColor:"#fa3e3e",borderColor:"#b12e2e",borderWidth:1,hoverBackgroundColor:"#7c2323",hoverBorderColor:"#b12e2e",data:[this.state.tidak]}]};return u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-12"},u.a.createElement("div",{className:"card",style:{paddingBottom:10}},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-xl-12 pl-5 mb-4"},u.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3 mt-3"},"Laporan Evaluasi"),u.a.createElement("div",{className:"form-group row"},u.a.createElement("div",{className:"col-sm-3"},u.a.createElement("label",null,"Guru"),u.a.createElement("select",{onChange:this.changeGuru,disabled:this.state.guruId,value:this.state.guruId,className:"form-control"},u.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.guru.map((function(e){return u.a.createElement("option",{value:e.pengajar},e.nama)})))),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("label",null,"Semester"),u.a.createElement("select",{onChange:this.changeSemester,disabled:this.state.semesterId,value:this.state.semesterId,className:"form-control"},u.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.semester.map((function(e){return u.a.createElement("option",{value:e.semester_id},e.semester)})))),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("label",null,"Kelas"),u.a.createElement("select",{onChange:this.changeKelas,disabled:this.state.kelasId,value:this.state.kelasId,className:"form-control"},u.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.kelas.map((function(e){return u.a.createElement("option",{value:e.kelas_id},e.kelas)})))),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("label",null,"Pelajaran"),u.a.createElement("select",{onChange:this.changePelajaran,disabled:this.state.pelajaranId,value:this.state.pelajaranId,className:"form-control"},u.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.pelajaran.map((function(e){return u.a.createElement("option",{value:e.pelajaran_id},e.pelajaran)})))),u.a.createElement("div",{className:"col-sm-2"},u.a.createElement("button",{className:"btn btn-v2 btn-success mt-4",onClick:function(){return e.clearFilter()}},"Reset Filter")))),u.a.createElement("div",{className:"col-xl-6 p-5"},u.a.createElement(p.Bar,{data:a,options:{scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]}}})),u.a.createElement("div",{className:"col-xl-6 p-5"},u.a.createElement("div",{style:{overflowX:"auto"}},u.a.createElement("table",{className:"table"},u.a.createElement("tr",null,u.a.createElement("td",{style:{background:"#FAFAFA",border:"4px solid white"}},u.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Nama Guru")),u.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},u.a.createElement("b",{className:"fc-skyblue"},this.state.guruName))),u.a.createElement("tr",null,u.a.createElement("td",{width:"200px",style:{background:"#FAFAFA",border:"4px solid white"}},u.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Semester")),u.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},u.a.createElement("b",{className:"fc-skyblue"},this.state.semesterName))),u.a.createElement("tr",null,u.a.createElement("td",{width:"200px",style:{background:"#FAFAFA",border:"4px solid white"}},u.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Nama Kelas")),u.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},u.a.createElement("b",{className:"fc-skyblue"},this.state.kelasName))),u.a.createElement("tr",null,u.a.createElement("td",{width:"200px",style:{background:"#FAFAFA",border:"4px solid white"}},u.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Mata Pelajaran")),u.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},u.a.createElement("b",{className:"fc-skyblue"},this.state.pelajaranName)))))),u.a.createElement("div",{className:"col-xl-12 p-5"},u.a.createElement("table",{className:"table table-striped table-bordered"},u.a.createElement("thead",null,u.a.createElement("tr",{className:"text-center"},u.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NO "),u.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NIK "),u.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NAMA "),u.a.createElement("td",{colSpan:"3"},"NILAI HASIL BELAJAR"),u.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"NILAI AKHIR"),u.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"STATUS")),u.a.createElement("tr",{className:"text-center"},u.a.createElement("td",null,"TASK"),u.a.createElement("td",null,"QUIZ"),u.a.createElement("td",null,"EXAM"))),u.a.createElement("tbody",null,this.state.isLoading&&u.a.createElement("tr",null,u.a.createElement("td",{className:"text-center",colSpan:"8"},u.a.createElement("span",null,"Loading..."))),this.state.nilaiMurid.map((function(e,a){return u.a.createElement("tr",{className:"text-center"},u.a.createElement("td",null,a+1),u.a.createElement("td",null,e.no_induk),u.a.createElement("td",null,e.nama),u.a.createElement("td",null,e.task),u.a.createElement("td",null,e.quiz),u.a.createElement("td",null,e.exam),u.a.createElement("td",null,e.task+e.quiz+e.exam),u.a.createElement("td",null,e.task+e.quiz+e.exam>=50?u.a.createElement("span",{class:"label label-success"},"Lulus"):u.a.createElement("span",{class:"label label-danger"},"Mengulang")))})))))))))}}]),a}(d.Component),v=t(15),E=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(n.a)(this,Object(s.a)(a).call(this,e))).goBack=t.goBack.bind(Object(c.a)(t)),t}return Object(i.a)(a,e),Object(r.a)(a,[{key:"goBack",value:function(){this.props.history.goBack()}},{key:"render",value:function(){o.a.get("user").data.level;return u.a.createElement("div",{className:"pcoded-main-container"},u.a.createElement("div",{className:"pcoded-wrapper"},u.a.createElement("div",{className:"pcoded-content"},u.a.createElement("div",{className:"pcoded-inner-content"},u.a.createElement("div",{className:"main-body"},u.a.createElement("div",{className:"page-wrapper"},u.a.createElement("div",{className:"floating-back"},u.a.createElement(v.b,{to:"/"},u.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90}))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-xl-12"},u.a.createElement(f,null)))))))))}}]),a}(d.Component);a.default=E}}]);
//# sourceMappingURL=137.7c5ac046.chunk.js.map
{"version":3,"sources":["components/news/view.js"],"names":["ViewNews","props","closeModalDelete","e","setState","modalDelete","deleteId","handleContent","content","edited","handleChange","target","name","value","files","length","size","image","imagePreview","URL","createObjectURL","toast","warning","state","id","match","params","companyId","isSaving","userId","title","disabledForm","author","created_at","goBack","bind","this","history","API","get","API_SERVER","then","res","data","error","result","moment","tz","guess","format","USER_ME","Storage","email","status","localStorage","getItem","company_id","user_id","getUserData","getData","session","media","className","src","alt","width","onClick","style","color","level","to","padding","marginRight","fontSize","maxHeight","dangerouslySetInnerHTML","__html","Component"],"mappings":"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","file":"static/js/46.7dee18ca.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport API, { API_SERVER, USER_ME } from '../../repository/api';\nimport Storage from '../../repository/storage';\nimport moment from 'moment-timezone';\nimport { Link } from \"react-router-dom\";\n\nclass ViewNews extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        edited: false,\n        id: this.props.match.params.id ? this.props.match.params.id : '',\n        companyId:'',\n        image:'',\n        imagePreview:'assets/images/no-image.png',\n        isSaving: false,\n        userId: '',\n        content:'Loading...',\n        title: '',\n        modalDelete: false,\n        disabledForm: this.props.disabledForm && this.props.id,\n        author:'',\n        created_at: ''\n    };\n    this.goBack = this.goBack.bind(this);\n  }\n  \n  goBack() {\n    this.props.history.goBack();\n  }\n\n  closeModalDelete = e => {\n    this.setState({ modalDelete: false, deleteId: '' })\n  }\n\n\nhandleContent = (e) => {\n    this.setState({ content: e, edited:true });\n}\n  handleChange = e => {\n    this.setState({edited: true})\n      let {name, value} = e.target;\n      if (name==='image'){\n        if (e.target.files.length){\n            if (e.target.files[0].size <= 5000000) {\n                let image = {\n                    image: e.target.files[0],\n                    imagePreview: URL.createObjectURL(e.target.files[0])\n                }\n                this.setState(image)\n            } else {\n              e.target.value = null;\n              toast.warning('Image size cannot larger than 5MB and must be an image file')\n            }\n        }\n      }\n      else{\n          this.setState({[name]: value})\n      }\n  }\n  getData(id){\n    API.get(`${API_SERVER}v2/news/read/${id}`).then(res => {\n        if (res.data.error){\n            toast.error('Error read news')\n        }\n        else{\n            this.setState({\n                id: res.data.result.id,\n                content: res.data.result.content,\n                title: res.data.result.title,\n                imagePreview: res.data.result.image ? res.data.result.image : this.state.imagePreview,\n                author: res.data.result.author,\n                created_at: moment.tz(res.data.result.created_at, moment.tz.guess(true)).format(\"MMMM Do YYYY, h:mm:ss a\")\n            })\n        }\n    })\n  }\n  getUserData(){\n    API.get(`${USER_ME}${Storage.get('user').data.email}`).then(res => {\n        if (res.status === 200) {\n          this.setState({ companyId: localStorage.getItem('companyID') ? localStorage.getItem('companyID') : res.data.result.company_id, userId: res.data.result.user_id });\n        }\n    })\n  }\n  componentDidMount(){\n    this.getUserData();\n    if (this.props.disabledForm && this.props.id){\n        this.getData(this.props.id);\n    }\n    else if (this.props.match.params.id){\n        this.getData(this.props.match.params.id);\n    }\n    else{\n        this.setState({\n            content : ''\n        })\n    }\n  }\n\n  clearSessionForm(){\n    this.setState({\n        edited: false,\n        content : ''\n      })\n  }\n\n  render() {\n    let {session, media} = this.state;\n    return(\n        <div className=\"pcoded-main-container\">\n            <div className=\"pcoded-wrapper\">\n                <div className=\"pcoded-content\">\n                    <div className=\"pcoded-inner-content\">\n                        <div className=\"main-body\">\n                            <div className=\"page-wrapper\">\n                                <div className=\"floating-back\">\n                                    <img\n                                    src={`newasset/back-button.svg`}\n                                    alt=\"\"\n                                    width={90}\n                                    onClick={this.goBack}\n                                    ></img>\n                                </div>\n                                <div className=\"row\">\n                                    <div className=\"col-xl-12\">\n                                        <div>\n                                            <div className=\"card p-20\">\n                                                <div className=\"row\">\n                                                    <div className=\"col-sm-10 m-b-10\">\n                                                        <strong className=\"f-w-bold f-18\" style={{color:'#000'}}>{this.state.title}</strong>\n                                                    </div>\n                                                    <div className=\"col-sm-2 m-b-20\">\n                                                        {\n                                                        Storage.get('user').data.level !== 'client' &&\n                                                        <Link\n                                                        to={`/news/edit/${this.state.id}`}>\n                                                            <button\n                                                            className=\"btn btn-icademy-primary float-right\"\n                                                            style={{ padding: \"7px 8px !important\", marginRight: 30 }}>\n                                                                <i className=\"fa fa-edit\"></i>\n                                                                Edit\n                                                            </button>\n                                                        </Link>\n                                                        }\n                                                    </div>\n                                                </div>\n                                                <div className=\"row\">\n                                                    <div className=\"form-field-top-label\" style={{fontSize:12}}>\n                                                        Posted on {this.state.created_at}\n                                                    </div>\n                                                </div>\n                                                <div className=\"form-section no-border\">\n                                                    <div className=\"row\">\n                                                        <div className=\"form-field-top-label\">\n                                                            <img src={this.state.imagePreview} style={{maxHeight:300}} />\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"row\">\n                                                        <div className=\"html-content\">\n                                                            <div dangerouslySetInnerHTML={{__html: this.state.content}}></div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n  }\n}\n\nexport default ViewNews;\n"],"sourceRoot":""}
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[46],{1061:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),r=a(18),l=a(3),n=a(2),c=a(19),m=a.n(c),d=a(10);class o extends s.Component{constructor(e){super(e),this.closeModalDelete=e=>{this.setState({modalDelete:!1,deleteId:""})},this.handleContent=e=>{this.setState({content:e,edited:!0})},this.handleChange=e=>{this.setState({edited:!0});let{name:t,value:a}=e.target;if("image"===t){if(e.target.files.length)if(e.target.files[0].size<=5e6){let t={image:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])};this.setState(t)}else e.target.value=null,r.b.warning("Image size cannot larger than 5MB and must be an image file")}else this.setState({[t]:a})},this.state={edited:!1,id:this.props.match.params.id?this.props.match.params.id:"",companyId:"",image:"",imagePreview:"assets/images/no-image.png",isSaving:!1,userId:"",content:"Loading...",title:"",modalDelete:!1,disabledForm:this.props.disabledForm&&this.props.id,author:"",created_at:""},this.goBack=this.goBack.bind(this)}goBack(){this.props.history.goBack()}getData(e){l.l.get("".concat(l.a,"v2/news/read/").concat(e)).then(e=>{e.data.error?r.b.error("Error read news"):this.setState({id:e.data.result.id,content:e.data.result.content,title:e.data.result.title,imagePreview:e.data.result.image?e.data.result.image:this.state.imagePreview,author:e.data.result.author,created_at:m.a.tz(e.data.result.created_at,m.a.tz.guess(!0)).format("MMMM Do YYYY, h:mm:ss a")})})}getUserData(){l.l.get("".concat(l.j).concat(n.a.get("user").data.email)).then(e=>{200===e.status&&this.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):e.data.result.company_id,userId:e.data.result.user_id})})}componentDidMount(){this.getUserData(),this.props.disabledForm&&this.props.id?this.getData(this.props.id):this.props.match.params.id?this.getData(this.props.match.params.id):this.setState({content:""})}clearSessionForm(){this.setState({edited:!1,content:""})}render(){let{session:e,media:t}=this.state;return i.a.createElement("div",{className:"pcoded-main-container"},i.a.createElement("div",{className:"pcoded-wrapper"},i.a.createElement("div",{className:"pcoded-content"},i.a.createElement("div",{className:"pcoded-inner-content"},i.a.createElement("div",{className:"main-body"},i.a.createElement("div",{className:"page-wrapper"},i.a.createElement("div",{className:"floating-back"},i.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90,onClick:this.goBack})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xl-12"},i.a.createElement("div",null,i.a.createElement("div",{className:"card p-20"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-10 m-b-10"},i.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},this.state.title)),i.a.createElement("div",{className:"col-sm-2 m-b-20"},"client"!==n.a.get("user").data.level&&i.a.createElement(d.b,{to:"/news/edit/".concat(this.state.id)},i.a.createElement("button",{className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},i.a.createElement("i",{className:"fa fa-edit"}),"Edit")))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-field-top-label",style:{fontSize:12}},"Posted on ",this.state.created_at)),i.a.createElement("div",{className:"form-section no-border"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-field-top-label"},i.a.createElement("img",{src:this.state.imagePreview,style:{maxHeight:300}}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"html-content"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}}))))))))))))))}}t.default=o}}]);
//# sourceMappingURL=46.9b6c9c8f.chunk.js.map
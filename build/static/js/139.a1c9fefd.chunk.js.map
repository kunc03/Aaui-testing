{"version":3,"sources":["components/principalPembelajaran/index.js"],"names":["PembelajaranPrincipal","state","idPelajaran","namaPelajaran","kategori","kodePelajaran","kelas","listKelas","listPelajaran","openSilabus","pelajaranId","silabusId","pelajaranNama","sesi","topik","tujuan","deskripsi","jenis","files","tempFiles","Math","random","toString","silabus","nilaiTugas","nilaiKuis","nilaiUjian","openProsentase","e","preventDefault","setState","target","getAttribute","fetchProsentase","saveProsentase","form","tugas","kuis","ujian","API","put","API_SERVER","then","res","data","error","toast","warning","success","savePelajaran","console","log","fetchPelajaran","companyId","Storage","get","company_id","post","clearForm","selectPelajaran","idKelas","getKelas","result","nama_pelajaran","kode_pelajaran","deletePelajaran","delete","fetchSilabus","saveSilabus","addKuisSilabus","selectSilabus","id","parseInt","deleteSilabus","this","fetchKelas","info","uploadFile","clearFormSilabus","FormData","i","length","append","level","className","to","src","alt","width","style","padding","map","item","key","onClick","data-id","pelajaran_id","data-title","show","onHide","closeProsentase","bind","Header","closeButton","Title","color","Body","onSubmit","required","type","value","onChange","closeModal","dialogClassName","href","colSpan","React","Component"],"mappings":"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","file":"static/js/139.a1c9fefd.chunk.js","sourcesContent":["import React from 'react';\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport API, { API_SERVER } from '../../repository/api';\r\nimport Storage from '../../repository/storage';\r\n\r\nimport { Modal } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\n\r\nclass PembelajaranPrincipal extends React.Component {\r\n  state = {\r\n    idPelajaran: '',\r\n    namaPelajaran: '',\r\n    kategori: '',\r\n    kodePelajaran: '',\r\n    kelas: '',\r\n\r\n    listKelas: [],\r\n    listPelajaran: [],\r\n\r\n    openSilabus: false,\r\n    pelajaranId: '',\r\n    silabusId: '',\r\n    pelajaranNama: '',\r\n    sesi: '',\r\n    topik: '',\r\n    tujuan: '',\r\n    deskripsi: '',\r\n    jenis: 0,\r\n    files: null,\r\n    tempFiles: Math.random().toString(36),\r\n\r\n    silabus: [],\r\n\r\n    nilaiTugas: 0,\r\n    nilaiKuis: 0,\r\n    nilaiUjian: 0,\r\n    openProsentase: false,\r\n\r\n  }\r\n\r\n  openProsentase = e => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      pelajaranId: e.target.getAttribute('data-id'),\r\n      pelajaranNama: e.target.getAttribute('data-title'),\r\n      openProsentase: true\r\n    })\r\n    this.fetchProsentase(e.target.getAttribute('data-id'))\r\n  }\r\n\r\n  saveProsentase = e => {\r\n    e.preventDefault()\r\n    let form = {\r\n      tugas: this.state.nilaiTugas,\r\n      kuis: this.state.nilaiKuis,\r\n      ujian: this.state.nilaiUjian\r\n    };\r\n    API.put(`${API_SERVER}v2/nilai-pelajaran/${this.state.pelajaranId}`, form).then(res => {\r\n      if(res.data.error) toast.warning(`Warning: update prosentase`)\r\n\r\n      toast.success('Set prosentase nilai berhasil disimpan');\r\n      this.fetchProsentase(this.state.pelajaranId)\r\n    })\r\n  }\r\n\r\n  fetchProsentase(pelajaranId) {\r\n    API.get(`${API_SERVER}v2/nilai-pelajaran/${pelajaranId}`).then(res => {\r\n      if(res.data.error) toast.warning(`Warning: fetch prosentase`);\r\n\r\n      this.setState({\r\n        nilaiTugas: res.data.result.tugas,\r\n        nilaiKuis: res.data.result.kuis,\r\n        nilaiUjian: res.data.result.ujian,\r\n      })\r\n    })\r\n  }\r\n\r\n  closeProsentase() {\r\n    this.setState({\r\n      nilaiTugas: 0,\r\n      nilaiKuis: 0,\r\n      nilaiUjian: 0,\r\n      openProsentase: false,\r\n    })\r\n  }\r\n\r\n  closeModal() {\r\n    this.fetchPelajaran();\r\n    this.setState({\r\n      openSilabus: false,\r\n      silabus: [],\r\n      pelajaranId: '',\r\n      pelajaranNama: '',\r\n      sesi: '',\r\n      topik: '',\r\n      tujuan: '',\r\n      deskripsi: '',\r\n      jenis: 0,\r\n    })\r\n  }\r\n\r\n  clearFormSilabus() {\r\n    this.setState({\r\n      silabusId: '',\r\n      sesi: '',\r\n      topik: '',\r\n      tujuan: '',\r\n      deskripsi: '',\r\n      jenis: 0,\r\n      files: null,\r\n      tempFiles: Math.random().toString(36),\r\n    })\r\n  }\r\n\r\n  savePelajaran = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.idPelajaran) {\r\n      // action for update\r\n      console.log('update')\r\n      let form = {\r\n        namaPelajaran: this.state.namaPelajaran,\r\n        kategori: this.state.kategori,\r\n        kodePelajaran: this.state.kodePelajaran\r\n      }\r\n      API.put(`${API_SERVER}v2/pelajaran/update/${this.state.idPelajaran}`, form).then(res => {\r\n        if (res.data.error) toast.warning(\"Error create pelajaran\")\r\n\r\n        this.fetchPelajaran();\r\n      })\r\n\r\n    } else {\r\n      // action for insert\r\n      console.log('insert')\r\n      let form = {\r\n        companyId: Storage.get('user').data.company_id,\r\n        namaPelajaran: this.state.namaPelajaran,\r\n        kategori: this.state.kategori,\r\n        kodePelajaran: this.state.kodePelajaran\r\n      }\r\n      API.post(`${API_SERVER}v2/pelajaran/create`, form).then(res => {\r\n        if (res.data.error) toast.warning(\"Error create pelajaran\")\r\n\r\n        this.fetchPelajaran();\r\n      })\r\n    }\r\n\r\n    this.clearForm();\r\n\r\n  }\r\n\r\n  selectPelajaran = e => {\r\n    e.preventDefault();\r\n    let idKelas = e.target.getAttribute('data-id');\r\n    API.get(`${API_SERVER}v2/pelajaran/one/${idKelas}`).then(res => {\r\n      if (res.data.error) toast.warning(\"Error fetch data kelas\");\r\n      let getKelas = res.data.result;\r\n\r\n      this.setState({\r\n        idPelajaran: idKelas,\r\n        namaPelajaran: getKelas.nama_pelajaran,\r\n        kategori: getKelas.kategori,\r\n        kodePelajaran: getKelas.kode_pelajaran,\r\n      })\r\n    })\r\n  }\r\n\r\n  deletePelajaran = e => {\r\n    e.preventDefault();\r\n    API.delete(`${API_SERVER}v2/pelajaran/delete/${e.target.getAttribute('data-id')}`).then(res => {\r\n      if (res.data.error) toast.warning(`Error: delete pelajaran`)\r\n\r\n      this.fetchPelajaran();\r\n    })\r\n  }\r\n\r\n  clearForm() {\r\n    this.setState({\r\n      idPelajaran: '',\r\n      namaPelajaran: '',\r\n      kategori: '',\r\n      kodePelajaran: '',\r\n      kelas: ''\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchPelajaran();\r\n    this.fetchKelas();\r\n  }\r\n\r\n  fetchKelas() {\r\n    API.get(`${API_SERVER}v2/kelas/company/${Storage.get('user').data.company_id}`).then(res => {\r\n      if (res.data.error) toast.warning(\"Error fetch data kelas\");\r\n\r\n      this.setState({ listKelas: res.data.result })\r\n    })\r\n  }\r\n\r\n  fetchPelajaran() {\r\n    API.get(`${API_SERVER}v2/pelajaran/company/${Storage.get('user').data.company_id}`).then(res => {\r\n      if (res.data.error) toast.warning(\"Error fetch data kelas\");\r\n\r\n      this.setState({ listPelajaran: res.data.result })\r\n    })\r\n  }\r\n\r\n  openSilabus = e => {\r\n    e.preventDefault()\r\n    this.setState({\r\n      pelajaranId: e.target.getAttribute('data-id'),\r\n      pelajaranNama: e.target.getAttribute('data-title'),\r\n      openSilabus: true\r\n    })\r\n    this.fetchSilabus(e.target.getAttribute('data-id'));\r\n  }\r\n\r\n  fetchSilabus(pelajaranId) {\r\n    API.get(`${API_SERVER}v2/silabus/pelajaran/${pelajaranId}`).then(res => {\r\n      if (res.data.error) toast.info(`Error: fetch silabus`)\r\n\r\n      this.setState({ silabus: res.data.result })\r\n    })\r\n  }\r\n\r\n  addKuisSilabus(jenis) {\r\n    let form = {\r\n      pelajaranId: this.state.pelajaranId,\r\n      sesi: this.state.sesi,\r\n      topik: this.state.topik,\r\n      tujuan: this.state.tujuan,\r\n      deskripsi: this.state.deskripsi,\r\n      jenis: jenis,\r\n    }\r\n\r\n    if (this.state.silabusId) {\r\n      API.put(`${API_SERVER}v2/silabus/update/${this.state.silabusId}`, form).then(res => {\r\n        if (res.data.error) toast.warning(`Error: edit silabus`)\r\n\r\n        if (this.state.files) {\r\n          this.uploadFile(this.state.silabusId)\r\n        }\r\n\r\n        this.fetchSilabus(this.state.pelajaranId);\r\n        this.clearFormSilabus()\r\n      })\r\n    } else {\r\n      API.post(`${API_SERVER}v2/silabus/create`, form).then(res => {\r\n        if (res.data.error) toast.warning(`Error: create silabus`)\r\n\r\n        if (this.state.files) {\r\n          this.uploadFile(res.data.result.id)\r\n        }\r\n\r\n        this.fetchSilabus(this.state.pelajaranId);\r\n        this.clearFormSilabus()\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  saveSilabus = e => {\r\n    e.preventDefault();\r\n    this.addKuisSilabus(this.state.jenis);\r\n  }\r\n\r\n  uploadFile(silabusId) {\r\n    let form = new FormData();\r\n    for (var i = 0; i < this.state.files.length; i++) {\r\n      form.append('files', this.state.files[i]);\r\n    }\r\n\r\n    API.put(`${API_SERVER}v2/silabus/files/${silabusId}`, form).then(res => {\r\n      if (res.data.error) toast.warning(`Error: upload file`)\r\n\r\n      this.fetchSilabus(this.state.pelajaranId);\r\n    })\r\n  }\r\n\r\n  selectSilabus = e => {\r\n    API.get(`${API_SERVER}v2/silabus/id/${e.target.getAttribute('data-id')}`).then(res => {\r\n      if (res.data.error) toast.warning(`Error: get one silabus`)\r\n\r\n      this.setState({\r\n        silabusId: res.data.result.id,\r\n        sesi: res.data.result.sesi,\r\n        topik: res.data.result.topik,\r\n        tujuan: res.data.result.tujuan,\r\n        deskripsi: res.data.result.deskripsi,\r\n        jenis: parseInt(res.data.result.jenis),\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteSilabus = e => {\r\n    e.preventDefault();\r\n    API.delete(`${API_SERVER}v2/silabus/delete/${e.target.getAttribute('data-id')}`).then(res => {\r\n      if (res.data.error) toast.warning(`Error: delete silabus`)\r\n\r\n      this.fetchSilabus(this.state.pelajaranId);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    let levelUser = Storage.get('user').data.level;\r\n    let access_project_admin = levelUser == 'admin' || levelUser == 'superadmin' ? true : false;\r\n    return (\r\n      <div className=\"pcoded-main-container\">\r\n        <div className=\"pcoded-wrapper\">\r\n          <div className=\"pcoded-content\">\r\n            <div className=\"pcoded-inner-content\">\r\n              <div className=\"main-body\">\r\n                <div className=\"page-wrapper\">\r\n\r\n                <div className=\"floating-back\">\r\n                  <Link to={`/`}>\r\n                    <img\r\n                      src={`newasset/back-button.svg`}\r\n                      alt=\"\"\r\n                      width={90}\r\n                    />\r\n                  </Link>\r\n                </div>\r\n\r\n                  <div className=\"row mt-3\">\r\n                    <div className=\"col-sm-12\">\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header\">\r\n                          <h4 className=\"f-w-900 f-18 fc-blue\">Pelajaran</h4>\r\n                        </div>\r\n                        <div className=\"card-body\" style={{ padding: '5px' }}>\r\n                          <table className=\"table table-striped\">\r\n                            <thead>\r\n                              <tr>\r\n                                <th>No</th>\r\n                                <th>Kode</th>\r\n                                <th>Pelajaran</th>\r\n                                <th>Category</th>\r\n                                <th>Silabus</th>\r\n                                <th>Bobot %</th>\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                              {\r\n                                this.state.listPelajaran.map((item, i) => (\r\n                                  <tr key={i}>\r\n                                    <td>{i + 1}</td>\r\n                                    <td>{item.kode_pelajaran}</td>\r\n                                    <td>{item.nama_pelajaran}</td>\r\n                                    <td>{item.kategori}</td>\r\n                                    <td style={{ padding: '12px' }}>\r\n                                      {\r\n                                      item.silabus > 0 ?\r\n                                      <span onClick={this.openSilabus} data-id={item.pelajaran_id} data-title={item.nama_pelajaran} className=\"silabus\"><i className={`fa fa-${item.silabus > 0 ? 'share' : 'plus'}`}></i> Open</span>\r\n                                      :\r\n                                      null\r\n                                      }\r\n                                    </td>\r\n                                    <td style={{ padding: '12px' }}>\r\n                                      <span onClick={this.openProsentase} data-id={item.pelajaran_id} data-title={item.nama_pelajaran} className=\"silabus\"><i className={`fa fa-cog`}></i> Open</span>\r\n                                    </td>\r\n\r\n                                  </tr>\r\n                                ))\r\n                              }\r\n                            </tbody>\r\n                          </table>\r\n\r\n                          <Modal\r\n                            show={this.state.openProsentase}\r\n                            onHide={this.closeProsentase.bind(this)}\r\n                          >\r\n                            <Modal.Header closeButton>\r\n                              <Modal.Title className=\"text-c-purple3 f-w-bold\" style={{ color: '#00478C' }}>\r\n                                {this.state.pelajaranNama}\r\n                              </Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>\r\n                              <form onSubmit={this.saveProsentase}>\r\n                                <div className=\"form-group row\">\r\n                                  <div className=\"col-sm-4\">\r\n                                    <label>Tugas</label>\r\n                                    <input className=\"form-control\" required type=\"number\" value={this.state.nilaiTugas} onChange={e => this.setState({ nilaiTugas: e.target.value })} />\r\n                                  </div>\r\n                                  <div className=\"col-sm-4\">\r\n                                    <label>Kuis</label>\r\n                                    <input  className=\"form-control\" required type=\"number\" value={this.state.nilaiKuis} onChange={e => this.setState({ nilaiKuis: e.target.value })} />\r\n                                  </div>\r\n                                  <div className=\"col-sm-4\">\r\n                                    <label>Ujian</label>\r\n                                    <input  className=\"form-control\" required type=\"number\" value={this.state.nilaiUjian} onChange={e => this.setState({ nilaiUjian: e.target.value })} />\r\n                                  </div>\r\n                                </div>\r\n                              </form>\r\n                            </Modal.Body>\r\n                          </Modal>\r\n\r\n                          <Modal\r\n                            show={this.state.openSilabus}\r\n                            onHide={this.closeModal.bind(this)}\r\n                            dialogClassName=\"modal-lg modal-1000-large\"\r\n                          >\r\n                            <Modal.Header closeButton>\r\n                              <Modal.Title className=\"text-c-purple3 f-w-bold\" style={{ color: '#00478C' }}>\r\n                                Silabus {this.state.pelajaranNama}\r\n                              </Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>\r\n\r\n                              <table className=\"table table-striped\">\r\n                                <thead>\r\n                                  <tr>\r\n                                    <th>Sesi</th>\r\n                                    <th>Topik</th>\r\n                                    <th>Tujuan</th>\r\n                                    <th>Deskripsi</th>\r\n                                    <th>Files</th>\r\n                                  </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                  {\r\n                                    this.state.silabus.map((item, i) => {\r\n                                      if (item.jenis === 0) {\r\n                                        return (\r\n                                          <tr key={i}>\r\n                                            <td>{item.sesi}</td>\r\n                                            <td>{item.topik}</td>\r\n                                            <td>{item.tujuan}</td>\r\n                                            <td>{item.deskripsi}</td>\r\n                                            <td style={{ padding: '12px' }}>\r\n                                              {\r\n                                                item.files ? <a href={item.files} target=\"_blank\" className=\"silabus\">Open</a> : 'No files'\r\n                                              }\r\n                                            </td>\r\n\r\n                                          </tr>\r\n                                        )\r\n                                      } else {\r\n                                        return (\r\n                                          <tr key={i}>\r\n                                            <td>{item.sesi}</td>\r\n                                            <td colSpan=\"4\" className=\"text-center\">{item.jenis == 1 ? 'Kuis' : 'Ujian'}</td>\r\n\r\n                                          </tr>\r\n                                        )\r\n                                      }\r\n                                    })\r\n                                  }\r\n                                </tbody>\r\n                              </table>\r\n                            </Modal.Body>\r\n                          </Modal>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PembelajaranPrincipal;\r\n"],"sourceRoot":""}
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[135],{1622:function(e,a,t){"use strict";t.r(a);var l=t(0),s=t.n(l),r=t(2),n=t(558),i=t(3),c=t(18);class d extends l.Component{constructor(){super(...arguments),this.state={guru:[],guruId:"",guruName:"",semester:[],semesterId:"",semesterName:"",kelas:[],kelasId:"",kelasName:"",pelajaran:[],pelajaranId:"",pelajaranName:"",isModal:!1,gId:"",jId:"",sId:"",kId:"",pId:"",fileName:"",tempFile:Math.random().toString(36),isPreview:!1,detailKinerja:{},formatKpi:"",menguasai:0,tidak:0,nilaiMurid:[]},this.changeGuru=e=>{let a=[...this.state.kinerja].filter(a=>a.pengajar==e.target.value),t=this.findUnique(a,e=>e.semester_id),l=[...this.state.guru].filter(a=>a.pengajar==e.target.value);this.setState({guruId:e.target.value,kinerja:a,guruName:l[0].nama,semester:t})},this.changeSemester=e=>{let a=[...this.state.kinerja].filter(a=>a.semester_id==e.target.value),t=this.findUnique(a,e=>e.kelas_id),l=[...this.state.semester].filter(a=>a.semester_id==e.target.value);this.setState({semesterId:e.target.value,kinerja:a,semesterName:l[0].semester,kelas:t})},this.changeKelas=e=>{let a=[...this.state.kinerja].filter(a=>a.kelas_id==e.target.value),t=this.findUnique(a,e=>e.pelajaran_id),l=[...this.state.kelas].filter(a=>a.kelas_id==e.target.value);this.setState({kelasId:e.target.value,kinerja:a,kelasName:l[0].kelas,pelajaran:t})},this.changePelajaran=e=>{let a=[...this.state.kinerja].filter(a=>a.pelajaran_id==e.target.value),t=[...this.state.pelajaran].filter(a=>a.pelajaran_id==e.target.value);this.setState({pelajaranId:e.target.value,kinerja:a,pelajaranName:t[0].pelajaran}),this.fetchNilaiMurid(this.state.kelasId,e.target.value)},this.openModal=e=>{this.setState({isModal:!0,jId:e.target.getAttribute("data-jadwal"),gId:e.target.getAttribute("data-guru"),sId:e.target.getAttribute("data-semester"),kId:e.target.getAttribute("data-kelas"),pId:e.target.getAttribute("data-pelajaran")})},this.submitKPI=e=>{e.preventDefault();let a=new FormData;a.append("file",this.state.fileName),a.append("jadwalId",this.state.jId),a.append("guruId",this.state.gId),a.append("semesterId",this.state.sId),a.append("kelasId",this.state.kId),a.append("pelajaranId",this.state.pId),i.l.post("".concat(i.a,"v2/principal/upload"),a).then(e=>{console.log("res: ",e.data),e.data.error&&c.b.warning("Error: upload KPI"),c.b.success("Berhasil upload KPI Guru"),this.clearFilter()})},this.openPreview=e=>{let a=[...this.state.kinerja][e.target.getAttribute("data-index")];this.setState({isPreview:!0,detailKinerja:a})}}componentDidMount(){this.fetchKinerja(),this.fetchNewestFormat()}clearPreview(){this.setState({isPreview:!1,detailKinerja:{}})}clearFilter(){i.l.get("".concat(i.a,"v2/principal/kpi-guru/").concat(r.a.get("user").data.company_id)).then(e=>{this.setState({tempFile:Math.random().toString(36),jId:"",sId:"",gId:"",kId:"",pId:"",fileName:"",isModal:!1,semesterId:"",guruId:"",kelasId:"",pelajaranId:"",kinerja:e.data.result,guruName:"",semesterName:"",kelasName:"",pelajaranName:"",menguasai:"",tidak:"",nilaiMurid:[]})})}fetchKinerja(){i.l.get("".concat(i.a,"v2/principal/kpi-guru/").concat(r.a.get("user").data.company_id)).then(e=>{let a=this.findUnique(e.data.result,e=>e.pengajar);this.setState({kinerja:e.data.result,guru:a})})}fetchNilaiMurid(e,a){console.log("Query: ".concat(e," ").concat(a)),i.l.get("".concat(i.a,"v2/guru/nilai-kelas/").concat(e,"/").concat(a)).then(e=>{let a=e.data.result.filter(e=>e.quiz+e.exam+e.task>=50).length,t=e.data.result.filter(e=>e.quiz+e.exam+e.task<50).length;this.setState({nilaiMurid:e.data.result,menguasai:a,tidak:t})})}fetchNewestFormat(){i.l.get("".concat(i.a,"v2/learning-kpi/company/").concat(r.a.get("user").data.company_id)).then(e=>{e.data.result.length?this.setState({formatKpi:e.data.result[e.data.result.length-1].file}):c.b.info("Format KPI belum di upload oleh Admin.")})}findUnique(e,a){var t={};return e.forEach(e=>{t[a(e)]=e}),Object.keys(t).map(e=>t[e])}render(){const e={labels:["Responden"],datasets:[{label:"Menguasai",backgroundColor:"#28a745",borderColor:"#0b2e13",borderWidth:1,hoverBackgroundColor:"#1a692c",hoverBorderColor:"#0b2e13",data:[this.state.menguasai]},{label:"Tidak Menguasai",backgroundColor:"#fa3e3e",borderColor:"#b12e2e",borderWidth:1,hoverBackgroundColor:"#7c2323",hoverBorderColor:"#b12e2e",data:[this.state.tidak]}]};return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("div",{className:"card",style:{paddingBottom:10}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-12 pl-5 mb-4"},s.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3 mt-3"},"Laporan Evaluasi"),s.a.createElement("div",{className:"form-group row"},s.a.createElement("div",{className:"col-sm-3"},s.a.createElement("label",null,"Guru"),s.a.createElement("select",{onChange:this.changeGuru,disabled:this.state.guruId,value:this.state.guruId,className:"form-control"},s.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.guru.map(e=>s.a.createElement("option",{value:e.pengajar},e.nama)))),s.a.createElement("div",{className:"col-sm-2"},s.a.createElement("label",null,"Semester"),s.a.createElement("select",{onChange:this.changeSemester,disabled:this.state.semesterId,value:this.state.semesterId,className:"form-control"},s.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.semester.map(e=>s.a.createElement("option",{value:e.semester_id},e.semester)))),s.a.createElement("div",{className:"col-sm-2"},s.a.createElement("label",null,"Kelas"),s.a.createElement("select",{onChange:this.changeKelas,disabled:this.state.kelasId,value:this.state.kelasId,className:"form-control"},s.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.kelas.map(e=>s.a.createElement("option",{value:e.kelas_id},e.kelas)))),s.a.createElement("div",{className:"col-sm-2"},s.a.createElement("label",null,"Pelajaran"),s.a.createElement("select",{onChange:this.changePelajaran,disabled:this.state.pelajaranId,value:this.state.pelajaranId,className:"form-control"},s.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.pelajaran.map(e=>s.a.createElement("option",{value:e.pelajaran_id},e.pelajaran)))),s.a.createElement("div",{className:"col-sm-2"},s.a.createElement("button",{className:"btn btn-v2 btn-success mt-4",onClick:()=>this.clearFilter()},"Reset Filter")))),s.a.createElement("div",{className:"col-xl-6 p-5"},s.a.createElement(n.Bar,{data:e,options:{scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]}}})),s.a.createElement("div",{className:"col-xl-6 p-5"},s.a.createElement("div",{style:{overflowX:"auto"}},s.a.createElement("table",{className:"table"},s.a.createElement("tr",null,s.a.createElement("td",{style:{background:"#FAFAFA",border:"4px solid white"}},s.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Nama Guru")),s.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},s.a.createElement("b",{className:"fc-skyblue"},this.state.guruName))),s.a.createElement("tr",null,s.a.createElement("td",{width:"200px",style:{background:"#FAFAFA",border:"4px solid white"}},s.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Semester")),s.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},s.a.createElement("b",{className:"fc-skyblue"},this.state.semesterName))),s.a.createElement("tr",null,s.a.createElement("td",{width:"200px",style:{background:"#FAFAFA",border:"4px solid white"}},s.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Nama Kelas")),s.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},s.a.createElement("b",{className:"fc-skyblue"},this.state.kelasName))),s.a.createElement("tr",null,s.a.createElement("td",{width:"200px",style:{background:"#FAFAFA",border:"4px solid white"}},s.a.createElement("span",{className:"f-w-800 f-14 text-c-grey ",style:{textTransform:"uppercase"}},"Mata Pelajaran")),s.a.createElement("td",{style:{background:"#F5F5F5",border:"4px solid white"}},s.a.createElement("b",{className:"fc-skyblue"},this.state.pelajaranName)))))),s.a.createElement("div",{className:"col-xl-12 p-5"},s.a.createElement("table",{className:"table table-striped table-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",{className:"text-center"},s.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NO "),s.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NIK "),s.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"}," NAMA "),s.a.createElement("td",{colSpan:"3"},"NILAI HASIL BELAJAR"),s.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"NILAI AKHIR"),s.a.createElement("td",{style:{verticalAlign:"middle"},rowSpan:"2"},"STATUS")),s.a.createElement("tr",{className:"text-center"},s.a.createElement("td",null,"TASK"),s.a.createElement("td",null,"QUIZ"),s.a.createElement("td",null,"EXAM"))),s.a.createElement("tbody",null,this.state.isLoading&&s.a.createElement("tr",null,s.a.createElement("td",{className:"text-center",colSpan:"8"},s.a.createElement("span",null,"Loading..."))),this.state.nilaiMurid.map((e,a)=>s.a.createElement("tr",{className:"text-center"},s.a.createElement("td",null,a+1),s.a.createElement("td",null,e.no_induk),s.a.createElement("td",null,e.nama),s.a.createElement("td",null,e.task),s.a.createElement("td",null,e.quiz),s.a.createElement("td",null,e.exam),s.a.createElement("td",null,e.task+e.quiz+e.exam),s.a.createElement("td",null,e.task+e.quiz+e.exam>=50?s.a.createElement("span",{class:"label label-success"},"Lulus"):s.a.createElement("span",{class:"label label-danger"},"Mengulang")))))))))))}}var m=d,o=t(10);class u extends l.Component{constructor(e){super(e),this.goBack=this.goBack.bind(this)}goBack(){this.props.history.goBack()}render(){r.a.get("user").data.level;return s.a.createElement("div",{className:"pcoded-main-container"},s.a.createElement("div",{className:"pcoded-wrapper"},s.a.createElement("div",{className:"pcoded-content"},s.a.createElement("div",{className:"pcoded-inner-content"},s.a.createElement("div",{className:"main-body"},s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("div",{className:"floating-back"},s.a.createElement(o.b,{to:"/"},s.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-12"},s.a.createElement(m,null)))))))))}}a.default=u}}]);
//# sourceMappingURL=135.144481e8.chunk.js.map
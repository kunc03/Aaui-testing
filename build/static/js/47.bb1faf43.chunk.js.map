{"version":3,"sources":["components/training/membership/form.js"],"names":["FormMembership","Component","constructor","props","super","save","e","preventDefault","this","setState","isSaving","state","image","formData","FormData","append","API","put","API_SERVER","match","params","id","then","res2","data","error","toast","warning","success","handleChange","name","value","target","files","length","size","imagePreview","URL","createObjectURL","companyId","logo","address","phone","fax","website","email","license_number","expired","disabledForm","goBack","bind","history","getCompany","get","res","result","moment","tz","guess","format","photo","getUserData","USER_ME","Storage","status","localStorage","getItem","company_id","componentDidMount","render","className","src","alt","width","onClick","style","color","goEdit","padding","marginRight","fontSize","for","cursor","borderRadius","overflow","href","height","display","type","accept","onChange","disabled","placeholder","rows","cols","justifyContent"],"mappings":"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","file":"static/js/47.bb1faf43.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport API, { API_SERVER, USER_ME } from '../../../repository/api';\nimport Storage from '../../../repository/storage';\nimport moment from 'moment-timezone';\n\nclass FormMembership extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        companyId:'',\n        image:'',\n        logo:'',\n        imagePreview:'assets/images/no-image.png',\n        name: '',\n        address: '',\n        phone: '',\n        fax: '',\n        website: '',\n        email: '',\n        license_number: '',\n        expired: '',\n        isSaving: false,\n        disabledForm: this.props.disabledForm && this.props.id\n    };\n    this.goBack = this.goBack.bind(this);\n  }\n  \n  goBack() {\n    if (this.props.goBack){\n        this.props.goBack();\n    }\n    else{\n        this.props.history.goBack();\n    }\n  }\n\n  save = (e) =>{\n    e.preventDefault();\n    this.setState({isSaving: true})\n    if (this.state.image){\n        let formData = new FormData();\n        formData.append(\"photo\", this.state.image)\n        API.put(`${API_SERVER}v2/training/membership/photo/${this.props.match.params.id}`, formData).then(res2 => {\n            if (res2.data.error){\n                toast.warning('Fail to upload image')\n                this.setState({isSaving: false})\n            }\n            else{\n                toast.success('Membership edited')\n                this.setState({isSaving: false})\n            }\n        })\n    }\n    else{\n        toast.success('Membership edited')\n        this.setState({isSaving: false})\n    }\n}\n\n  handleChange = e => {\n      let {name, value} = e.target;\n      if (name==='image'){\n        if (e.target.files.length){\n            if (e.target.files[0].size <= 5000000) {\n                let image = {\n                    image: e.target.files[0],\n                    imagePreview: URL.createObjectURL(e.target.files[0])\n                }\n                this.setState(image)\n            } else {\n              e.target.value = null;\n              toast.warning('Image size cannot larger than 5MB and must be an image file')\n            }\n        }\n      }\n      else{\n          this.setState({[name]: value})\n      }\n  }\n  getCompany(id){\n    API.get(`${API_SERVER}v2/training/membership/read/${id}`).then(res => {\n        if (res.data.error){\n            toast.error('Error read membership')\n        }\n        else{\n            this.setState({\n                name: res.data.result.name,\n                address: res.data.result.address,\n                phone: res.data.result.phone,\n                email: res.data.result.email,\n                license_number: res.data.result.license_number,\n                expired: moment.tz(res.data.result.expired, moment.tz.guess(true)).format(\"DD-MM-YYYY\"),\n                imagePreview: res.data.result.photo ? res.data.result.photo : this.state.imagePreview\n            })\n        }\n    })\n  }\n  getUserData(){\n    API.get(`${USER_ME}${Storage.get('user').data.email}`).then(res => {\n        if (res.status === 200) {\n          this.setState({ companyId: localStorage.getItem('companyID') ? localStorage.getItem('companyID') : res.data.result.company_id });\n        }\n    })\n  }\n  componentDidMount(){\n    this.getUserData();\n    if (this.props.disabledForm && this.props.id){\n        this.getCompany(this.props.id);\n    }\n    else if (this.props.match.params.id){\n        this.getCompany(this.props.match.params.id);\n    }\n  }\n  render() {\n    return(\n        <div className=\"pcoded-main-container\">\n            <div className=\"pcoded-wrapper\">\n                <div className=\"pcoded-content\">\n                    <div className=\"pcoded-inner-content\">\n                        <div className=\"main-body\">\n                            <div className=\"page-wrapper\">\n                                <div className=\"floating-back\">\n                                    <img\n                                    src={`newasset/back-button.svg`}\n                                    alt=\"\"\n                                    width={90}\n                                    onClick={this.goBack}\n                                    ></img>\n                                </div>\n                                <div className=\"row\">\n                                    <div className=\"col-xl-12\">\n                                        <div>\n                                            <div className=\"card p-20\">\n                                                <div className=\"row\">\n                                                    <div className=\"col-sm-10 m-b-20\">\n                                                        <strong className=\"f-w-bold f-18\" style={{color:'#000'}}>{this.props.id ? 'Detail' : this.props.match.params.id ? 'Edit' : 'Create New'} Membership</strong>\n                                                    </div>\n                                                    <div className=\"col-sm-2 m-b-20\">\n                                                        {\n                                                        this.props.disabledForm &&\n                                                        <button\n                                                        onClick={this.props.goEdit}\n                                                        className=\"btn btn-icademy-primary float-right\"\n                                                        style={{ padding: \"7px 8px !important\", marginRight: 30 }}>\n                                                            <i className=\"fa fa-edit\"></i>\n                                                            Edit\n                                                        </button>\n                                                        }\n                                                    </div>\n                                                </div>\n                                                <div className=\"form-section\">\n                                                    <div className=\"row\">\n                                                        <div className=\"col-sm-12 m-b-20\">\n                                                            <strong className=\"f-w-bold\" style={{color:'#000', fontSize:'15px'}}>Membership Information</strong>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"row\">\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"image\">Member's Photo</label>\n                                                            <center>\n                                                                <label style={{cursor:'pointer', borderRadius:'10px', overflow:'hidden'}}>\n                                                                    <a href={this.state.imagePreview} target=\"_blank\">\n                                                                        <img src={this.state.imagePreview} height=\"54.8px\" />\n                                                                    </a>\n                                                                </label>\n                                                                <label for='image' style={{cursor:'pointer', overflow:'hidden', display: this.state.disabledForm ? 'none' : 'block'}}>\n                                                                    <div className=\"button-bordered-grey\">\n                                                                        {this.state.image ? this.state.image.name : 'Choose file'}\n                                                                    </div>\n                                                                </label>\n                                                            </center>\n                                                            <input type=\"file\" accept=\"image/*\" name=\"image\" id=\"image\" onChange={this.handleChange} disabled={this.state.disabledForm}/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"name\">Name<required>*</required></label>\n                                                            <input type=\"text\" name=\"name\" size=\"50\" id=\"name\" placeholder=\"PT XXX XXX\" value={this.state.name} onChange={this.handleChange} disabled/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"license_number\">License Number<required>*</required></label>\n                                                            <input type=\"text\" name=\"license_number\" size=\"50\" id=\"license_number\" placeholder=\"\" value={this.state.license_number} onChange={this.handleChange} disabled/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"expired\">Expiration Date<required>*</required></label>\n                                                            <input type=\"text\" name=\"expired\" size=\"50\" id=\"expired\" placeholder=\"2021-02-02\" value={this.state.expired} onChange={this.handleChange} disabled/>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"form-section\">\n                                                    <div className=\"row\">\n                                                        <div className=\"col-sm-12 m-b-20\">\n                                                            <strong className=\"f-w-bold\" style={{color:'#000', fontSize:'15px'}}>Address</strong>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"row\">\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"address\">Address<required>*</required></label>\n                                                            <textarea name=\"address\" rows=\"3\" cols=\"60\" id=\"address\" placeholder=\"Jl.Pahlawan Seribu, BSD City, Tangerang, 15322\" value={this.state.address} onChange={this.handleChange} disabled></textarea>\n                                                        </div>\n                                                        {/* <div className=\"form-field-top-label\">\n                                                            <label for=\"street\">Street<required>*</required></label>\n                                                            <input type=\"text\" name=\"street\" id=\"street\" placeholder=\"Jl. Pahlawan Seribu\"/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"province\">Province<required>*</required></label>\n                                                            <input type=\"text\" name=\"province\" id=\"province\" placeholder=\"Banten\"/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"city\">City<required>*</required></label>\n                                                            <input type=\"text\" name=\"city\" id=\"city\" placeholder=\"Tangerang\"/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"district\">District</label>\n                                                            <input type=\"text\" name=\"district\" id=\"district\" placeholder=\"Serpong\"/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"subdistrict\">Sub-district</label>\n                                                            <input type=\"text\" name=\"subdistrict\" id=\"subdistrict\" placeholder=\"Lengkong Gudang\"/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"postal\">Postal Code</label>\n                                                            <input type=\"text\" name=\"postal\" id=\"postal\" placeholder=\"15327\"/>\n                                                        </div> */}\n                                                    </div>\n                                                </div>\n                                                <div className=\"form-section no-border\">\n                                                    <div className=\"row\">\n                                                        <div className=\"col-sm-12 m-b-20\">\n                                                            <strong className=\"f-w-bold\" style={{color:'#000', fontSize:'15px'}}>Contact</strong>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"row\">\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"phone\">Phone Number<required>*</required></label>\n                                                            <input type=\"number\" name=\"phone\" id=\"phone\" placeholder=\"021231231\" value={this.state.phone} onChange={this.handleChange} disabled/>\n                                                        </div>\n                                                        <div className=\"form-field-top-label\">\n                                                            <label for=\"email\">Email<required>*</required></label>\n                                                            <input type=\"text\" size=\"50\" name=\"email\" id=\"email\" placeholder=\"email@host.com\" value={this.state.email} onChange={this.handleChange} disabled/>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"row\" style={{justifyContent:'flex-end'}}>\n                                                    {\n                                                    !this.props.disabledForm &&\n                                                    <button\n                                                    disabled={this.state.isSaving}\n                                                    onClick={this.save}\n                                                    className=\"btn btn-icademy-primary float-right\"\n                                                    style={{ padding: \"7px 8px !important\", marginRight: 30 }}>\n                                                        <i className=\"fa fa-save\"></i>\n                                                        {this.state.isSaving ? 'Saving...' : 'Save'}\n                                                    </button>\n                                                    }\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n  }\n}\n\nexport default FormMembership;\n"],"sourceRoot":""}
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[85],{1367:function(e,a,t){"use strict";t.r(a);var l=t(21),n=t(6),s=t(11),r=t(13),i=t(12),o=t(14),c=t(0),m=t.n(c),u=t(3),p=t(2),d=t(300),v=t.n(d),h=t(539),y=t(332),g=t.n(y),E=(t(546),t(251)),f=(t(127),t(24)),b=function(e){function a(){var e,t;Object(n.a)(this,a);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(t=Object(r.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(o)))).state={user:null,user_id:t.props.match.params.user_id,company_id:"",branch_id:"",grup_id:"",optionComapny:[],valueCompany:[],level_multicompany:"client",identity:"",name:"",email:"",phone:"",address:"",level:"",password:"",unlimited:!1,validity:new Date,listCompany:[],listBranch:[],listGrup:[],listLevel:[],optionsGroup:[],valueGroup:[],responseMessage:""},t.handleChangeValidity=function(e){t.setState({validity:e}),console.log("XX datepicker",e),console.log("XX state",t.state.validity)},t.onSubmitEditUser=function(e){e.preventDefault();var a=0==t.state.unlimited?"1":"0",l={company_id:t.state.company_id,group:t.state.valueGroup,grup_id:t.state.grup_id,identity:t.state.identity,name:t.state.name,email:t.state.email,phone:t.state.phone,address:t.state.address,level:t.state.level,status:"active",unlimited:a,validity:t.state.validity.toISOString().split("T")[0]};""===l.company_id||""==l.group||""===l.grup_id||""===l.name||""===l.identity||""===l.email||""===l.level?f.b.warning("Please fill required field."):u.l.put("".concat(u.a,"v1/user/").concat(t.state.user_id),l).then((function(e){if(200===e.status)if(e.data.error)t.setState({responseMessage:e.data.result});else{if(""!==t.state.password){var a={password:t.state.password};u.l.put("".concat(u.a,"v1/user/password/").concat(t.state.user_id),a).then((function(e){console.log("pass: ",e.data)}))}u.l.delete("".concat(u.a,"v1/user/assign/").concat(t.state.user_id)).then((function(e){if(200===e.status)for(var a=0;a<t.state.valueCompany.length;a++){var l={user_id:t.state.user_id,company_id:t.state.valueCompany[a],level_multicompany:t.state.level_multicompany};u.l.post("".concat(u.a,"v1/user/assign"),l)}})),"superadmin"===p.a.get("user").data.level?t.props.history.push("/company-detail-super/".concat(l.company_id)):t.props.history.push("/user-company/".concat(t.state.company_id))}}))},t.onChangeInput=function(e){var a=e.target,n=a.value,s=a.name;"company_id"===s?u.l.get("".concat(u.a,"v1/branch/company/").concat(n)).then((function(e){if(200===e.status){t.setState({listBranch:e.data.result[0],company_id:n,listGrup:e.data.result[1]});var a=[];e.data.result[0].map((function(e){a.push({value:e.branch_id,label:e.branch_name})})),t.setState({valueGroup:[]}),t.setState({optionsGroup:a}),t.showMultipleCompany(n)}})):t.setState(Object(l.a)({},s,n))},t}return Object(o.a)(a,e),Object(s.a)(a,[{key:"toggleSwitch",value:function(e){this.setState({unlimited:!this.state.unlimited})}},{key:"showMultipleCompany",value:function(e){var a=this;u.l.get("".concat(u.a,"v1/company")).then((function(t){a.setState({valueCompany:[]}),a.setState({optionComapny:[]}),t.data.result.map((function(e){a.state.optionComapny.push({value:e.company_id,label:e.company_name})})),a.setState({optionComapny:a.state.optionComapny.filter((function(a){return a.value!=e}))})}))}},{key:"componentDidMount",value:function(){var e=this,a=[];u.l.get("".concat(u.a,"v1/user/").concat(this.state.user_id)).then((function(t){if(200===t.status){var l=0==t.data.result.unlimited;e.setState({user:t.data.result,company_id:t.data.result.company_id,branch_id:t.data.result.branch_id,grup_id:t.data.result.grup_id,name:t.data.result.name,identity:t.data.result.identity,email:t.data.result.email,phone:t.data.result.phone,address:t.data.result.address,level:t.data.result.level,unlimited:l,validity:new Date(t.data.result.validity),level_multicompany:t.data.result.level_multicompany}),a=t.data.result.group_id?t.data.result.group_id.split(",").map(Number):[],u.l.get("".concat(u.a,"v1/company")).then((function(a){200===a.status&&e.setState({listCompany:a.data.result}),a.data.result.map((function(a){e.state.optionComapny.push({value:a.company_id,label:a.company_name})})),e.setState({optionComapny:e.state.optionComapny.filter((function(a){return a.value!=e.state.company_id}))})})),u.l.get("".concat(u.a,"v1/branch/company/").concat(e.state.user.company_id)).then((function(a){if(200===a.status){e.setState({listBranch:a.data.result[0],listGrup:a.data.result[1]});var t=[];a.data.result[0].map((function(e){t.push({value:e.branch_id,label:e.branch_name})})),e.setState({optionsGroup:t})}})),u.l.get("".concat(u.a,"v1/user/assign/").concat(e.state.user_id)).then((function(t){200===t.status&&(e.setState({valueCompany:t.data.result.multi_company}),e.setState({valueGroup:a}))}));e.setState({listLevel:[{level:"superadmin"},{level:"admin"},{level:"client"}]})}}))}},{key:"render",value:function(){var e=this,a="";""!==this.state.validity&&(a=new Date(this.state.validity));var t=this.state.listLevel;return m.a.createElement("div",{className:"pcoded-main-container"},m.a.createElement("div",{className:"pcoded-wrapper"},m.a.createElement("div",{className:"pcoded-content"},m.a.createElement("div",{className:"pcoded-inner-content"},m.a.createElement("div",{className:"main-body"},m.a.createElement("div",{className:"page-wrapper"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-xl-12"},m.a.createElement("h3",{className:"f-24 f-w-800"},"Edit User Management"),m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card-block"},m.a.createElement("form",{onSubmit:this.onSubmitEditUser},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Company"),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("select",{required:!0,className:"form-control",name:"company_id",onChange:this.onChangeInput},m.a.createElement("option",{value:""},"-- Select --"),this.state.listCompany.map((function(a){return m.a.createElement("option",{value:a.company_id,selected:a.company_id===e.state.user.company_id?"selected":""},a.company_name)})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Level"),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("select",{style:{textTransform:"capitalize"},name:"level",className:"form-control",onChange:this.onChangeInput,required:!0},m.a.createElement("option",{value:""},"-- Select --"),t.map((function(a){return m.a.createElement("option",{value:a.level,selected:a.level===e.state.user.level?"selected":""},"client"===a.level?"User":a.level)})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Multiple Company"),m.a.createElement(E.MultiSelect,{id:"multicompany",options:this.state.optionComapny,value:this.state.valueCompany,onChange:function(a){return e.setState({valueCompany:a})},mode:"tags",removableTags:!0,hasSelectAll:!0,selectAllLabel:"Choose all",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Company"})),this.state.valueCompany.length>0?m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Level Multicompany"),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("select",{style:{textTransform:"capitalize"},name:"level_multicompany",className:"form-control",onChange:function(a){return e.setState({level_multicompany:a.target.value})},required:!0},m.a.createElement("option",{value:""},"-- Select --"),t.map((function(a){return m.a.createElement("option",{value:a.level,selected:a.level===e.state.level_multicompany?"selected":""},"client"===a.level?"User":a.level)})))):null,m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Group"),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement(E.MultiSelect,{id:"group",options:this.state.optionsGroup,value:this.state.valueGroup,onChange:function(a){return e.setState({valueGroup:a})},mode:"tags",enableSearch:!0,resetable:!0,valuePlaceholder:"Select Group"})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Role"),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("select",{required:!0,className:"form-control",name:"grup_id",onChange:this.onChangeInput},m.a.createElement("option",{value:""},"-- Select --"),this.state.listGrup.map((function(a){return m.a.createElement("option",{value:a.grup_id,selected:a.grup_id===e.state.user.grup_id?"selected":""},a.grup_name)})))),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"}," Name "),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("input",{required:!0,type:"text",name:"name",className:"form-control",placeholder:"Name",value:this.state.name,onChange:this.onChangeInput})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"}," Registration Number "),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("input",{type:"text",required:!0,name:"identity",className:"form-control",placeholder:"210-1971-74",value:this.state.identity,onChange:this.onChangeInput})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Email"),m.a.createElement(h.a.Text,{className:"text-danger"},"Required"),m.a.createElement("input",{type:"email",required:!0,name:"email",value:this.state.email,className:"form-control",placeholder:"rakaal@gmail.com",onChange:this.onChangeInput})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Phone"),m.a.createElement("input",{type:"text",name:"phone",value:this.state.phone,className:"form-control",placeholder:"081-247-9592",onChange:this.onChangeInput})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input"},"Address"),m.a.createElement("textarea",{value:this.state.address,name:"address",className:"form-control",placeholder:"Address",onChange:this.onChangeInput})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input",htmlFor:!0},"Time Limit"),m.a.createElement("div",{style:{width:"100%"}},m.a.createElement(v.a,Object(l.a)({checked:!1,onChange:this.toggleSwitch.bind(this)},"checked",this.state.unlimited)))),this.state.unlimited&&m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"label-input",htmlFor:!0},"Valid Until"),m.a.createElement("div",{style:{width:"100%"}},m.a.createElement(g.a,{selected:a,onChange:this.handleChangeValidity,dateFormat:"yyyy-MM-dd"}))),m.a.createElement("div",{style:{marginTop:"50px"}},this.state.responseMessage&&m.a.createElement("div",{class:"alert alert-primary",role:"alert"},m.a.createElement("b",null,"ALERT")," Please check you data before submit. ",this.state.responseMessage)),m.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block m-t-100 f-20 f-w-600"},"Save"))))))))))))}}]),a}(c.Component);a.default=b}}]);
//# sourceMappingURL=85.5b66a92d.chunk.js.map
{"version":3,"sources":["components/principalLaporan/index.js"],"names":["DetailMurid","Component","state","listSemester","semesterId","semesterInfo","jadwalKu","listKelas","kelasId","kelasInfo","listPelajaran","pelajaranId","pelajaranInfo","isLoading","nilaiMurid","tahunAjaran","listTahunAjaran","selectSemester","e","preventDefault","target","value","API","get","API_SERVER","Storage","data","company_id","then","res","error","toast","warning","this","setState","result","selectKelas","filter","item","kelas_id","parseInt","selectPelajaran","fetchNilaiMurid","selectTahunAjaran","fetchJadwal","resetFilter","console","log","fetchSemester","componentDidMount","d","Date","getMonth","getFullYear","temp","i","push","render","level","className","to","src","alt","width","onChange","required","selected","disabled","map","key","semester_id","semester_name","kelas_nama","pelajaran_id","nama_pelajaran","type","onClick","style","verticalAlign","rowSpan","colSpan","no_induk","nama","task","quiz","exam","class"],"mappings":"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","file":"static/js/136.514e9fb7.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport Storage from '../../repository/storage';\nimport API, { API_SERVER } from '../../repository/api';\nimport { toast } from \"react-toastify\";\n\nimport { Link } from 'react-router-dom'\n\nimport { MultiSelect } from 'react-sm-select';\nimport 'react-sm-select/dist/styles.css';\n\nclass DetailMurid extends Component {\n\n  state = {\n    listSemester: [],\n    semesterId: '',\n    semesterInfo: {},\n\n    jadwalKu: [],\n\n    listKelas: [],\n    kelasId: '',\n    kelasInfo: {},\n\n    listPelajaran: [],\n    pelajaranId: '',\n    pelajaranInfo: {},\n\n    isLoading: false,\n    nilaiMurid: [],\n\n    tahunAjaran: '',\n    listTahunAjaran: []\n  }\n\n  fetchJadwal(tahunAjaran) {\n    API.get(`${API_SERVER}v2/jadwal-mengajar/company/${Storage.get('user').data.company_id}?tahunAjaran=${tahunAjaran}`).then(res => {\n      if (res.data.error) console.log(`Error: fetch pelajaran`)\n\n      this.setState({ jadwalKu: res.data.result })\n    })\n  }\n\n  fetchSemester() {\n    API.get(`${API_SERVER}v1/semester/company/${Storage.get('user').data.company_id}`).then(res => {\n      if (res.data.error) toast.warning(\"Error fetch data semester\");\n\n      this.setState({ listSemester: res.data.result })\n    })\n  }\n\n  selectSemester = e => {\n    e.preventDefault();\n    let semesterId = e.target.value;\n\n    API.get(`${API_SERVER}v2/kelas/company/${Storage.get('user').data.company_id}`).then(res => {\n      if (res.data.error) toast.warning(\"Error fetch data semester\");\n\n      this.setState({ semesterId: semesterId, listKelas: res.data.result })\n    })\n  }\n\n  selectKelas = e => {\n    e.preventDefault();\n    let kelasId = e.target.value;\n\n    let dd = [...this.state.jadwalKu];\n    let filter = dd.filter(item => item.kelas_id === parseInt(kelasId));\n    this.setState({ kelasId: kelasId, listPelajaran: filter })\n  }\n\n  selectPelajaran = e => {\n    e.preventDefault()\n    let pelajaranId = e.target.value;\n    this.setState({ isLoading: true, pelajaranId: pelajaranId, nilaiMurid: [] })\n\n    // let nilaiMurid = [\n    //   {nik: 1, name: 'Ahmad', task: 10, quiz: 20, exam: 30, total: 20},\n    //   {nik: 2, name: 'Ardi', task: 10, quiz: 20, exam: 30, total: 20},\n    //   {nik: 3, name: 'Ansyah', task: 10, quiz: 20, exam: 30, total: 20},\n    // ];\n    // this.setState({ nilaiMurid: nilaiMurid, isLoading: false })\n\n    this.fetchNilaiMurid(this.state.kelasId, pelajaranId, this.state.tahunAjaran);\n  }\n\n  fetchNilaiMurid(kelasId, pelajaranId, tahunAjaran) {\n    console.log(`Query: ${kelasId} ${pelajaranId}`);\n\n    API.get(`${API_SERVER}v2/guru/nilai-kelas/${kelasId}/${pelajaranId}?tahunAjaran=${tahunAjaran}`).then(res => {\n      this.setState({ nilaiMurid: res.data.result, isLoading: false })\n    })\n  }\n\n  componentDidMount() {\n    let d = new Date();\n    // bulan diawali dengan 0 = januari, 11 = desember\n    let month = d.getMonth();\n    let tahunAjaran = month < 6 ? (d.getFullYear() - 1) + '/' + d.getFullYear() : d.getFullYear() + '/' + (d.getFullYear() + 1);\n\n    let temp = [];\n    for (var i = 0; i < 6; i++) {\n      temp.push(`${d.getFullYear() - i}/${d.getFullYear() - i + 1}`)\n    }\n    this.setState({ tahunAjaran, listTahunAjaran: temp })\n\n    this.fetchJadwal(tahunAjaran)\n    this.fetchSemester()\n  }\n\n  selectTahunAjaran = e => {\n    const { value } = e.target;\n    this.setState({ tahunAjaran: value })\n    this.fetchJadwal(value);\n  }\n\n\n  resetFilter = e => {\n    e.preventDefault()\n    this.setState({\n      semesterId: '',\n      semesterInfo: {},\n\n      listKelas: [],\n      kelasId: '',\n      kelasInfo: {},\n\n      listPelajaran: [],\n      pelajaranId: '',\n      pelajaranInfo: {},\n\n      isLoading: false,\n      nilaiMurid: [],\n    })\n  }\n\n  render() {\n    //console.log('state: ', this.state)\n\n    let levelUser = Storage.get('user').data.level;\n    let access_project_admin = levelUser == 'admin' || levelUser == 'superadmin' ? true : false;\n\n    return (\n      <div className=\"pcoded-main-container\">\n        <div className=\"pcoded-wrapper\">\n          <div className=\"pcoded-content\">\n            <div className=\"pcoded-inner-content\">\n              <div className=\"main-body\">\n                <div className=\"page-wrapper\">\n\n                  <div className=\"floating-back\">\n                    <Link to={`/`}>\n                      <img\n                        src={`newasset/back-button.svg`}\n                        alt=\"\"\n                        width={90}\n                      />\n                    </Link>\n                  </div>\n\n                  <div className=\"row mt-3\">\n                    <div className=\"col-xl-12\">\n                      <div className=\"card\">\n                        <div className=\"card-body\">\n                          <h3 className=\"f-24 fc-skyblue f-w-800 mb-3\">Laporan Kelas</h3>\n\n                          <form>\n                            <div className=\"form-group row\">\n                              <div className=\"col-sm-2\">\n                                <label>Tahun Ajaran</label>\n                                <select onChange={this.selectTahunAjaran} value={this.state.tahunAjaran} className=\"form-control\" required>\n                                  <option value=\"\" selected disabled>Select</option>\n                                  {\n                                    this.state.listTahunAjaran.map(item => (\n                                      <option value={item}>{item}</option>\n                                    ))\n                                  }\n                                </select>\n                              </div>\n                              <div className=\"col-sm-2\">\n                                <label>Semester</label>\n                                <select onChange={this.selectSemester} value={this.state.semesterId} className=\"form-control\" required>\n                                  <option value=\"\" selected disabled>Select</option>\n                                  {\n                                    this.state.listSemester.map((item, i) => (\n                                      <option key={i} value={item.semester_id}>{item.semester_name}</option>\n                                    ))\n                                  }\n                                </select>\n                              </div>\n                              <div className=\"col-sm-2\">\n                                <label>Kelas</label>\n                                <select onChange={this.selectKelas} value={this.state.kelasId} className=\"form-control\" required>\n                                  <option value=\"\" selected disabled>Select</option>\n                                  {\n                                    this.state.listKelas.map((item, i) => (\n                                      <option key={i} value={item.kelas_id}>{item.kelas_nama}</option>\n                                    ))\n                                  }\n                                </select>\n                              </div>\n                              <div className=\"col-sm-3\">\n                                <label>Mata Pelajaran</label>\n                                <select onChange={this.selectPelajaran} value={this.state.pelajaranId} className=\"form-control\" required>\n                                  <option value=\"\" selected disabled>Select</option>\n                                  {\n                                    this.state.listPelajaran.map((item, i) => (\n                                      <option key={i} value={item.pelajaran_id}>{item.nama_pelajaran}</option>\n                                    ))\n                                  }\n                                </select>\n                              </div>\n\n                              <div className=\"col-sm-2\">\n                                <label>Action</label><br />\n                                <button className=\"btn btn-v2 btn-info\" type=\"reset\" onClick={this.resetFilter}>Reset</button>\n                              </div>\n\n                            </div>\n                          </form>\n\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"col-xl-12\">\n                      <div className=\"card\">\n                        <div className=\"card-body\">\n                          <table className=\"table table-striped table-bordered\">\n                            <thead>\n                              <tr className=\"text-center\">\n                                <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\"> NO </td>\n                                <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\"> NIK </td>\n                                <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\"> NAMA </td>\n                                <td colSpan=\"3\">NILAI HASIL BELAJAR</td>\n                                <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\">NILAI AKHIR</td>\n                                <td style={{ verticalAlign: 'middle' }} rowSpan=\"2\">STATUS</td>\n                              </tr>\n                              <tr className=\"text-center\">\n                                <td>TASK</td>\n                                <td>QUIZ</td>\n                                <td>EXAM</td>\n                              </tr>\n                            </thead>\n\n                            <tbody>\n                              {\n                                this.state.isLoading &&\n                                <tr>\n                                  <td className=\"text-center\" colSpan='8'>\n                                    <span>Loading...</span>\n                                  </td>\n                                </tr>\n                              }\n                              {\n                                this.state.nilaiMurid.map((item, i) => (\n                                  <tr className=\"text-center\">\n                                    <td>{i + 1}</td>\n                                    <td>{item.no_induk}</td>\n                                    <td>{item.nama}</td>\n                                    <td>{item.task}</td>\n                                    <td>{item.quiz}</td>\n                                    <td>{item.exam}</td>\n                                    <td>{item.task + item.quiz + item.exam}</td>\n                                    <td>{(item.task + item.quiz + item.exam) >= 50 ? <span class=\"label label-success\">Lulus</span> : <span class=\"label label-danger\">Mengulang</span>}</td>\n                                  </tr>\n                                ))\n                              }\n                            </tbody>\n                          </table>\n                        </div>\n                      </div>\n\n                    </div>\n\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default DetailMurid;\n"],"sourceRoot":""}
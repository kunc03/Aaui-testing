(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[131],{1493:function(e,a,t){"use strict";t.r(a);var l=t(0),s=t.n(l),n=t(10),r=t(3),c=t(2),m=t(1613),i=t(18);class d extends s.a.Component{constructor(){super(...arguments),this.state={mataPelajaran:[],semester:[],semesterId:"",isModalBuka:!1,isModalSilabus:!1,jadwalPelajaran:[],pelajaranId:"",dataSilabus:[],jadwalKu:[],tahunAjaran:"",listTahunAjaran:[]},this.selectPelajaran=e=>{e.preventDefault();let a=e.target.value;this.setState({isModalSilabus:!0,pelajaranId:a}),this.fetchSilabus(a)},this.selectTahunAjaran=e=>{const{value:a}=e.target;this.setState({tahunAjaran:a}),this.fetchJadwal(a),this.fetchJadwalKu(a)},this.selectSemester=e=>{const{value:a}=e.target;r.l.get("".concat(r.a,"v2/jadwal-mengajar/guru/").concat(c.a.get("user").data.user_id,"?tahunAjaran=").concat(this.state.tahunAjaran)).then(e=>{e.data.error&&console.log("Error: fetch pelajaran");let t=e.data.result,l=[{tanggal:"Senin",data:t.filter(e=>"Senin"===e.hari&&e.semester_id==a)},{tanggal:"Selasa",data:t.filter(e=>"Selasa"===e.hari&&e.semester_id==a)},{tanggal:"Rabu",data:t.filter(e=>"Rabu"===e.hari&&e.semester_id==a)},{tanggal:"Kamis",data:t.filter(e=>"Kamis"===e.hari&&e.semester_id==a)},{tanggal:"Jumat",data:t.filter(e=>"Jumat"===e.hari&&e.semester_id==a)},{tanggal:"Sabtu",data:t.filter(e=>"Sabtu"===e.hari&&e.semester_id==a)},{tanggal:"Minggu",data:t.filter(e=>"Minggu"===e.hari&&e.semester_id==a)}];this.setState({mataPelajaran:l,semesterId:a})})}}fetchJadwalKu(e){r.l.get("".concat(r.a,"v2/jadwal-mengajar/guru/").concat(c.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then(e=>{e.data.error&&console.log("Error: fetch pelajaran");let a=e.data.result,t=[...new Map(a.map(e=>[e.pelajaran_id,e])).values()],l=[...new Map(a.map(e=>[e.semester_id,e])).values()];if(a.length>0){let s=[{tanggal:"Senin",data:a.filter(e=>"Senin"===e.hari&&e.semester_id===l[0].semester_id)},{tanggal:"Selasa",data:a.filter(e=>"Selasa"===e.hari&&e.semester_id===l[0].semester_id)},{tanggal:"Rabu",data:a.filter(e=>"Rabu"===e.hari&&e.semester_id===l[0].semester_id)},{tanggal:"Kamis",data:a.filter(e=>"Kamis"===e.hari&&e.semester_id===l[0].semester_id)},{tanggal:"Jumat",data:a.filter(e=>"Jumat"===e.hari&&e.semester_id===l[0].semester_id)},{tanggal:"Sabtu",data:a.filter(e=>"Sabtu"===e.hari&&e.semester_id===l[0].semester_id)},{tanggal:"Minggu",data:a.filter(e=>"Minggu"===e.hari&&e.semester_id===l[0].semester_id)}];this.setState({mataPelajaran:s,jadwalPelajaran:t,jadwalKu:e.data.result,semester:l,semesterId:l[0].semester_id})}else this.setState({mataPelajaran:e.data.result,jadwalPelajaran:t,jadwalKu:e.data.result,semester:l})})}fetchJadwal(e){r.l.get("".concat(r.a,"v2/jadwal-mengajar/guru/").concat(c.a.get("user").data.user_id,"?tahunAjaran=").concat(e)).then(e=>{e.data.error&&i.b.warning("Error: fetch jadwal"),this.setState({jadwalPelajaran:e.data.result})})}fetchSilabus(e){r.l.get("".concat(r.a,"v2/silabus/pelajaran/").concat(e)).then(e=>{e.data.error&&console.log("Error: fetch overview"),this.setState({dataSilabus:e.data.result})})}componentDidMount(){let e=new Date,a=e.getMonth()<6?e.getFullYear()-1+"/"+e.getFullYear():e.getFullYear()+"/"+(e.getFullYear()+1),t=[];for(var l=0;l<6;l++)t.push("".concat(e.getFullYear()-l,"/").concat(e.getFullYear()-l+1));this.setState({tahunAjaran:a,listTahunAjaran:t}),this.fetchJadwal(a),this.fetchJadwalKu(a)}clearForm(){this.setState({isModalSilabus:!1,isModalBuka:!1,pelajaranId:"",dataSilabus:[]})}render(){return console.log("state: ",this.state),s.a.createElement("div",{className:"pcoded-main-container"},s.a.createElement("div",{className:"pcoded-wrapper"},s.a.createElement("div",{className:"pcoded-content"},s.a.createElement("div",{className:"pcoded-inner-content"},s.a.createElement("div",{className:"main-body"},s.a.createElement("div",{className:"page-wrapper"},s.a.createElement("h3",{className:"f-24 fc-skyblue f-w-800 mb-3"},"Jadwal Mengajar"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header row"},s.a.createElement("div",{className:"col-sm-2"},s.a.createElement("label",null,"Tahun Ajaran"),s.a.createElement("select",{onChange:this.selectTahunAjaran,value:this.state.tahunAjaran,className:"form-control",required:!0},s.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.listTahunAjaran.map(e=>s.a.createElement("option",{value:e},e)))),s.a.createElement("div",{className:"col-sm-2"},s.a.createElement("label",null,"Semester"),s.a.createElement("select",{onChange:this.selectSemester,value:this.state.semesterId,className:"form-control",required:!0},s.a.createElement("option",{value:"",selected:!0,disabled:!0},"Select"),this.state.semester.map(e=>s.a.createElement("option",{value:e.semester_id},e.semester_name)))),s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("button",{onClick:()=>this.setState({isModalSilabus:!0}),className:"btn btn-v2 btn-primary mt-4"},s.a.createElement("i",{className:"fa fa-list"}),"See Syllabus"))),s.a.createElement("div",{className:"card-body",style:{padding:"12px"}},s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-center"},"Date"),s.a.createElement("th",{className:"text-center"},"Class"),s.a.createElement("th",{className:"text-center"},"Room"),s.a.createElement("th",{className:"text-center"},"Subject"),s.a.createElement("th",{className:"text-center"},"Time"),s.a.createElement("th",{className:"text-center"},"Action"))),s.a.createElement("tbody",null,this.state.mataPelajaran.map((e,a)=>s.a.createElement(s.a.Fragment,null,s.a.createElement("tr",null,s.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"},rowSpan:e.data.length+1},e.tanggal),0===e.data.length&&s.a.createElement("td",{className:"text-center",colSpan:"5"},"No schedule")),e.data.map(e=>s.a.createElement("tr",null,s.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.kelas_nama),s.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_ruangan),s.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.nama_pelajaran),s.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},e.jam_mulai,"-",e.jam_selesai),s.a.createElement("td",{className:"text-center",style:{verticalAlign:"middle"}},s.a.createElement(n.b,{to:"/guru/preview/".concat(e.jadwal_id),className:"btn btn-v2 btn-primary"},s.a.createElement("i",{className:"fa fa-paper-plane"})," Open"))))))),s.a.createElement("tfoot",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-center"},"Date"),s.a.createElement("th",{className:"text-center"},"Class"),s.a.createElement("th",{className:"text-center"},"Room"),s.a.createElement("th",{className:"text-center"},"Subject"),s.a.createElement("th",{className:"text-center"},"Time"),s.a.createElement("th",{className:"text-center"},"Action"))))))),s.a.createElement(m.a,{show:this.state.isModalBuka,onHide:()=>this.clearForm()},s.a.createElement(m.a.Body,null,s.a.createElement("h4",null,"Perhatian"),s.a.createElement("p",null,"Apakah Kamu yakin mau masuk pelajaran ... ?"),s.a.createElement(n.b,{to:"/",className:"btn btn-v2 btn-primary"},"Yakin"))),s.a.createElement(m.a,{show:this.state.isModalSilabus,onHide:()=>this.clearForm(),dialogClassName:"modal-xlg"},s.a.createElement(m.a.Header,{closeButton:!0},s.a.createElement("form",{className:"form-inline"},s.a.createElement("label",null,"Subject"),s.a.createElement("select",{onChange:this.selectPelajaran,className:"form-control ml-2"},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Choose subject"),this.state.jadwalPelajaran.map((e,a)=>s.a.createElement("option",{key:a,value:e.pelajaran_id},e.nama_pelajaran))))),s.a.createElement(m.a.Body,null,s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Session"),s.a.createElement("th",null,"Topic"),s.a.createElement("th",null,"Goal"),s.a.createElement("th",null,"Description"),s.a.createElement("th",null,"Periode"),s.a.createElement("th",null,"Duration"),s.a.createElement("th",null,"Files"))),s.a.createElement("tbody",null,this.state.dataSilabus.map((e,a)=>0===e.jenis?s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.sesi),s.a.createElement("td",null,e.topik),s.a.createElement("td",null,e.tujuan),s.a.createElement("td",null,e.deskripsi),s.a.createElement("td",null,e.periode),s.a.createElement("td",null,e.durasi),s.a.createElement("td",{style:{padding:"12px"}},e.files?s.a.createElement("a",{href:e.files,target:"_blank",className:"silabus"},"Open"):"No files")):s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.sesi),s.a.createElement("td",{colSpan:"4",className:"text-center"},1==e.jenis?"Kuis":"Ujian"))))))))))))))}}a.default=d}}]);
//# sourceMappingURL=131.de9ce2f7.chunk.js.map
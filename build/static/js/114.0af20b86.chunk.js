(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[114],{1500:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(10),i=t(18),s=t(3),c=t(2),o=(t(229),t(118),t(463)),u=t(1617),d=t(1613);class m extends l.a.Component{constructor(){super(...arguments),this.state={kurikulum:[],id:"",name:"",formAdd:!1,formLesson:!1,optionLessons:[],lessonIds:[],listPelajaran:[],idPelajaran:"",namaPelajaran:"",kategori:"",kodePelajaran:"",kelas:"",listKelas:[],openSilabus:!1,pelajaranId:"",silabusId:"",pelajaranNama:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0,files:null,tempFiles:Math.random().toString(36),silabus:[],nilaiTugas:0,nilaiKuis:0,nilaiUjian:0,openProsentase:!1},this.openProsentase=e=>{e.preventDefault(),this.setState({pelajaranId:e.target.getAttribute("data-id"),pelajaranNama:e.target.getAttribute("data-title"),openProsentase:!0}),this.fetchProsentase(e.target.getAttribute("data-id"))},this.openSilabus=e=>{e.preventDefault(),this.setState({pelajaranId:e.target.getAttribute("data-id"),pelajaranNama:e.target.getAttribute("data-title"),openSilabus:!0}),this.fetchSilabus(e.target.getAttribute("data-id"))},this.saveKurikulum=e=>{let{value:a}=e.target,t={company_id:c.a.get("user").data.company_id,name:this.state.name};this.state.id?s.l.put("".concat(s.a,"v2/kurikulum/").concat(this.state.id),t).then(e=>{e.data.error&&i.b.warning("Error update kurikulum"),this.fetchKurikulum()}):s.l.post("".concat(s.a,"v2/kurikulum"),t).then(e=>{e.data.error&&i.b.warning("Error save kurikulum"),this.fetchKurikulum()}),this.setState({formAdd:!1,name:"",id:""})},this.selectKurikulum=e=>{e.preventDefault();let a=e.target.getAttribute("data-id"),t=e.target.getAttribute("data-name");this.setState({id:a,name:t,formAdd:!0})},this.deleteKurikulum=e=>{e.preventDefault();let a=e.target.getAttribute("data-id");s.l.delete("".concat(s.a,"v2/kurikulum/").concat(a)).then(e=>{e.data.error&&i.b.warning("Error delete data kurikulum"),this.fetchKurikulum()})},this.addMapel=e=>{e.preventDefault();let a={mapel:this.state.lessonIds};s.l.post("".concat(s.a,"v2/kurikulum/").concat(this.state.id,"/mapel"),a).then(e=>{e.data.error&&i.b.warning("Error add data pelajaran"),this.fetchKurikulum(),this.setState({formLesson:!1,id:"",lessonIds:[]})})},this.formAddMapel=e=>{e.preventDefault();let a=e.target.getAttribute("data-id"),t=this.state.kurikulum.filter(e=>e.id==parseInt(a))[0],n=[];if(t.mapel.length)for(var l=0;l<t.mapel.length;l++)n.push(t.mapel[l].pelajaran_id);this.setState({id:a,formLesson:!0,lessonIds:n})},this.deleteMapel=e=>{e.preventDefault();let a=e.target.getAttribute("data-kurikulum"),t=e.target.getAttribute("data-mapel");s.l.delete("".concat(s.a,"v2/kurikulum/").concat(a,"/mapel/").concat(t)).then(e=>{this.fetchKurikulum()})}}fetchProsentase(e){s.l.get("".concat(s.a,"v2/nilai-pelajaran/").concat(e)).then(e=>{e.data.error&&i.b.warning("Warning: fetch prosentase"),this.setState({nilaiTugas:e.data.result.tugas,nilaiKuis:e.data.result.kuis,nilaiUjian:e.data.result.ujian})})}closeProsentase(){this.setState({nilaiTugas:0,nilaiKuis:0,nilaiUjian:0,openProsentase:!1})}fetchSilabus(e){s.l.get("".concat(s.a,"v2/silabus/pelajaran/").concat(e)).then(e=>{e.data.error&&i.b.info("Error: fetch silabus"),this.setState({silabus:e.data.result})})}closeModal(){this.fetchPelajaran(),this.setState({openSilabus:!1,silabus:[],pelajaranId:"",pelajaranNama:"",sesi:"",topik:"",tujuan:"",deskripsi:"",jenis:0})}componentDidMount(){this.fetchPelajaran(),this.fetchKurikulum()}fetchKurikulum(){s.l.get("".concat(s.a,"v2/kurikulum/company/").concat(c.a.get("user").data.company_id)).then(e=>{e.data.error&&i.b.warning("Error fetch data kurikulum"),this.setState({kurikulum:e.data.result})})}fetchPelajaran(){s.l.get("".concat(s.a,"v2/pelajaran/company/").concat(c.a.get("user").data.company_id)).then(e=>{e.data.error&&i.b.warning("Error fetch data kelas");let a=e.data.result.map(e=>({value:e.pelajaran_id,label:e.kode_pelajaran+" - "+e.nama_pelajaran}));this.setState({optionLessons:a})})}render(){const{kurikulum:e,listPelajaran:a}=this.state;return l.a.createElement("div",{className:"pcoded-main-container"},l.a.createElement("div",{className:"pcoded-wrapper"},l.a.createElement("div",{className:"pcoded-content"},l.a.createElement("div",{className:"pcoded-inner-content"},l.a.createElement("div",{className:"main-body"},l.a.createElement("div",{className:"page-wrapper"},l.a.createElement("div",{className:"floating-back"},l.a.createElement(r.b,{to:"/"},l.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90}))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement(o.a,null,l.a.createElement(o.a.Header,null,l.a.createElement("h4",null,"Kurikulum")),l.a.createElement(o.a.Body,null,l.a.createElement(u.a,{defaultActiveKey:"0"},e.map((e,a)=>l.a.createElement(o.a,null,l.a.createElement(o.a.Header,null,l.a.createElement("h5",{className:"collapsed","data-toggle":"collapse","data-target":"#colp".concat(a),style:{cursor:"pointer"}},l.a.createElement("i",{className:"fa"})," "," ",e.name),["guru","admin"].includes(c.a.get("user").data.grup_name?c.a.get("user").data.grup_name.toLowerCase():"")?l.a.createElement("button",{onClick:this.formAddMapel,"data-id":e.id,className:"btn btn-v2 btn-primary float-right"},"Lesson"):null,l.a.createElement("i",{onClick:this.selectKurikulum,"data-id":e.id,"data-name":e.name,style:{cursor:"pointer"},className:"fa fa-edit mr-2"}),l.a.createElement("i",{onClick:this.deleteKurikulum,"data-id":e.id,style:{cursor:"pointer"},className:"fa fa-trash"})),l.a.createElement(o.a.Body,{className:"collapse p-2",id:"colp".concat(a)},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"No"),l.a.createElement("th",null,"Pelajaran"),l.a.createElement("th",null,"Kode"),l.a.createElement("th",null,"Silabus"),l.a.createElement("th",null,"Bobot"))),l.a.createElement("tbody",null,e.mapel.map((e,a)=>l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,e.nama_pelajaran),l.a.createElement("td",null,e.kode_pelajaran),l.a.createElement("td",{style:{padding:"12px"}},l.a.createElement("span",{onClick:this.openSilabus,"data-id":e.pelajaran_id,"data-title":e.nama_pelajaran,className:"silabus"},"Open")),l.a.createElement("td",{style:{padding:"12px"}},l.a.createElement("span",{onClick:this.openProsentase,"data-id":e.pelajaran_id,"data-title":e.nama_pelajaran,className:"silabus"},"Open")))))))))))),l.a.createElement(d.a,{show:this.state.openProsentase,onHide:this.closeProsentase.bind(this)},l.a.createElement(d.a.Header,{closeButton:!0},l.a.createElement(d.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},this.state.pelajaranNama)),l.a.createElement(d.a.Body,null,l.a.createElement("form",{onSubmit:this.saveProsentase},l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("label",null,"Tugas"),l.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiTugas,onChange:e=>this.setState({nilaiTugas:e.target.value})})),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("label",null,"Kuis"),l.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiKuis,onChange:e=>this.setState({nilaiKuis:e.target.value})})),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("label",null,"Ujian"),l.a.createElement("input",{className:"form-control",required:!0,type:"number",value:this.state.nilaiUjian,onChange:e=>this.setState({nilaiUjian:e.target.value})})))))),l.a.createElement(d.a,{show:this.state.openSilabus,onHide:this.closeModal.bind(this),dialogClassName:"modal-lg modal-1000-large"},l.a.createElement(d.a.Header,{closeButton:!0},l.a.createElement(d.a.Title,{className:"text-c-purple3 f-w-bold",style:{color:"#00478C"}},"Silabus ",this.state.pelajaranNama)),l.a.createElement(d.a.Body,null,l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Sesi"),l.a.createElement("th",null,"Topik"),l.a.createElement("th",null,"Tujuan"),l.a.createElement("th",null,"Deskripsi"),l.a.createElement("th",null,"Files"))),l.a.createElement("tbody",null,this.state.silabus.map((e,a)=>0===e.jenis?l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.sesi),l.a.createElement("td",null,e.topik),l.a.createElement("td",null,e.tujuan),l.a.createElement("td",null,e.deskripsi),l.a.createElement("td",{style:{padding:"12px"}},e.files?l.a.createElement("a",{href:e.files,target:"_blank",className:"silabus"},"Open"):"No files")):l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.sesi),l.a.createElement("td",{colSpan:"4",className:"text-center"},1==e.jenis?"Kuis":"Ujian")))))))))))))))}}a.default=m},1617:function(e,a,t){"use strict";var n=t(1),l=t(4),r=t(15),i=t.n(r),s=t(0),c=t.n(s),o=t(63),u=t(27),d=t(461),m=c.a.createContext(null);m.displayName="AccordionContext";var p=m;var b,h=c.a.forwardRef((function(e,a){var t=e.as,r=void 0===t?"button":t,i=e.children,o=e.eventKey,u=e.onClick,m=Object(l.a)(e,["as","children","eventKey","onClick"]),b=function(e,a){var t=Object(s.useContext)(p),n=Object(s.useContext)(d.a);return function(l){n&&n(e===t?null:e,l),a&&a(l)}}(o,u);return"button"===r&&(m.type="button"),c.a.createElement(r,Object(n.a)({ref:a,onClick:b},m),i)})),f=t(75),E=t(40),g=t(80),v=t(78),j=t(79),k={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function y(e,a){var t=a["offset"+e[0].toUpperCase()+e.slice(1)],n=k[e];return t+parseInt(Object(f.a)(a,n[0]),10)+parseInt(Object(f.a)(a,n[1]),10)}var N=((b={})[E.c]="collapse",b[E.d]="collapsing",b[E.b]="collapsing",b[E.a]="collapse show",b),O={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:y},x=c.a.forwardRef((function(e,a){var t=e.onEnter,r=e.onEntering,o=e.onEntered,u=e.onExit,d=e.onExiting,m=e.className,p=e.children,b=e.dimension,h=void 0===b?"height":b,f=e.getDimensionValue,k=void 0===f?y:f,O=Object(l.a)(e,["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"]),x="function"===typeof h?h():h,C=Object(s.useMemo)((function(){return Object(v.a)((function(e){e.style[x]="0"}),t)}),[x,t]),P=Object(s.useMemo)((function(){return Object(v.a)((function(e){var a="scroll"+x[0].toUpperCase()+x.slice(1);e.style[x]=e[a]+"px"}),r)}),[x,r]),S=Object(s.useMemo)((function(){return Object(v.a)((function(e){e.style[x]=null}),o)}),[x,o]),w=Object(s.useMemo)((function(){return Object(v.a)((function(e){e.style[x]=k(x,e)+"px",Object(j.a)(e)}),u)}),[u,k,x]),K=Object(s.useMemo)((function(){return Object(v.a)((function(e){e.style[x]=null}),d)}),[x,d]);return c.a.createElement(E.e,Object(n.a)({ref:a,addEndListener:g.a},O,{"aria-expanded":O.role?O.in:null,onEnter:C,onEntering:P,onEntered:S,onExit:w,onExiting:K}),(function(e,a){return c.a.cloneElement(p,Object(n.a)({},a,{className:i()(m,p.props.className,N[e],"width"===x&&"width")}))}))}));x.defaultProps=O;var C=x,P=c.a.forwardRef((function(e,a){var t=e.children,r=e.eventKey,i=Object(l.a)(e,["children","eventKey"]),o=Object(s.useContext)(p);return c.a.createElement(d.a.Provider,{value:null},c.a.createElement(C,Object(n.a)({ref:a,in:o===r},i),c.a.createElement("div",null,c.a.Children.only(t))))}));P.displayName="AccordionCollapse";var S=P,w=c.a.forwardRef((function(e,a){var t=Object(o.useUncontrolled)(e,{activeKey:"onSelect"}),r=t.as,s=void 0===r?"div":r,m=t.activeKey,b=t.bsPrefix,h=t.children,f=t.className,E=t.onSelect,g=Object(l.a)(t,["as","activeKey","bsPrefix","children","className","onSelect"]),v=i()(f,Object(u.a)(b,"accordion"));return c.a.createElement(p.Provider,{value:m||null},c.a.createElement(d.a.Provider,{value:E||null},c.a.createElement(s,Object(n.a)({ref:a},g,{className:v}),h)))}));w.displayName="Accordion",w.Toggle=h,w.Collapse=S;a.a=w},300:function(e,a,t){"use strict";var n=t(0),l=t.n(n).a.createContext(null);l.displayName="CardContext",a.a=l},461:function(e,a,t){"use strict";t.d(a,"b",(function(){return r}));var n=t(0),l=t.n(n).a.createContext(null),r=function(e,a){return void 0===a&&(a=null),null!=e?String(e):a||null};a.a=l},463:function(e,a,t){"use strict";var n=t(1),l=t(4),r=t(15),i=t.n(r),s=t(0),c=t.n(s),o=t(27),u=t(43),d=t(64),m=t(300),p=c.a.forwardRef((function(e,a){var t=e.bsPrefix,r=e.className,s=e.variant,u=e.as,d=void 0===u?"img":u,m=Object(l.a)(e,["bsPrefix","className","variant","as"]),p=Object(o.a)(t,"card-img");return c.a.createElement(d,Object(n.a)({ref:a,className:i()(s?p+"-"+s:p,r)},m))}));p.displayName="CardImg",p.defaultProps={variant:null};var b=p,h=Object(d.a)("h5"),f=Object(d.a)("h6"),E=Object(u.a)("card-body"),g=Object(u.a)("card-title",{Component:h}),v=Object(u.a)("card-subtitle",{Component:f}),j=Object(u.a)("card-link",{Component:"a"}),k=Object(u.a)("card-text",{Component:"p"}),y=Object(u.a)("card-header"),N=Object(u.a)("card-footer"),O=Object(u.a)("card-img-overlay"),x=c.a.forwardRef((function(e,a){var t=e.bsPrefix,r=e.className,u=e.bg,d=e.text,p=e.border,b=e.body,h=e.children,f=e.as,g=void 0===f?"div":f,v=Object(l.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),j=Object(o.a)(t,"card"),k=Object(s.useMemo)((function(){return{cardHeaderBsPrefix:j+"-header"}}),[j]);return c.a.createElement(m.a.Provider,{value:k},c.a.createElement(g,Object(n.a)({ref:a},v,{className:i()(r,j,u&&"bg-"+u,d&&"text-"+d,p&&"border-"+p)}),b?c.a.createElement(E,null,h):h))}));x.displayName="Card",x.defaultProps={body:!1},x.Img=b,x.Title=g,x.Subtitle=v,x.Body=E,x.Link=j,x.Text=k,x.Header=y,x.Footer=N,x.ImgOverlay=O;a.a=x}}]);
//# sourceMappingURL=114.0af20b86.chunk.js.map
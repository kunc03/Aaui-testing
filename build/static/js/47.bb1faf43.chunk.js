(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[47],{1139:function(e,a,t){"use strict";t.r(a);var s=t(0),l=t.n(s),i=t(18),r=t(3),n=t(2),m=t(19),o=t.n(m);class c extends s.Component{constructor(e){super(e),this.save=e=>{if(e.preventDefault(),this.setState({isSaving:!0}),this.state.image){let e=new FormData;e.append("photo",this.state.image),r.l.put("".concat(r.a,"v2/training/membership/photo/").concat(this.props.match.params.id),e).then(e=>{e.data.error?(i.b.warning("Fail to upload image"),this.setState({isSaving:!1})):(i.b.success("Membership edited"),this.setState({isSaving:!1}))})}else i.b.success("Membership edited"),this.setState({isSaving:!1})},this.handleChange=e=>{let{name:a,value:t}=e.target;if("image"===a){if(e.target.files.length)if(e.target.files[0].size<=5e6){let a={image:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])};this.setState(a)}else e.target.value=null,i.b.warning("Image size cannot larger than 5MB and must be an image file")}else this.setState({[a]:t})},this.state={companyId:"",image:"",logo:"",imagePreview:"assets/images/no-image.png",name:"",address:"",phone:"",fax:"",website:"",email:"",license_number:"",expired:"",isSaving:!1,disabledForm:this.props.disabledForm&&this.props.id},this.goBack=this.goBack.bind(this)}goBack(){this.props.goBack?this.props.goBack():this.props.history.goBack()}getCompany(e){r.l.get("".concat(r.a,"v2/training/membership/read/").concat(e)).then(e=>{e.data.error?i.b.error("Error read membership"):this.setState({name:e.data.result.name,address:e.data.result.address,phone:e.data.result.phone,email:e.data.result.email,license_number:e.data.result.license_number,expired:o.a.tz(e.data.result.expired,o.a.tz.guess(!0)).format("DD-MM-YYYY"),imagePreview:e.data.result.photo?e.data.result.photo:this.state.imagePreview})})}getUserData(){r.l.get("".concat(r.j).concat(n.a.get("user").data.email)).then(e=>{200===e.status&&this.setState({companyId:localStorage.getItem("companyID")?localStorage.getItem("companyID"):e.data.result.company_id})})}componentDidMount(){this.getUserData(),this.props.disabledForm&&this.props.id?this.getCompany(this.props.id):this.props.match.params.id&&this.getCompany(this.props.match.params.id)}render(){return l.a.createElement("div",{className:"pcoded-main-container"},l.a.createElement("div",{className:"pcoded-wrapper"},l.a.createElement("div",{className:"pcoded-content"},l.a.createElement("div",{className:"pcoded-inner-content"},l.a.createElement("div",{className:"main-body"},l.a.createElement("div",{className:"page-wrapper"},l.a.createElement("div",{className:"floating-back"},l.a.createElement("img",{src:"newasset/back-button.svg",alt:"",width:90,onClick:this.goBack})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-xl-12"},l.a.createElement("div",null,l.a.createElement("div",{className:"card p-20"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-10 m-b-20"},l.a.createElement("strong",{className:"f-w-bold f-18",style:{color:"#000"}},this.props.id?"Detail":this.props.match.params.id?"Edit":"Create New"," Membership")),l.a.createElement("div",{className:"col-sm-2 m-b-20"},this.props.disabledForm&&l.a.createElement("button",{onClick:this.props.goEdit,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},l.a.createElement("i",{className:"fa fa-edit"}),"Edit"))),l.a.createElement("div",{className:"form-section"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 m-b-20"},l.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Membership Information"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"image"},"Member's Photo"),l.a.createElement("center",null,l.a.createElement("label",{style:{cursor:"pointer",borderRadius:"10px",overflow:"hidden"}},l.a.createElement("a",{href:this.state.imagePreview,target:"_blank"},l.a.createElement("img",{src:this.state.imagePreview,height:"54.8px"}))),l.a.createElement("label",{for:"image",style:{cursor:"pointer",overflow:"hidden",display:this.state.disabledForm?"none":"block"}},l.a.createElement("div",{className:"button-bordered-grey"},this.state.image?this.state.image.name:"Choose file"))),l.a.createElement("input",{type:"file",accept:"image/*",name:"image",id:"image",onChange:this.handleChange,disabled:this.state.disabledForm})),l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"name"},"Name",l.a.createElement("required",null,"*")),l.a.createElement("input",{type:"text",name:"name",size:"50",id:"name",placeholder:"PT XXX XXX",value:this.state.name,onChange:this.handleChange,disabled:!0})),l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"license_number"},"License Number",l.a.createElement("required",null,"*")),l.a.createElement("input",{type:"text",name:"license_number",size:"50",id:"license_number",placeholder:"",value:this.state.license_number,onChange:this.handleChange,disabled:!0})),l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"expired"},"Expiration Date",l.a.createElement("required",null,"*")),l.a.createElement("input",{type:"text",name:"expired",size:"50",id:"expired",placeholder:"2021-02-02",value:this.state.expired,onChange:this.handleChange,disabled:!0})))),l.a.createElement("div",{className:"form-section"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 m-b-20"},l.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Address"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"address"},"Address",l.a.createElement("required",null,"*")),l.a.createElement("textarea",{name:"address",rows:"3",cols:"60",id:"address",placeholder:"Jl.Pahlawan Seribu, BSD City, Tangerang, 15322",value:this.state.address,onChange:this.handleChange,disabled:!0})))),l.a.createElement("div",{className:"form-section no-border"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 m-b-20"},l.a.createElement("strong",{className:"f-w-bold",style:{color:"#000",fontSize:"15px"}},"Contact"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"phone"},"Phone Number",l.a.createElement("required",null,"*")),l.a.createElement("input",{type:"number",name:"phone",id:"phone",placeholder:"021231231",value:this.state.phone,onChange:this.handleChange,disabled:!0})),l.a.createElement("div",{className:"form-field-top-label"},l.a.createElement("label",{for:"email"},"Email",l.a.createElement("required",null,"*")),l.a.createElement("input",{type:"text",size:"50",name:"email",id:"email",placeholder:"email@host.com",value:this.state.email,onChange:this.handleChange,disabled:!0})))),l.a.createElement("div",{className:"row",style:{justifyContent:"flex-end"}},!this.props.disabledForm&&l.a.createElement("button",{disabled:this.state.isSaving,onClick:this.save,className:"btn btn-icademy-primary float-right",style:{padding:"7px 8px !important",marginRight:30}},l.a.createElement("i",{className:"fa fa-save"}),this.state.isSaving?"Saving...":"Save"))))))))))))}}a.default=c}}]);
//# sourceMappingURL=47.bb1faf43.chunk.js.map